var mS=Object.defineProperty,vS=Object.defineProperties;var yS=Object.getOwnPropertyDescriptors;var jv=Object.getOwnPropertySymbols,bS=Object.getPrototypeOf,_S=Object.prototype.hasOwnProperty,wS=Object.prototype.propertyIsEnumerable,ES=Reflect.get;var Bv=(e,n,t)=>n in e?mS(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,O=(e,n)=>{for(var t in n||={})_S.call(n,t)&&Bv(e,t,n[t]);if(jv)for(var t of jv(n))wS.call(n,t)&&Bv(e,t,n[t]);return e},ue=(e,n)=>vS(e,yS(n));var wt=(e,n,t)=>ES(bS(e),t,n);var v=(e,n,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(l){i(l)}},s=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(e,n)).next())});var wf;function Mc(){return wf}function _n(e){let n=wf;return wf=e,n}var $v=Symbol("NotFound");function to(e){return e===$v||e?.name==="\u0275NotFound"}var dt=null,Ac=!1,Ef=1,CS=null,vt=Symbol("SIGNAL");function z(e){let n=dt;return dt=e,n}function Nc(){return dt}var no={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ro(e){if(Ac)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(e);let n=dt.producersTail;if(n!==void 0&&n.producer===e)return;let t,r=dt.recomputing;if(r&&(t=n!==void 0?n.nextProducer:dt.producers,t!==void 0&&t.producer===e)){dt.producersTail=t,t.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===dt&&(!r||SS(i,dt)))return;let o=oo(dt),s={producer:e,consumer:dt,nextProducer:t,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};dt.producersTail=s,n!==void 0?n.nextProducer=s:dt.producers=s,o&&zv(e,s)}function Vv(){Ef++}function Pc(e){if(!(oo(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Ef)){if(!e.producerMustRecompute(e)&&!xs(e)){Oc(e);return}e.producerRecomputeValue(e),Oc(e)}}function Cf(e){if(e.consumers===void 0)return;let n=Ac;Ac=!0;try{for(let t=e.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||DS(r)}}finally{Ac=n}}function Df(){return dt?.consumerAllowSignalWrites!==!1}function DS(e){e.dirty=!0,Cf(e),e.consumerMarkedDirty?.(e)}function Oc(e){e.dirty=!1,e.lastCleanEpoch=Ef}function io(e){return e&&Uv(e),z(e)}function Uv(e){e.producersTail=void 0,e.recomputing=!0}function Ss(e,n){z(n),e&&Hv(e)}function Hv(e){e.recomputing=!1;let n=e.producersTail,t=n!==void 0?n.nextProducer:e.producers;if(t!==void 0){if(oo(e))do t=Sf(t);while(t!==void 0);n!==void 0?n.nextProducer=void 0:e.producers=void 0}}function xs(e){for(let n=e.producers;n!==void 0;n=n.nextProducer){let t=n.producer,r=n.lastReadVersion;if(r!==t.version||(Pc(t),r!==t.version))return!0}return!1}function Is(e){if(oo(e)){let n=e.producers;for(;n!==void 0;)n=Sf(n)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function zv(e,n){let t=e.consumersTail,r=oo(e);if(t!==void 0?(n.nextConsumer=t.nextConsumer,t.nextConsumer=n):(n.nextConsumer=void 0,e.consumers=n),n.prevConsumer=t,e.consumersTail=n,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)zv(i.producer,i)}function Sf(e){let n=e.producer,t=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:n.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(n.consumers=r,!oo(n)){let o=n.producers;for(;o!==void 0;)o=Sf(o)}return t}function oo(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Fc(e){CS?.(e)}function SS(e,n){let t=n.producersTail;if(t!==void 0){let r=n.producers;do{if(r===e)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lc(e,n){return Object.is(e,n)}function jc(e,n){let t=Object.create(xS);t.computation=e,n!==void 0&&(t.equal=n);let r=()=>{if(Pc(t),ro(t),t.value===Ds)throw t.error;return t.value};return r[vt]=t,Fc(t),r}var Rc=Symbol("UNSET"),kc=Symbol("COMPUTING"),Ds=Symbol("ERRORED"),xS=ue(O({},no),{value:Rc,dirty:!0,error:null,equal:Lc,kind:"computed",producerMustRecompute(e){return e.value===Rc||e.value===kc},producerRecomputeValue(e){if(e.value===kc)throw new Error("");let n=e.value;e.value=kc;let t=io(e),r,i=!1;try{r=e.computation(),z(null),i=n!==Rc&&n!==Ds&&r!==Ds&&e.equal(n,r)}catch(o){r=Ds,e.error=o}finally{Ss(e,t)}if(i){e.value=n;return}e.value=r,e.version++}});function IS(){throw new Error}var Wv=IS;function qv(e){Wv(e)}function xf(e){Wv=e}var TS=null;function If(e,n){let t=Object.create(Bc);t.value=e,n!==void 0&&(t.equal=n);let r=()=>Gv(t);return r[vt]=t,Fc(t),[r,s=>so(t,s),s=>Tf(t,s)]}function Gv(e){return ro(e),e.value}function so(e,n){Df()||qv(e),e.equal(e.value,n)||(e.value=n,MS(e))}function Tf(e,n){Df()||qv(e),so(e,n(e.value))}var Bc=ue(O({},no),{equal:Lc,value:void 0,kind:"signal"});function MS(e){e.version++,Vv(),Cf(e),TS?.(e)}function K(e){return typeof e=="function"}function ao(e){let t=e(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $c=ao(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ts(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var Pe=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(K(r))try{r()}catch(o){n=o instanceof $c?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Kv(o)}catch(s){n=n??[],s instanceof $c?n=[...n,...s.errors]:n.push(s)}}if(n)throw new $c(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Kv(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Ts(t,n)}remove(n){let{_finalizers:t}=this;t&&Ts(t,n),n instanceof e&&n._removeParent(this)}};Pe.EMPTY=(()=>{let e=new Pe;return e.closed=!0,e})();var Mf=Pe.EMPTY;function Vc(e){return e instanceof Pe||e&&"closed"in e&&K(e.remove)&&K(e.add)&&K(e.unsubscribe)}function Kv(e){K(e)?e():e.unsubscribe()}var rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var co={setTimeout(e,n,...t){let{delegate:r}=co;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=co;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Uc(e){co.setTimeout(()=>{let{onUnhandledError:n}=rn;if(n)n(e);else throw e})}function Ms(){}var Yv=Af("C",void 0,void 0);function Zv(e){return Af("E",void 0,e)}function Qv(e){return Af("N",e,void 0)}function Af(e,n,t){return{kind:e,value:n,error:t}}var Jr=null;function lo(e){if(rn.useDeprecatedSynchronousErrorHandling){let n=!Jr;if(n&&(Jr={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:r}=Jr;if(Jr=null,t)throw r}}else e()}function Jv(e){rn.useDeprecatedSynchronousErrorHandling&&Jr&&(Jr.errorThrown=!0,Jr.error=e)}var Xr=class extends Pe{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Vc(n)&&n.add(this)):this.destination=kS}static create(n,t,r){return new uo(n,t,r)}next(n){this.isStopped?kf(Qv(n),this):this._next(n)}error(n){this.isStopped?kf(Zv(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?kf(Yv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AS=Function.prototype.bind;function Rf(e,n){return AS.call(e,n)}var Of=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Hc(r)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Hc(r)}else Hc(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Hc(t)}}},uo=class extends Xr{constructor(n,t,r){super();let i;if(K(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&rn.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Rf(n.next,o),error:n.error&&Rf(n.error,o),complete:n.complete&&Rf(n.complete,o)}):i=n}this.destination=new Of(i)}};function Hc(e){rn.useDeprecatedSynchronousErrorHandling?Jv(e):Uc(e)}function RS(e){throw e}function kf(e,n){let{onStoppedNotification:t}=rn;t&&co.setTimeout(()=>t(e,n))}var kS={closed:!0,next:Ms,error:RS,complete:Ms};var fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function kt(e){return e}function Nf(...e){return Pf(e)}function Pf(e){return e.length===0?kt:e.length===1?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}var oe=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=NS(t)?t:new uo(t,r,i);return lo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Xv(r),new r((i,o)=>{let s=new uo({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fo](){return this}pipe(...t){return Pf(t)(this)}toPromise(t){return t=Xv(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=n=>new e(n),e})();function Xv(e){var n;return(n=e??rn.Promise)!==null&&n!==void 0?n:Promise}function OS(e){return e&&K(e.next)&&K(e.error)&&K(e.complete)}function NS(e){return e&&e instanceof Xr||OS(e)&&Vc(e)}function Ff(e){return K(e?.lift)}function se(e){return n=>{if(Ff(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(e,n,t,r,i){return new Lf(e,n,t,r,i)}var Lf=class extends Xr{constructor(n,t,r,i,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){n.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function ho(){return se((e,n)=>{let t=null;e._refCount++;let r=ae(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}var po=class extends oe{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ff(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Pe;let t=this.getSubject();n.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Pe.EMPTY)}return n}refCount(){return ho()(this)}};var ey=ao(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class e extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new zc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ey}next(t){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){lo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Mf:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,Ts(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new oe;return t.source=this,t}}return e.create=(n,t)=>new zc(n,t),e})(),zc=class extends Be{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,n)}error(n){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&r!==void 0?r:Mf}};var rt=class extends Be{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}};var Et=new oe(e=>e.complete());function ty(e){return e&&K(e.schedule)}function ny(e){return e[e.length-1]}function ry(e){return K(ny(e))?e.pop():void 0}function mr(e){return ty(ny(e))?e.pop():void 0}function ti(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t}function Wc(e,n,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,n||[])).next())})}function iy(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ei(e){return this instanceof ei?(this.v=e,this):new ei(e)}function oy(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(e,n||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(m,y){o.push([f,g,m,y])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(g){h(o[0][3],g)}}function l(f){f.value instanceof ei?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function sy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof iy=="function"?iy(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var qc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Gc(e){return K(e?.then)}function Kc(e){return K(e[fo])}function Yc(e){return Symbol.asyncIterator&&K(e?.[Symbol.asyncIterator])}function Zc(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Qc=PS();function Jc(e){return K(e?.[Qc])}function Xc(e){return oy(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:r,done:i}=yield ei(t.read());if(i)return yield ei(void 0);yield yield ei(r)}}finally{t.releaseLock()}})}function el(e){return K(e?.getReader)}function Ge(e){if(e instanceof oe)return e;if(e!=null){if(Kc(e))return FS(e);if(qc(e))return LS(e);if(Gc(e))return jS(e);if(Yc(e))return ay(e);if(Jc(e))return BS(e);if(el(e))return $S(e)}throw Zc(e)}function FS(e){return new oe(n=>{let t=e[fo]();if(K(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function LS(e){return new oe(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function jS(e){return new oe(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Uc)})}function BS(e){return new oe(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function ay(e){return new oe(n=>{VS(e,n).catch(t=>n.error(t))})}function $S(e){return ay(Xc(e))}function VS(e,n){var t,r,i,o;return Wc(this,void 0,void 0,function*(){try{for(t=sy(e);r=yield t.next(),!r.done;){let s=r.value;if(n.next(s),n.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}n.complete()})}function Ct(e,n,t,r=0,i=!1){let o=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function tl(e,n=0){return se((t,r)=>{t.subscribe(ae(r,i=>Ct(r,e,()=>r.next(i),n),()=>Ct(r,e,()=>r.complete(),n),i=>Ct(r,e,()=>r.error(i),n)))})}function nl(e,n=0){return se((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function cy(e,n){return Ge(e).pipe(nl(n),tl(n))}function ly(e,n){return Ge(e).pipe(nl(n),tl(n))}function uy(e,n){return new oe(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}function dy(e,n){return new oe(t=>{let r;return Ct(t,n,()=>{r=e[Qc](),Ct(t,n,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>K(r?.return)&&r.return()})}function rl(e,n){if(!e)throw new Error("Iterable cannot be null");return new oe(t=>{Ct(t,n,()=>{let r=e[Symbol.asyncIterator]();Ct(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fy(e,n){return rl(Xc(e),n)}function hy(e,n){if(e!=null){if(Kc(e))return cy(e,n);if(qc(e))return uy(e,n);if(Gc(e))return ly(e,n);if(Yc(e))return rl(e,n);if(Jc(e))return dy(e,n);if(el(e))return fy(e,n)}throw Zc(e)}function Oe(e,n){return n?hy(e,n):Ge(e)}function H(...e){let n=mr(e);return Oe(e,n)}function go(e,n){let t=K(e)?e:()=>e,r=i=>i.error(t());return new oe(n?i=>n.schedule(r,0,i):r)}function jf(e){return!!e&&(e instanceof oe||K(e.lift)&&K(e.subscribe))}var Hn=ao(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ce(e,n){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>{r.next(e.call(n,o,i++))}))})}var{isArray:US}=Array;function HS(e,n){return US(n)?e(...n):e(n)}function py(e){return ce(n=>HS(e,n))}var{isArray:zS}=Array,{getPrototypeOf:WS,prototype:qS,keys:GS}=Object;function gy(e){if(e.length===1){let n=e[0];if(zS(n))return{args:n,keys:null};if(KS(n)){let t=GS(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}function KS(e){return e&&typeof e=="object"&&WS(e)===qS}function my(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function il(...e){let n=mr(e),t=ry(e),{args:r,keys:i}=gy(e);if(r.length===0)return Oe([],n);let o=new oe(YS(r,n,i?s=>my(i,s):kt));return t?o.pipe(py(t)):o}function YS(e,n,t=kt){return r=>{vy(n,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)vy(n,()=>{let l=Oe(e[c],n),u=!1;l.subscribe(ae(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function vy(e,n,t){e?Ct(t,e,n):n()}function yy(e,n,t,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&n.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{o&&n.next(g),l++;let m=!1;Ge(t(g,u++)).subscribe(ae(n,y=>{i?.(y),o?f(y):n.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let y=c.shift();s?Ct(n,s,()=>p(y)):p(y)}h()}catch(y){n.error(y)}}))};return e.subscribe(ae(n,f,()=>{d=!0,h()})),()=>{a?.()}}function Fe(e,n,t=1/0){return K(n)?Fe((r,i)=>ce((o,s)=>n(r,o,i,s))(Ge(e(r,i))),t):(typeof n=="number"&&(t=n),se((r,i)=>yy(r,i,e,t)))}function mo(e=1/0){return Fe(kt,e)}function by(){return mo(1)}function vo(...e){return by()(Oe(e,mr(e)))}function As(e){return new oe(n=>{Ge(e()).subscribe(n)})}function Ot(e,n){return se((t,r)=>{let i=0;t.subscribe(ae(r,o=>e.call(n,o,i++)&&r.next(o)))})}function zn(e){return se((n,t)=>{let r=null,i=!1,o;r=n.subscribe(ae(t,void 0,void 0,s=>{o=Ge(e(s,zn(e)(n))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function _y(e,n,t,r,i){return(o,s)=>{let a=t,c=n,l=0;o.subscribe(ae(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ni(e,n){return K(n)?Fe(e,n,1):Fe(e,1)}function vr(e){return se((n,t)=>{let r=!1;n.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function Wn(e){return e<=0?()=>Et:se((n,t)=>{let r=0;n.subscribe(ae(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function ol(e=ZS){return se((n,t)=>{let r=!1;n.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function ZS(){return new Hn}function Rs(e){return se((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function qn(e,n){let t=arguments.length>=2;return r=>r.pipe(e?Ot((i,o)=>e(i,o,r)):kt,Wn(1),t?vr(n):ol(()=>new Hn))}function yo(e){return e<=0?()=>Et:se((n,t)=>{let r=[];n.subscribe(ae(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bf(e,n){let t=arguments.length>=2;return r=>r.pipe(e?Ot((i,o)=>e(i,o,r)):kt,yo(1),t?vr(n):ol(()=>new Hn))}function $f(e,n){return se(_y(e,n,arguments.length>=2,!0))}function Vf(...e){let n=mr(e);return se((t,r)=>{(n?vo(e,t,n):vo(e,t)).subscribe(r)})}function Dt(e,n){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ae(r,c=>{i?.unsubscribe();let l=0,u=o++;Ge(e(c,u)).subscribe(i=ae(r,d=>r.next(n?n(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function bo(e){return se((n,t)=>{Ge(e).subscribe(ae(t,()=>t.complete(),Ms)),!t.closed&&n.subscribe(t)})}function Ke(e,n,t){let r=K(e)||n||t?{next:e,error:n,complete:t}:e;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ae(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):kt}function wy(e){let n=z(null);try{return e()}finally{z(n)}}var ul="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(n,t){super(Ps(n,t)),this.code=n}};function QS(e){return`NG0${Math.abs(e)}`}function Ps(e,n){return`${QS(e)}${n?": "+n:""}`}var Fs=globalThis;function he(e){for(let n in e)if(e[n]===he)return n;throw Error("")}function Kn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Kn).join(", ")}]`;if(e==null)return""+e;let n=e.overriddenName||e.name;if(n)return`${n}`;let t=e.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Xf(e,n){return e?n?`${e} ${n}`:e:n||""}var JS=he({__forward_ref__:he});function dl(e){return e.__forward_ref__=dl,e.toString=function(){return Kn(this())},e}function St(e){return eh(e)?e():e}function eh(e){return typeof e=="function"&&e.hasOwnProperty(JS)&&e.__forward_ref__===dl}function F(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ci(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ls(e){return XS(e,fl)}function th(e){return Ls(e)!==null}function XS(e,n){return e.hasOwnProperty(n)&&e[n]||null}function ex(e){let n=e?.[fl]??null;return n||null}function Hf(e){return e&&e.hasOwnProperty(al)?e[al]:null}var fl=he({\u0275prov:he}),al=he({\u0275inj:he}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nh(e){return e&&!!e.\u0275providers}var rh=he({\u0275cmp:he}),ih=he({\u0275dir:he}),oh=he({\u0275pipe:he}),sh=he({\u0275mod:he}),Os=he({\u0275fac:he}),li=he({__NG_ELEMENT_ID__:he}),Ey=he({__NG_ENV_ID__:he});function En(e){return typeof e=="string"?e:e==null?"":String(e)}function Dy(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():En(e)}var Sy=he({ngErrorCode:he}),tx=he({ngErrorMessage:he}),nx=he({ngTokenPath:he});function ah(e,n){return xy("",-200,n)}function hl(e,n){throw new L(-201,!1)}function xy(e,n,t){let r=new L(n,e);return r[Sy]=n,r[tx]=e,t&&(r[nx]=t),r}function rx(e){return e[Sy]}var zf;function Iy(){return zf}function Nt(e){let n=zf;return zf=e,n}function ch(e,n,t){let r=Ls(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(n!==void 0)return n;hl(e,"Injector")}var ix={},ri=ix,ox="__NG_DI_FLAG__",Wf=class{injector;constructor(n){this.injector=n}retrieve(n,t){let r=ii(t)||0;try{return this.injector.get(n,r&8?null:ri,r)}catch(i){if(to(i))return i;throw i}}};function sx(e,n=0){let t=Mc();if(t===void 0)throw new L(-203,!1);if(t===null)return ch(e,void 0,n);{let r=ax(n),i=t.retrieve(e,r);if(to(i)){if(r.optional)return null;throw i}return i}}function Y(e,n=0){return(Iy()||sx)(St(e),n)}function k(e,n){return Y(e,ii(n))}function ii(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ax(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function qf(e){let n=[];for(let t=0;t<e.length;t++){let r=St(e[t]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=cx(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}n.push(Y(i,o))}else n.push(Y(r))}return n}function cx(e){return e[ox]}function oi(e,n){let t=e.hasOwnProperty(Os);return t?e[Os]:null}function Ty(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=n[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function My(e){return e.flat(Number.POSITIVE_INFINITY)}function pl(e,n){e.forEach(t=>Array.isArray(t)?pl(t,n):n(t))}function lh(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function js(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Ay(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(i===1)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;){let o=i-2;e[i]=e[o],i--}e[n]=t,e[n+1]=r}}function Ry(e,n,t){let r=wo(e,n);return r>=0?e[r|1]=t:(r=~r,Ay(e,r,n,t)),r}function gl(e,n){let t=wo(e,n);if(t>=0)return e[t|1]}function wo(e,n){return lx(e,n,1)}function lx(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<t];if(n===s)return o<<t;s>n?i=o:r=o+1}return~(i<<t)}var ui={},Wt=[],Yn=new U(""),uh=new U("",-1),dh=new U(""),Ns=class{get(n,t=ri){if(t===ri){let i=xy("",-201);throw i.name="\u0275NotFound",i}return t}};function fh(e){return e[sh]||null}function br(e){return e[rh]||null}function hh(e){return e[ih]||null}function ky(e){return e[oh]||null}function di(e){return{\u0275providers:e}}function Oy(e){return di([{provide:Yn,multi:!0,useValue:e}])}function Ny(...e){return{\u0275providers:ph(!0,e),\u0275fromNgModule:!0}}function ph(e,...n){let t=[],r=new Set,i,o=s=>{t.push(s)};return pl(n,s=>{let a=s;cl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Py(i,o),t}function Py(e,n){for(let t=0;t<e.length;t++){let{ngModule:r,providers:i}=e[t];gh(i,o=>{n(o,r)})}}function cl(e,n,t,r){if(e=St(e),!e)return!1;let i=null,o=Hf(e),s=!o&&br(e);if(!o&&!s){let c=e.ngModule;if(o=Hf(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)cl(l,n,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{pl(o.imports,u=>{cl(u,n,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Py(l,n)}if(!a){let l=oi(i)||(()=>new i);n({provide:i,useFactory:l,deps:Wt},i),n({provide:dh,useValue:i,multi:!0},i),n({provide:Yn,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;gh(c,u=>{n(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function gh(e,n){for(let t of e)nh(t)&&(t=t.\u0275providers),Array.isArray(t)?gh(t,n):n(t)}var ux=he({provide:String,useValue:he});function Fy(e){return e!==null&&typeof e=="object"&&ux in e}function dx(e){return!!(e&&e.useExisting)}function fx(e){return!!(e&&e.useFactory)}function ll(e){return typeof e=="function"}var Bs=new U(""),sl={},Cy={},Uf;function $s(){return Uf===void 0&&(Uf=new Ns),Uf}var Ye=class{},si=class extends Ye{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Kf(n,s=>this.processProvider(s)),this.records.set(uh,_o(void 0,this)),i.has("environment")&&this.records.set(Ye,_o(void 0,this));let o=this.records.get(Bs);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(dh,Wt,{self:!0}))}retrieve(n,t){let r=ii(t)||0;try{return this.get(n,ri,r)}catch(i){if(to(i))return i;throw i}}destroy(){ks(this),this._destroyed=!0;let n=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(n)}}onDestroy(n){return ks(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){ks(this);let t=_n(this),r=Nt(void 0),i;try{return n()}finally{_n(t),Nt(r)}}get(n,t=ri,r){if(ks(this),n.hasOwnProperty(Ey))return n[Ey](this);let i=ii(r),o,s=_n(this),a=Nt(void 0);try{if(!(i&4)){let l=this.records.get(n);if(l===void 0){let u=vx(n)&&Ls(n);u&&this.injectableDefInScope(u)?l=_o(Gf(n),sl):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l,i)}let c=i&2?$s():this.parent;return t=i&8&&t===ri?null:t,c.get(n,t)}catch(c){let l=rx(c);throw l===-200||l===-201?new L(l,null):c}finally{Nt(a),_n(s)}}resolveInjectorInitializers(){let n=z(null),t=_n(this),r=Nt(void 0),i;try{let o=this.get(Yn,Wt,{self:!0});for(let s of o)s()}finally{_n(t),Nt(r),z(n)}}toString(){let n=[],t=this.records;for(let r of t.keys())n.push(Kn(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=St(n);let t=ll(n)?n:St(n&&n.provide),r=px(n);if(!ll(n)&&n.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,sl,!0),i.factory=()=>qf(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t,r){let i=z(null);try{if(t.value===Cy)throw ah(Kn(n));return t.value===sl&&(t.value=Cy,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&mx(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=St(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gf(e){let n=Ls(e),t=n!==null?n.factory:oi(e);if(t!==null)return t;if(e instanceof U)throw new L(204,!1);if(e instanceof Function)return hx(e);throw new L(204,!1)}function hx(e){if(e.length>0)throw new L(204,!1);let t=ex(e);return t!==null?()=>t.factory(e):()=>new e}function px(e){if(Fy(e))return _o(void 0,e.useValue);{let n=Ly(e);return _o(n,sl)}}function Ly(e,n,t){let r;if(ll(e)){let i=St(e);return oi(i)||Gf(i)}else if(Fy(e))r=()=>St(e.useValue);else if(fx(e))r=()=>e.useFactory(...qf(e.deps||[]));else if(dx(e))r=(i,o)=>Y(St(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=St(e&&(e.useClass||e.provide));if(gx(e))r=()=>new i(...qf(e.deps));else return oi(i)||Gf(i)}return r}function ks(e){if(e.destroyed)throw new L(205,!1)}function _o(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function gx(e){return!!e.deps}function mx(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function vx(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Kf(e,n){for(let t of e)Array.isArray(t)?Kf(t,n):t&&nh(t)?Kf(t.\u0275providers,n):n(t)}function yt(e,n){let t;e instanceof si?(ks(e),t=e):t=new Wf(e);let r,i=_n(t),o=Nt(void 0);try{return n()}finally{_n(i),Nt(o)}}function jy(){return Iy()!==void 0||Mc()!=null}var sn=0,V=1,q=2,$e=3,qt=4,Gt=5,Eo=6,Co=7,Ne=8,Zn=9,Cn=10,Ce=11,Do=12,mh=13,fi=14,Pt=15,_r=16,hi=17,Dn=18,Vs=19,vh=20,Gn=21,ml=22,Us=23,Ft=24,vl=25,pi=26,Ze=27,By=1,yh=6,wr=7,Hs=8,gi=9,Me=10;function Sn(e){return Array.isArray(e)&&typeof e[By]=="object"}function an(e){return Array.isArray(e)&&e[By]===!0}function bh(e){return(e.flags&4)!==0}function Er(e){return e.componentOffset>-1}function yl(e){return(e.flags&1)===1}function mi(e){return!!e.template}function So(e){return(e[q]&512)!==0}function vi(e){return(e[q]&256)===256}var _h="svg",$y="math";function Kt(e){for(;Array.isArray(e);)e=e[sn];return e}function wh(e,n){return Kt(n[e])}function cn(e,n){return Kt(n[e.index])}function zs(e,n){return e.data[n]}function Vy(e,n){return e[n]}function Yt(e,n){let t=n[e];return Sn(t)?t:t[sn]}function Uy(e){return(e[q]&4)===4}function bl(e){return(e[q]&128)===128}function Hy(e){return an(e[$e])}function xn(e,n){return n==null?null:e[n]}function Eh(e){e[hi]=0}function Ch(e){e[q]&1024||(e[q]|=1024,bl(e)&&qs(e))}function zy(e,n){for(;e>0;)n=n[fi],e--;return n}function Ws(e){return!!(e[q]&9216||e[Ft]?.dirty)}function _l(e){e[Cn].changeDetectionScheduler?.notify(8),e[q]&64&&(e[q]|=1024),Ws(e)&&qs(e)}function qs(e){e[Cn].changeDetectionScheduler?.notify(0);let n=yr(e);for(;n!==null&&!(n[q]&8192||(n[q]|=8192,!bl(n)));)n=yr(n)}function Dh(e,n){if(vi(e))throw new L(911,!1);e[Gn]===null&&(e[Gn]=[]),e[Gn].push(n)}function Wy(e,n){if(e[Gn]===null)return;let t=e[Gn].indexOf(n);t!==-1&&e[Gn].splice(t,1)}function yr(e){let n=e[$e];return an(n)?n[$e]:n}function Sh(e){return e[Co]??=[]}function xh(e){return e.cleanup??=[]}function qy(e,n,t,r){let i=Sh(n);i.push(t),e.firstCreatePass&&xh(e).push(r,i.length-1)}var Z={lFrame:sb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Yf=!1;function Gy(){return Z.lFrame.elementDepthCount}function Ky(){Z.lFrame.elementDepthCount++}function Ih(){Z.lFrame.elementDepthCount--}function Yy(){return Z.bindingsEnabled}function Zy(){return Z.skipHydrationRootTNode!==null}function Th(e){return Z.skipHydrationRootTNode===e}function Mh(){Z.skipHydrationRootTNode=null}function J(){return Z.lFrame.lView}function ft(){return Z.lFrame.tView}function Qe(e){return Z.lFrame.contextLView=e,e[Ne]}function Je(e){return Z.lFrame.contextLView=null,e}function ht(){let e=Ah();for(;e!==null&&e.type===64;)e=e.parent;return e}function Ah(){return Z.lFrame.currentTNode}function Qy(){let e=Z.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function xo(e,n){let t=Z.lFrame;t.currentTNode=e,t.isParent=n}function Rh(){return Z.lFrame.isParent}function Jy(){Z.lFrame.isParent=!1}function Xy(){return Z.lFrame.contextLView}function kh(){return Yf}function Oh(e){let n=Yf;return Yf=e,n}function Nh(){let e=Z.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Ph(){return Z.lFrame.bindingIndex}function eb(e){return Z.lFrame.bindingIndex=e}function yi(){return Z.lFrame.bindingIndex++}function wl(e){let n=Z.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function tb(){return Z.lFrame.inI18n}function nb(e,n){let t=Z.lFrame;t.bindingIndex=t.bindingRootIndex=e,El(n)}function rb(){return Z.lFrame.currentDirectiveIndex}function El(e){Z.lFrame.currentDirectiveIndex=e}function ib(e){let n=Z.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function Fh(){return Z.lFrame.currentQueryIndex}function Cl(e){Z.lFrame.currentQueryIndex=e}function yx(e){let n=e[V];return n.type===2?n.declTNode:n.type===1?e[Gt]:null}function Lh(e,n,t){if(t&4){let i=n,o=e;for(;i=i.parent,i===null&&!(t&1);)if(i=yx(o),i===null||(o=o[fi],i.type&10))break;if(i===null)return!1;n=i,e=o}let r=Z.lFrame=ob();return r.currentTNode=n,r.lView=e,!0}function Dl(e){let n=ob(),t=e[V];Z.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function ob(){let e=Z.lFrame,n=e===null?null:e.child;return n===null?sb(e):n}function sb(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function ab(){let e=Z.lFrame;return Z.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var jh=ab;function Sl(){let e=ab();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function cb(e){return(Z.lFrame.contextLView=zy(e,Z.lFrame.contextLView))[Ne]}function In(){return Z.lFrame.selectedIndex}function Cr(e){Z.lFrame.selectedIndex=e}function xl(){let e=Z.lFrame;return zs(e.tView,e.selectedIndex)}function Il(){Z.lFrame.currentNamespace=_h}function Tl(){bx()}function bx(){Z.lFrame.currentNamespace=null}function lb(){return Z.lFrame.currentNamespace}var ub=!0;function Ml(){return ub}function Al(e){ub=e}function Zf(e,n=null,t=null,r){let i=Bh(e,n,t,r);return i.resolveInjectorInitializers(),i}function Bh(e,n=null,t=null,r,i=new Set){let o=[t||Wt,Ny(e)];return r=r||(typeof e=="object"?void 0:Kn(e)),new si(o,n||$s(),r||null,i)}var on=class e{static THROW_IF_NOT_FOUND=ri;static NULL=new Ns;static create(n,t){if(Array.isArray(n))return Zf({name:""},t,n,"");{let r=n.name??"";return Zf({name:r},n.parent,n.providers,r)}}static \u0275prov=F({token:e,providedIn:"any",factory:()=>Y(uh)});static __NG_ELEMENT_ID__=-1},Xe=new U(""),ln=(()=>{class e{static __NG_ELEMENT_ID__=_x;static __NG_ENV_ID__=t=>t}return e})(),Qf=class extends ln{_lView;constructor(n){super(),this._lView=n}get destroyed(){return vi(this._lView)}onDestroy(n){let t=this._lView;return Dh(t,n),()=>Wy(t,n)}};function _x(){return new Qf(J())}var wn=class{_console=console;handleError(n){this._console.error("ERROR",n)}},Lt=new U("",{providedIn:"root",factory:()=>{let e=k(Ye),n;return t=>{e.destroyed&&!n?setTimeout(()=>{throw t}):(n??=e.get(wn),n.handleError(t))}}}),db={provide:Yn,useValue:()=>void k(wn),multi:!0},wx=new U("",{providedIn:"root",factory:()=>{let e=k(Xe).defaultView;if(!e)return;let n=k(Lt),t=o=>{n(o.reason),o.preventDefault()},r=o=>{o.error?n(o.error):n(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",t),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(ln).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",t)})}});function $h(){return di([Oy(()=>void k(wx))])}function X(e,n){let[t,r,i]=If(e,n?.equal),o=t,s=o[vt];return o.set=r,o.update=i,o.asReadonly=fb.bind(o),o}function fb(){let e=this[vt];if(e.readonlyFn===void 0){let n=()=>this();n[vt]=e,e.readonlyFn=n}return e.readonlyFn}var ai=class{},Gs=new U("",{providedIn:"root",factory:()=>!1});var Vh=new U(""),Uh=new U(""),Qn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new oe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ks(...e){}var Hh=(()=>{class e{static \u0275prov=F({token:e,providedIn:"root",factory:()=>new Jf})}return e})(),Jf=class{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){let t=n.zone,r=this.queues.get(t);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){let t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(let[t,r]of this.queues)t===null?n||=this.flushQueue(r):n||=t.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let t=!1;for(let r of n)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ra(e){return{toString:e}.toString()}function Ax(e){return typeof e=="function"}var jl=class{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Wb(e,n,t,r){n!==null?n.applyValueToInputSignal(n,r):e[t]=r}var Ci=(()=>{let e=()=>qb;return e.ngInherit=!0,e})();function qb(e){return e.type.prototype.ngOnChanges&&(e.setInput=kx),Rx}function Rx(){let e=Kb(this),n=e?.current;if(n){let t=e.previous;if(t===ui)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function kx(e,n,t,r,i){let o=this.declaredInputs[r],s=Kb(e)||Ox(e,{previous:ui,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new jl(l&&l.currentValue,t,c===ui),Wb(e,n,i,t)}var Gb="__ngSimpleChanges__";function Kb(e){return e[Gb]||null}function Ox(e,n){return e[Gb]=n}var hb=[];var me=function(e,n=null,t){for(let r=0;r<hb.length;r++){let i=hb[r];i(e,n,t)}};function Nx(e,n,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=n.type.prototype;if(r){let s=qb(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}i&&(t.preOrderHooks??=[]).push(0-e,i),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function Px(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-t,s),a&&((e.contentHooks??=[]).push(t,a),(e.contentCheckHooks??=[]).push(t,a)),c&&(e.viewHooks??=[]).push(-t,c),l&&((e.viewHooks??=[]).push(t,l),(e.viewCheckHooks??=[]).push(t,l)),u!=null&&(e.destroyHooks??=[]).push(t,u)}}function Ol(e,n,t){Yb(e,n,3,t)}function Nl(e,n,t,r){(e[q]&3)===t&&Yb(e,n,t,r)}function zh(e,n){let t=e[q];(t&3)===n&&(t&=16383,t+=1,e[q]=t)}function Yb(e,n,t,r){let i=r!==void 0?e[hi]&65535:0,o=r??-1,s=n.length-1,a=0;for(let c=i;c<s;c++)if(typeof n[c+1]=="number"){if(a=n[c],r!=null&&a>=r)break}else n[c]<0&&(e[hi]+=65536),(a<o||o==-1)&&(Fx(e,t,n,c),e[hi]=(e[hi]&4294901760)+c+2),c++}function pb(e,n){me(4,e,n);let t=z(null);try{n.call(e)}finally{z(t),me(5,e,n)}}function Fx(e,n,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=e[s];i?e[q]>>14<e[hi]>>16&&(e[q]&3)===n&&(e[q]+=16384,pb(a,o)):pb(a,o)}var To=-1,Qs=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r,i){this.factory=n,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Lx(e){return(e.flags&8)!==0}function jx(e){return(e.flags&16)!==0}function Bx(e,n,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];e.setAttribute(n,s,a,o)}else{let o=i,s=t[++r];$x(o)?e.setProperty(n,o,s):e.setAttribute(n,o,s),r++}}return r}function Zb(e){return e===3||e===4||e===6}function $x(e){return e.charCodeAt(0)===64}function iu(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){let i=n[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?gb(e,t,i,null,n[++r]):gb(e,t,i,null,null))}}return e}function gb(e,n,t,r,i){let o=0,s=e.length;if(n===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===t){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,n),o=s+1),e.splice(o++,0,t),i!==null&&e.splice(o++,0,i)}function Qb(e){return e!==To}function Bl(e){return e&32767}function Vx(e){return e>>16}function $l(e,n){let t=Vx(e),r=n;for(;t>0;)r=r[fi],t--;return r}var Qh=!0;function mb(e){let n=Qh;return Qh=e,n}var Ux=256,Jb=Ux-1,Xb=5,Hx=0,Tn={};function zx(e,n,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(li)&&(r=t[li]),r==null&&(r=t[li]=Hx++);let i=r&Jb,o=1<<i;n.data[e+(i>>Xb)]|=o}function e_(e,n){let t=t_(e,n);if(t!==-1)return t;let r=n[V];r.firstCreatePass&&(e.injectorIndex=n.length,Wh(r.data,e),Wh(n,null),Wh(r.blueprint,null));let i=Dp(e,n),o=e.injectorIndex;if(Qb(i)){let s=Bl(i),a=$l(i,n),c=a[V].data;for(let l=0;l<8;l++)n[o+l]=a[s+l]|c[s+l]}return n[o+8]=i,o}function Wh(e,n){e.push(0,0,0,0,0,0,0,0,n)}function t_(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function Dp(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;i!==null;){if(r=s_(i),r===null)return To;if(t++,i=i[fi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return To}function Wx(e,n,t){zx(e,n,t)}function qx(e,n){if(n==="class")return e.classes;if(n==="style")return e.styles;let t=e.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Zb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===n)return t[i+1];i=i+2}}}return null}function n_(e,n,t){if(t&8||e!==void 0)return e;hl(n,"NodeInjector")}function r_(e,n,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=e[Zn],o=Nt(void 0);try{return i?i.get(n,r,t&8):ch(n,r,t&8)}finally{Nt(o)}}return n_(r,n,t)}function i_(e,n,t,r=0,i){if(e!==null){if(n[q]&2048&&!(r&2)){let s=Zx(e,n,t,r,Tn);if(s!==Tn)return s}let o=o_(e,n,t,r,Tn);if(o!==Tn)return o}return r_(n,t,r,i)}function o_(e,n,t,r,i){let o=Kx(t);if(typeof o=="function"){if(!Lh(n,e,r))return r&1?n_(i,t,r):r_(n,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))hl(t);else return s}finally{jh()}}else if(typeof o=="number"){let s=null,a=t_(e,n),c=To,l=r&1?n[Pt][Gt]:null;for((a===-1||r&4)&&(c=a===-1?Dp(e,n):n[a+8],c===To||!yb(r,!1)?a=-1:(s=n[V],a=Bl(c),n=$l(c,n)));a!==-1;){let u=n[V];if(vb(o,a,u.data)){let d=Gx(a,n,t,s,r,l);if(d!==Tn)return d}c=n[a+8],c!==To&&yb(r,n[V].data[a+8]===l)&&vb(o,a,n)?(s=u,a=Bl(c),n=$l(c,n)):a=-1}}return i}function Gx(e,n,t,r,i,o){let s=n[V],a=s.data[e+8],c=r==null?Er(a)&&Qh:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Pl(a,s,t,c,l);return u!==null?Vl(n,s,u,a,i):Tn}function Pl(e,n,t,r,i){let o=e.providerIndexes,s=n.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(i){let f=s[c];if(f&&mi(f)&&f.type===t)return c}return null}function Vl(e,n,t,r,i){let o=e[t],s=n.data;if(o instanceof Qs){let a=o;if(a.resolving){let f=Dy(s[t]);throw ah(f)}let c=mb(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,d=a.injectImpl?Nt(a.injectImpl):null,h=Lh(e,r,0);try{o=e[t]=a.factory(void 0,i,s,e,r),n.firstCreatePass&&t>=r.directiveStart&&Nx(t,s[t],n)}finally{d!==null&&Nt(d),mb(c),a.resolving=!1,jh()}}return o}function Kx(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(li)?e[li]:void 0;return typeof n=="number"?n>=0?n&Jb:Yx:n}function vb(e,n,t){let r=1<<e;return!!(t[n+(e>>Xb)]&r)}function yb(e,n){return!(e&2)&&!(e&1&&n)}var bi=class{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return i_(this._tNode,this._lView,n,ii(r),t)}};function Yx(){return new bi(ht(),J())}function ou(e){return ra(()=>{let n=e.prototype.constructor,t=n[Os]||Jh(n),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Os]||Jh(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Jh(e){return eh(e)?()=>{let n=Jh(St(e));return n&&n()}:oi(e)}function Zx(e,n,t,r,i){let o=e,s=n;for(;o!==null&&s!==null&&s[q]&2048&&!So(s);){let a=o_(o,s,t,r|2,Tn);if(a!==Tn)return a;let c=o.parent;if(!c){let l=s[vh];if(l){let u=l.get(t,Tn,r);if(u!==Tn)return u}c=s_(s),s=s[fi]}o=c}return i}function s_(e){let n=e[V],t=n.type;return t===2?n.declTNode:t===1?e[Gt]:null}function ia(e){return qx(ht(),e)}function Qx(){return No(ht(),J())}function No(e,n){return new er(cn(e,n))}var er=(()=>{class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Qx}return e})();function Jx(e){return e instanceof er?e.nativeElement:e}function Xx(){return this._results[Symbol.iterator]()}var Ul=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Be}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let r=My(n);(this._changesDetected=!Ty(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Xx};function a_(e){return(e.flags&128)===128}var Sp=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Sp||{}),c_=new Map,eI=0;function tI(){return eI++}function nI(e){c_.set(e[Vs],e)}function Xh(e){c_.delete(e[Vs])}var bb="__ngContext__";function Mo(e,n){Sn(n)?(e[bb]=n[Vs],nI(n)):e[bb]=n}function l_(e){return d_(e[Do])}function u_(e){return d_(e[qt])}function d_(e){for(;e!==null&&!an(e);)e=e[qt];return e}var ep;function xp(e){ep=e}function f_(){if(ep!==void 0)return ep;if(typeof document<"u")return document;throw new L(210,!1)}var su=new U("",{providedIn:"root",factory:()=>rI}),rI="ng",au=new U(""),oa=new U("",{providedIn:"platform",factory:()=>"unknown"});var cu=new U("",{providedIn:"root",factory:()=>f_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iI="h",oI="b";var h_="r";var p_="di";var g_=!1,m_=new U("",{providedIn:"root",factory:()=>g_});var sI=(e,n,t,r)=>{};function aI(e,n,t,r){sI(e,n,t,r)}function Ip(e){return(e.flags&32)===32}var cI=()=>null;function v_(e,n,t=!1){return cI(e,n,t)}function y_(e,n){let t=e.contentQueries;if(t!==null){let r=z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=e.data[s];Cl(o),a.contentQueries(2,n[s],s)}}}finally{z(r)}}}function tp(e,n,t){Cl(0);let r=z(null);try{n(e,t)}finally{z(r)}}function b_(e,n,t){if(bh(n)){let r=z(null);try{let i=n.directiveStart,o=n.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{z(r)}}}var Jn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Jn||{});var Rl;function lI(){if(Rl===void 0&&(Rl=null,Fs.trustedTypes))try{Rl=Fs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Rl}function _b(e){return lI()?.createScriptURL(e)||e}var Hl=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ul})`}};function lu(e){return e instanceof Hl?e.changingThisBreaksApplicationSecurity:e}function Tp(e,n){let t=__(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${ul})`)}return t===n}function __(e){return e instanceof Hl&&e.getTypeName()||null}var uI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function w_(e){return e=String(e),e.match(uI)?e:"unsafe:"+e}function dI(e,n){return e.createText(n)}function fI(e,n,t){e.setValue(n,t)}function E_(e,n,t){return e.createElement(n,t)}function zl(e,n,t,r,i){e.insertBefore(n,t,r,i)}function C_(e,n,t){e.appendChild(n,t)}function wb(e,n,t,r,i){r!==null?zl(e,n,t,r,i):C_(e,n,t)}function D_(e,n,t,r){e.removeChild(null,n,t,r)}function hI(e,n,t){e.setAttribute(n,"style",t)}function pI(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function S_(e,n,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Bx(e,n,r),i!==null&&pI(e,n,i),o!==null&&hI(e,n,o)}var uu=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(uu||{});function x_(e){let n=T_();return n?n.sanitize(uu.URL,e)||"":Tp(e,"URL")?lu(e):w_(En(e))}function I_(e){let n=T_();if(n)return _b(n.sanitize(uu.RESOURCE_URL,e)||"");if(Tp(e,"ResourceURL"))return _b(lu(e));throw new L(904,!1)}var gI=new Set(["embed","frame","iframe","media","script"]),mI=new Set(["base","link","script"]);function vI(e,n){return n==="src"&&gI.has(e)||n==="href"&&mI.has(e)||n==="xlink:href"&&e==="script"?I_:x_}function Mp(e,n,t){return vI(n,t)(e)}function T_(){let e=J();return e&&e[Cn].sanitizer}function M_(e){return e instanceof Function?e():e}function yI(e,n,t){let r=e.length;for(;;){let i=e.indexOf(n,t);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=n.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}t=i+1}}var A_="ng-template";function bI(e,n,t,r){let i=0;if(r){for(;i<n.length&&typeof n[i]=="string";i+=2)if(n[i]==="class"&&yI(n[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ap(e))return!1;if(i=n.indexOf(1,i),i>-1){let o;for(;++i<n.length&&typeof(o=n[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ap(e){return e.type===4&&e.value!==A_}function _I(e,n,t){let r=e.type===4&&!t?A_:e.value;return n===r}function wI(e,n,t){let r=4,i=e.attrs,o=i!==null?DI(i):0,s=!1;for(let a=0;a<n.length;a++){let c=n[a];if(typeof c=="number"){if(!s&&!un(r)&&!un(c))return!1;if(s&&un(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!_I(e,c,t)||c===""&&n.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!bI(e,i,c,t)){if(un(r))return!1;s=!0}}else{let l=n[++a],u=EI(c,i,Ap(e),t);if(u===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(e){return(e&1)===0}function EI(e,n,t,r){if(n===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<n.length;){let s=n[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=n[++i];for(;typeof a=="string";)a=n[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return SI(n,e)}function CI(e,n,t=!1){for(let r=0;r<n.length;r++)if(wI(e,n[r],t))return!0;return!1}function DI(e){for(let n=0;n<e.length;n++){let t=e[n];if(Zb(t))return n}return e.length}function SI(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let r=e[t];if(typeof r=="number")return-1;if(r===n)return t;t++}return-1}function Eb(e,n){return e?":not("+n.trim()+")":n}function xI(e){let n=e[0],t=1,r=2,i="",o=!1;for(;t<e.length;){let s=e[t];if(typeof s=="string")if(r&2){let a=e[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(n+=Eb(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(n+=Eb(o,i)),n}function II(e){return e.map(xI).join(",")}function TI(e){let n=[],t=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&n.push(o,e[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return t.length&&n.push(1,...t),n}var bt={};function Rp(e,n,t,r,i,o,s,a,c,l,u){let d=Ze+r,h=d+i,f=MI(d,h),p=typeof l=="function"?l():l;return f[V]={type:e,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:n,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function MI(e,n){let t=[];for(let r=0;r<n;r++)t.push(r<e?null:bt);return t}function AI(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=Rp(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function kp(e,n,t,r,i,o,s,a,c,l,u){let d=n.blueprint.slice();return d[sn]=i,d[q]=r|4|128|8|64|1024,(l!==null||e&&e[q]&2048)&&(d[q]|=2048),Eh(d),d[$e]=d[fi]=e,d[Ne]=t,d[Cn]=s||e&&e[Cn],d[Ce]=a||e&&e[Ce],d[Zn]=c||e&&e[Zn]||null,d[Gt]=o,d[Vs]=tI(),d[Eo]=u,d[vh]=l,d[Pt]=n.type==2?e[Pt]:d,d}function RI(e,n,t){let r=cn(n,e),i=AI(t),o=e[Cn].rendererFactory,s=Op(e,kp(e,i,null,R_(t),r,n,null,o.createRenderer(r,t),null,null,null));return e[n.index]=s}function R_(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function k_(e,n,t,r){if(t===0)return-1;let i=n.length;for(let o=0;o<t;o++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Op(e,n){return e[Do]?e[mh][qt]=n:e[Do]=n,e[mh]=n,n}function M(e=1){O_(ft(),J(),In()+e,!1)}function O_(e,n,t,r){if(!r)if((n[q]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Ol(n,o,t)}else{let o=e.preOrderHooks;o!==null&&Nl(n,o,0,t)}Cr(t)}var du=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(du||{});function np(e,n,t,r){let i=z(null);try{let[o,s,a]=e.inputs[t],c=null;(s&du.SignalBased)!==0&&(c=n[o][vt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(n,r)),e.setInput!==null?e.setInput(n,c,r,t,o):Wb(n,c,o,r)}finally{z(i)}}var Xn=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(Xn||{}),kI;function Np(e,n){return kI(e,n)}var _i=new Set,Pp=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Pp||{}),sa=new U(""),Cb=new Set;function Sr(e){Cb.has(e)||(Cb.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var N_=!1,rp=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,jy()&&(this.destroyRef=k(ln,{optional:!0})??void 0,this.pendingTasks=k(Qn,{optional:!0})??void 0)}emit(n){let t=z(null);try{super.next(n)}finally{z(t)}}subscribe(n,t,r){let i=n,o=t||(()=>null),s=r;if(n&&typeof n=="object"){let c=n;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return n instanceof Pe&&n.add(a),a}wrapInTimeout(n){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},pt=rp;function P_(e){let n,t;function r(){e=Ks;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Db(e){return queueMicrotask(()=>e()),()=>{e=Ks}}var Fp="isAngularZone",Wl=Fp+"_ID",OI=0,Ve=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(n){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=N_}=n;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,FI(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fp)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new L(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,n,NI,Ks,Ks);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}},NI={};function Lp(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function PI(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){P_(()=>{e.callbackScheduled=!1,ip(e),e.isCheckStableRunning=!0,Lp(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),ip(e)}function FI(e){let n=()=>{PI(e)},t=OI++;e._inner=e._inner.fork({name:"angular",properties:{[Fp]:!0,[Wl]:t,[Wl+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(LI(c))return r.invokeTask(o,s,a,c);try{return Sb(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),xb(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Sb(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!jI(c)&&n(),xb(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,ip(e),Lp(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function ip(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Sb(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xb(e){e._nesting--,Lp(e)}var ql=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}};function LI(e){return F_(e,"__ignore_ng_zone__")}function jI(e){return F_(e,"__scheduler_tick__")}function F_(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}var L_=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:e,providedIn:"root",factory:()=>new e})}return e})();var j_=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function B_(e,n,t){let r=e.get(j_);if(Array.isArray(n))for(let i of n)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(n),t?.detachedLeaveAnimationFns?.push(n);r.scheduler&&r.scheduler(e)}function BI(e,n){let t=e.get(j_);if(n.detachedLeaveAnimationFns){for(let r of n.detachedLeaveAnimationFns)t.queue.delete(r);n.detachedLeaveAnimationFns=void 0}}function $I(e,n){for(let[t,r]of n)B_(e,r.animateFns)}function Ib(e,n,t,r){let i=e?.[pi]?.enter;n!==null&&i&&i.has(t.index)&&$I(r,i)}function Io(e,n,t,r,i,o,s,a){if(i!=null){let c,l=!1;an(i)?c=i:Sn(i)&&(l=!0,i=i[sn]);let u=Kt(i);e===0&&r!==null?(Ib(a,r,o,t),s==null?C_(n,r,u):zl(n,r,u,s||null,!0)):e===1&&r!==null?(Ib(a,r,o,t),zl(n,r,u,s||null,!0)):e===2?Tb(a,o,t,d=>{D_(n,u,l,d)}):e===3&&Tb(a,o,t,()=>{n.destroyNode(u)}),c!=null&&XI(n,e,t,c,o,r,s)}}function VI(e,n){$_(e,n),n[sn]=null,n[Gt]=null}function UI(e,n,t,r,i,o){r[sn]=i,r[Gt]=n,hu(e,r,t,1,i,o)}function $_(e,n){n[Cn].changeDetectionScheduler?.notify(9),hu(e,n,n[Ce],2,null,null)}function HI(e){let n=e[Do];if(!n)return qh(e[V],e);for(;n;){let t=null;if(Sn(n))t=n[Do];else{let r=n[Me];r&&(t=r)}if(!t){for(;n&&!n[qt]&&n!==e;)Sn(n)&&qh(n[V],n),n=n[$e];n===null&&(n=e),Sn(n)&&qh(n[V],n),t=n&&n[qt]}n=t}}function jp(e,n){let t=e[gi],r=t.indexOf(n);t.splice(r,1)}function fu(e,n){if(vi(n))return;let t=n[Ce];t.destroyNode&&hu(e,n,t,3,null,null),HI(n)}function qh(e,n){if(vi(n))return;let t=z(null);try{n[q]&=-129,n[q]|=256,n[Ft]&&Is(n[Ft]),qI(e,n),WI(e,n),n[V].type===1&&n[Ce].destroy();let r=n[_r];if(r!==null&&an(n[$e])){r!==n[$e]&&jp(r,n);let i=n[Dn];i!==null&&i.detachView(e)}Xh(n)}finally{z(t)}}function Tb(e,n,t,r){let i=e?.[pi];if(i==null||i.leave==null||!i.leave.has(n.index))return r(!1);e&&_i.add(e),B_(t,()=>{if(i.leave&&i.leave.has(n.index)){let s=i.leave.get(n.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),zI(e,r)}else e&&_i.delete(e),r(!1)},i)}function zI(e,n){let t=e[pi]?.running;if(t){t.then(()=>{e[pi].running=void 0,_i.delete(e),n(!0)});return}n(!1)}function WI(e,n){let t=e.cleanup,r=n[Co];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(n[Co]=null);let i=n[Gn];if(i!==null){n[Gn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=n[Us];if(o!==null){n[Us]=null;for(let s of o)s.destroy()}}function qI(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=n[t[r]];if(!(i instanceof Qs)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];me(4,a,c);try{c.call(a)}finally{me(5,a,c)}}else{me(4,i,o);try{o.call(i)}finally{me(5,i,o)}}}}}function GI(e,n,t){return KI(e,n.parent,t)}function KI(e,n,t){let r=n;for(;r!==null&&r.type&168;)n=r,r=n.parent;if(r===null)return t[sn];if(Er(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Jn.None||i===Jn.Emulated)return null}return cn(r,t)}function YI(e,n,t){return QI(e,n,t)}function ZI(e,n,t){return e.type&40?cn(e,t):null}var QI=ZI,Mb;function Bp(e,n,t,r){let i=GI(e,r,n),o=n[Ce],s=r.parent||n[Gt],a=YI(s,r,n);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)wb(o,i,t[c],a,!1);else wb(o,i,t,a,!1);Mb!==void 0&&Mb(o,r,n,t,i)}function Ys(e,n){if(n!==null){let t=n.type;if(t&3)return cn(n,e);if(t&4)return op(-1,e[n.index]);if(t&8){let r=n.child;if(r!==null)return Ys(e,r);{let i=e[n.index];return an(i)?op(-1,i):Kt(i)}}else{if(t&128)return Ys(e,n.next);if(t&32)return Np(n,e)()||Kt(e[n.index]);{let r=V_(e,n);if(r!==null){if(Array.isArray(r))return r[0];let i=yr(e[Pt]);return Ys(i,r)}else return Ys(e,n.next)}}}return null}function V_(e,n){if(n!==null){let r=e[Pt][Gt],i=n.projection;return r.projection[i]}return null}function op(e,n){let t=Me+e+1;if(t<n.length){let r=n[t],i=r[V].firstChild;if(i!==null)return Ys(r,i)}return n[wr]}function $p(e,n,t,r,i,o,s){for(;t!=null;){let a=r[Zn];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&n===0&&(c&&Mo(Kt(c),r),t.flags|=2),!Ip(t))if(l&8)$p(e,n,t.child,r,i,o,!1),Io(n,e,a,i,c,t,o,r);else if(l&32){let u=Np(t,r),d;for(;d=u();)Io(n,e,a,i,d,t,o,r);Io(n,e,a,i,c,t,o,r)}else l&16?JI(e,n,r,t,i,o):Io(n,e,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function hu(e,n,t,r,i,o){$p(t,r,e.firstChild,n,i,o,!1)}function JI(e,n,t,r,i,o){let s=t[Pt],c=s[Gt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Io(n,e,t[Zn],i,u,r,o,t)}else{let l=c,u=s[$e];a_(r)&&(l.flags|=128),$p(e,n,l,u,i,o,!0)}}function XI(e,n,t,r,i,o,s){let a=r[wr],c=Kt(r);a!==c&&Io(n,e,t,o,a,i,s);for(let l=Me;l<r.length;l++){let u=r[l];hu(u[V],u,e,n,o,a)}}function eT(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Xn.DashCase;i==null?e.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Xn.Important),e.setStyle(t,r,i,o))}}function U_(e,n,t,r,i){let o=In(),s=r&2;try{Cr(-1),s&&n.length>Ze&&O_(e,n,Ze,!1),me(s?2:0,i,t),t(r,i)}finally{Cr(o),me(s?3:1,i,t)}}function H_(e,n,t){aT(e,n,t),(t.flags&64)===64&&cT(e,n,t)}function Vp(e,n,t=cn){let r=n.localNames;if(r!==null){let i=n.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(n,e):e[s];e[i++]=a}}}function tT(e,n,t,r){let o=r.get(m_,g_)||t===Jn.ShadowDom,s=e.selectRootElement(n,o);return nT(s),s}function nT(e){rT(e)}var rT=()=>null;function iT(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function oT(e,n,t,r,i,o){let s=n[V];if(Up(e,s,n,t,r)){Er(e)&&sT(n,e.index);return}e.type&3&&(t=iT(t)),z_(e,n,t,r,i,o)}function z_(e,n,t,r,i,o){if(e.type&3){let s=cn(e,n);r=o!=null?o(r,e.value||"",t):r,i.setProperty(s,t,r)}else e.type&12}function sT(e,n){let t=Yt(n,e);t[q]&16||(t[q]|=64)}function aT(e,n,t){let r=t.directiveStart,i=t.directiveEnd;Er(t)&&RI(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||e_(t,n);let o=t.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Vl(n,e,s,t);if(Mo(c,n),o!==null&&hT(n,s-r,c,a,t,o),mi(a)){let l=Yt(t.index,n);l[Ne]=Vl(n,e,s,t)}}}function cT(e,n,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=rb();try{Cr(o);for(let a=r;a<i;a++){let c=e.data[a],l=n[a];El(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&lT(c,l)}}finally{Cr(-1),El(s)}}function lT(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function uT(e,n){let t=e.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];CI(n,o.selectors,!1)&&(r??=[],mi(o)?r.unshift(o):r.push(o))}return r}function dT(e,n,t,r,i,o){let s=cn(e,n);fT(n[Ce],s,o,e.value,t,r,i)}function fT(e,n,t,r,i,o,s){if(o==null)e.removeAttribute(n,i,t);else{let a=s==null?En(o):s(o,r||"",i);e.setAttribute(n,i,a,t)}}function hT(e,n,t,r,i,o){let s=o[n];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];np(r,t,c,l)}}function W_(e,n,t,r,i){let o=Ze+t,s=n[V],a=i(s,n,e,r,t);n[o]=a,xo(e,!0);let c=e.type===2;return c?(S_(n[Ce],a,e),(Gy()===0||yl(e))&&Mo(a,n),Ky()):Mo(a,n),Ml()&&(!c||!Ip(e))&&Bp(s,n,a,e),e}function q_(e){let n=e;return Rh()?Jy():(n=n.parent,xo(n,!1)),n}function pT(e,n){let t=e[Zn];if(!t)return;let r;try{r=t.get(Lt,null)}catch{r=null}r?.(n)}function Up(e,n,t,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=n.data[l];np(d,t[l],u,i),a=!0}if(o)for(let c of o){let l=t[c],u=n.data[c];np(u,l,r,i),a=!0}return a}function gT(e,n){let t=Yt(n,e),r=t[V];mT(r,t);let i=t[sn];i!==null&&t[Eo]===null&&(t[Eo]=v_(i,t[Zn])),me(18),Hp(r,t,t[Ne]),me(19,t[Ne])}function mT(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function Hp(e,n,t){Dl(n);try{let r=e.viewQuery;r!==null&&tp(1,r,t);let i=e.template;i!==null&&U_(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[Dn]?.finishViewCreation(e),e.staticContentQueries&&y_(e,n),e.staticViewQueries&&tp(2,e.viewQuery,t);let o=e.components;o!==null&&vT(n,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[q]&=-5,Sl()}}function vT(e,n){for(let t=0;t<n.length;t++)gT(e,n[t])}function pu(e,n,t,r){let i=z(null);try{let o=n.tView,a=e[q]&4096?4096:16,c=kp(e,o,t,a,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[n.index];c[_r]=l;let u=e[Dn];return u!==null&&(c[Dn]=u.createEmbeddedView(o)),Hp(o,c,t),c}finally{z(i)}}function Js(e,n){return!n||n.firstChild===null||a_(e)}function Xs(e,n,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&r.push(Kt(o)),an(o)&&G_(o,r);let s=t.type;if(s&8)Xs(e,n,t.child,r);else if(s&32){let a=Np(t,n),c;for(;c=a();)r.push(c)}else if(s&16){let a=V_(n,t);if(Array.isArray(a))r.push(...a);else{let c=yr(n[Pt]);Xs(c[V],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function G_(e,n){for(let t=Me;t<e.length;t++){let r=e[t],i=r[V].firstChild;i!==null&&Xs(r[V],r,i,n)}e[wr]!==e[sn]&&n.push(e[wr])}function K_(e){if(e[vl]!==null){for(let n of e[vl])n.impl.addSequence(n);e[vl].length=0}}var Y_=[];function yT(e){return e[Ft]??bT(e)}function bT(e){let n=Y_.pop()??Object.create(wT);return n.lView=e,n}function _T(e){e.lView[Ft]!==e&&(e.lView=null,Y_.push(e))}var wT=ue(O({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{qs(e.lView)},consumerOnSignalRead(){this.lView[Ft]=this}});function ET(e){let n=e[Ft]??Object.create(CT);return n.lView=e,n}var CT=ue(O({},no),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=yr(e.lView);for(;n&&!Z_(n[V]);)n=yr(n);n&&Ch(n)},consumerOnSignalRead(){this.lView[Ft]=this}});function Z_(e){return e.type!==2}function Q_(e){if(e[Us]===null)return;let n=!0;for(;n;){let t=!1;for(let r of e[Us])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(e[q]&8192)}}var DT=100;function J_(e,n=0){let r=e[Cn].rendererFactory,i=!1;i||r.begin?.();try{ST(e,n)}finally{i||r.end?.()}}function ST(e,n){let t=kh();try{Oh(!0),sp(e,n);let r=0;for(;Ws(e);){if(r===DT)throw new L(103,!1);r++,sp(e,1)}}finally{Oh(t)}}function xT(e,n,t,r){if(vi(n))return;let i=n[q],o=!1,s=!1;Dl(n);let a=!0,c=null,l=null;o||(Z_(e)?(l=yT(n),c=io(l)):Nc()===null?(a=!1,l=ET(n),c=io(l)):n[Ft]&&(Is(n[Ft]),n[Ft]=null));try{Eh(n),eb(e.bindingStartIndex),t!==null&&U_(e,n,t,2,r);let u=(i&3)===3;if(!o)if(u){let f=e.preOrderCheckHooks;f!==null&&Ol(n,f,null)}else{let f=e.preOrderHooks;f!==null&&Nl(n,f,0,null),zh(n,0)}if(s||IT(n),Q_(n),X_(n,0),e.contentQueries!==null&&y_(e,n),!o)if(u){let f=e.contentCheckHooks;f!==null&&Ol(n,f)}else{let f=e.contentHooks;f!==null&&Nl(n,f,1),zh(n,1)}MT(e,n);let d=e.components;d!==null&&t0(n,d,0);let h=e.viewQuery;if(h!==null&&tp(2,h,r),!o)if(u){let f=e.viewCheckHooks;f!==null&&Ol(n,f)}else{let f=e.viewHooks;f!==null&&Nl(n,f,2),zh(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[ml]){for(let f of n[ml])f();n[ml]=null}o||(K_(n),n[q]&=-73)}catch(u){throw o||qs(n),u}finally{l!==null&&(Ss(l,c),a&&_T(l)),Sl()}}function X_(e,n){for(let t=l_(e);t!==null;t=u_(t))for(let r=Me;r<t.length;r++){let i=t[r];e0(i,n)}}function IT(e){for(let n=l_(e);n!==null;n=u_(n)){if(!(n[q]&2))continue;let t=n[gi];for(let r=0;r<t.length;r++){let i=t[r];Ch(i)}}}function TT(e,n,t){me(18);let r=Yt(n,e);e0(r,t),me(19,r[Ne])}function e0(e,n){bl(e)&&sp(e,n)}function sp(e,n){let r=e[V],i=e[q],o=e[Ft],s=!!(n===0&&i&16);if(s||=!!(i&64&&n===0),s||=!!(i&1024),s||=!!(o?.dirty&&xs(o)),s||=!1,o&&(o.dirty=!1),e[q]&=-9217,s)xT(r,e,r.template,e[Ne]);else if(i&8192){let a=z(null);try{Q_(e),X_(e,1);let c=r.components;c!==null&&t0(e,c,1),K_(e)}finally{z(a)}}}function t0(e,n,t){for(let r=0;r<n.length;r++)TT(e,n[r],t)}function MT(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Cr(~i);else{let o=i,s=t[++r],a=t[++r];nb(s,o);let c=n[o];me(24,c),a(2,c),me(25,c)}}}finally{Cr(-1)}}function zp(e,n){let t=kh()?64:1088;for(e[Cn].changeDetectionScheduler?.notify(n);e;){e[q]|=t;let r=yr(e);if(So(e)&&!r)return e;e=r}return null}function n0(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function r0(e,n){let t=Me+n;if(t<e.length)return e[t]}function gu(e,n,t,r=!0){let i=n[V];if(AT(i,n,e,t),r){let s=op(t,e),a=n[Ce],c=a.parentNode(e[wr]);c!==null&&UI(i,e[Gt],a,n,c,s)}let o=n[Eo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function i0(e,n){let t=ea(e,n);return t!==void 0&&fu(t[V],t),t}function ea(e,n){if(e.length<=Me)return;let t=Me+n,r=e[t];if(r){let i=r[_r];i!==null&&i!==e&&jp(i,r),n>0&&(e[t-1][qt]=r[qt]);let o=js(e,Me+n);VI(r[V],r);let s=o[Dn];s!==null&&s.detachView(o[V]),r[$e]=null,r[qt]=null,r[q]&=-129}return r}function AT(e,n,t,r){let i=Me+r,o=t.length;r>0&&(t[i-1][qt]=n),r<o-Me?(n[qt]=t[i],lh(t,Me+r,n)):(t.push(n),n[qt]=null),n[$e]=t;let s=n[_r];s!==null&&t!==s&&o0(s,n);let a=n[Dn];a!==null&&a.insertView(e),_l(n),n[q]|=128}function o0(e,n){let t=e[gi],r=n[$e];if(Sn(r))e[q]|=2;else{let i=r[$e][Pt];n[Pt]!==i&&(e[q]|=2)}t===null?e[gi]=[n]:t.push(n)}var Dr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let n=this._lView,t=n[V];return Xs(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t}get context(){return this._lView[Ne]}set context(n){this._lView[Ne]=n}get destroyed(){return vi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[$e];if(an(n)){let t=n[Hs],r=t?t.indexOf(this):-1;r>-1&&(ea(n,r),js(t,r))}this._attachedToViewContainer=!1}fu(this._lView[V],this._lView)}onDestroy(n){Dh(this._lView,n)}markForCheck(){zp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[q]&=-129}reattach(){_l(this._lView),this._lView[q]|=128}detectChanges(){this._lView[q]|=1024,J_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=So(this._lView),t=this._lView[_r];t!==null&&!n&&jp(t,this._lView),$_(this._lView[V],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=n;let t=So(this._lView),r=this._lView[_r];r!==null&&!t&&o0(r,this._lView),_l(this._lView)}};var Ao=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=RT;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=pu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Dr(o)}}return e})();function RT(){return Wp(ht(),J())}function Wp(e,n){return e.type&4?new Ao(n,e,No(e,n)):null}function mu(e,n,t,r,i){let o=e.data[n];if(o===null)o=kT(e,n,t,r,i),tb()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Qy();o.injectorIndex=s===null?-1:s.injectorIndex}return xo(o,!0),o}function kT(e,n,t,r,i){let o=Ah(),s=Rh(),a=s?o:o&&o.parent,c=e.data[n]=NT(e,a,t,n,r,i);return OT(e,c,o,s),c}function OT(e,n,t,r){e.firstChild===null&&(e.firstChild=n),t!==null&&(r?t.child==null&&n.parent!==null&&(t.child=n):t.next===null&&(t.next=n,n.prev=t))}function NT(e,n,t,r,i,o){let s=n?n.injectorIndex:-1,a=0;return Zy()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var v3=new RegExp(`^(\\d+)*(${oI}|${iI})*(.*)`);function PT(e){let n=e[yh]??[],r=e[$e][Ce],i=[];for(let o of n)o.data[p_]!==void 0?i.push(o):FT(o,r);e[yh]=i}function FT(e,n){let t=0,r=e.firstChild;if(r){let i=e.data[h_];for(;t<i;){let o=r.nextSibling;D_(n,r,!1),r=o,t++}}}var LT=()=>null,jT=()=>null;function ap(e,n){return LT(e,n)}function s0(e,n,t){return jT(e,n,t)}var a0=class{},vu=class{},cp=class{resolveComponentFactory(n){throw new L(917,!1)}},aa=class{static NULL=new cp},wi=class{},ca=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>BT()}return e})();function BT(){let e=J(),n=ht(),t=Yt(n.index,e);return(Sn(t)?t:e)[Ce]}var c0=(()=>{class e{static \u0275prov=F({token:e,providedIn:"root",factory:()=>null})}return e})();var Fl={},lp=class{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){let i=this.injector.get(n,Fl,r);return i!==Fl||t===Fl?i:this.parentInjector.get(n,t,r)}};function Gl(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,o=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")o=a;else if(o==1)i=Xf(i,a);else if(o==2){let c=a,l=n[++s];r=Xf(r,c+": "+l+";")}}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function gt(e,n=0){let t=J();if(t===null)return Y(e,n);let r=ht();return i_(r,t,St(e),n)}function $T(e,n,t,r,i){let o=r===null?null:{"":-1},s=i(e,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}HT(e,n,t,a,o,c,l)}o!==null&&r!==null&&VT(t,r,o)}function VT(e,n,t){let r=e.localNames=[];for(let i=0;i<n.length;i+=2){let o=t[n[i+1]];if(o==null)throw new L(-301,!1);r.push(n[i],o)}}function UT(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function HT(e,n,t,r,i,o,s){let a=r.length,c=!1;for(let h=0;h<a;h++){let f=r[h];!c&&mi(f)&&(c=!0,UT(e,t,h)),Wx(e_(t,n),e,f.type)}YT(t,e.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=k_(e,n,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=iu(t.mergedAttrs,f.hostAttrs),WT(e,t,n,d,f),KT(d,f,i),s!==null&&s.has(f)){let[g,m]=s.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,m+t.directiveStart])}else(o===null||!o.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}zT(e,t,o)}function zT(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){let i=e.data[r];if(t===null||!t.has(i))Ab(0,n,i,r),Ab(1,n,i,r),kb(n,r,!1);else{let o=t.get(i);Rb(0,n,o,r),Rb(1,n,o,r),kb(n,r,!0)}}}function Ab(e,n,t,r){let i=e===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=n.inputs??={}:s=n.outputs??={},s[o]??=[],s[o].push(r),l0(n,o)}}function Rb(e,n,t,r){let i=e===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),l0(n,s)}}function l0(e,n){n==="class"?e.flags|=8:n==="style"&&(e.flags|=16)}function kb(e,n,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!t&&i===null||t&&o===null||Ap(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===n){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===n){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function WT(e,n,t,r,i){e.data[r]=i;let o=i.factory||(i.factory=oi(i.type,!0)),s=new Qs(o,mi(i),gt,null);e.blueprint[r]=s,t[r]=s,qT(e,n,r,k_(e,t,i.hostVars,bt),i)}function qT(e,n,t,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~n.index;GT(s)!=a&&s.push(a),s.push(t,r,o)}}function GT(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function KT(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;mi(n)&&(t[""]=e)}}function YT(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function u0(e,n,t,r,i,o,s,a){let c=n[V],l=c.consts,u=xn(l,s),d=mu(c,e,t,r,u);return o&&$T(c,n,d,xn(l,a),i),d.mergedAttrs=iu(d.mergedAttrs,d.attrs),d.attrs!==null&&Gl(d,d.attrs,!1),d.mergedAttrs!==null&&Gl(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function d0(e,n){Px(e,n),bh(n)&&e.queries.elementEnd(n)}function ZT(e,n,t,r,i,o){let s=n.consts,a=xn(s,i),c=mu(n,e,t,r,a);if(c.mergedAttrs=iu(c.mergedAttrs,c.attrs),o!=null){let l=xn(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Gl(c,c.attrs,!1),c.mergedAttrs!==null&&Gl(c,c.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,c),c}function f0(e,n,t){return e[n]=t}function QT(e,n){return e[n]}function dn(e,n,t){if(t===bt)return!1;let r=e[n];return Object.is(r,t)?!1:(e[n]=t,!0)}function h0(e,n,t,r){let i=dn(e,n,t);return dn(e,n+1,r)||i}function JT(e,n,t,r,i){let o=h0(e,n,t,r);return dn(e,n+2,i)||o}function Ll(e,n,t){return function r(i){let o=Er(e)?Yt(e.index,n):n;zp(o,5);let s=n[Ne],a=Ob(n,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=Ob(n,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Ob(e,n,t,r){let i=z(null);try{return me(6,n,t),t(r)!==!1}catch(o){return pT(e,o),!1}finally{me(7,n,t),z(i)}}function p0(e,n,t,r,i,o,s,a){let c=yl(e),l=!1,u=null;if(!r&&c&&(u=eM(n,t,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=cn(e,t),h=r?r(d):d;aI(t,h,o,a);let f=i.listen(h,o,a);if(!XT(o)){let p=r?g=>r(Kt(g[e.index])):e.index;g0(p,n,t,o,a,f,!1)}}return l}function XT(e){return e.startsWith("animation")||e.startsWith("transition")}function eM(e,n,t,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=n[Co],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function g0(e,n,t,r,i,o,s){let a=n.firstCreatePass?xh(n):null,c=Sh(t),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function Nb(e,n,t,r,i,o){let s=n[t],a=n[V],l=a.data[t].outputs[r],d=s[l].subscribe(o);g0(e.index,a,n,i,o,d,!0)}var up=Symbol("BINDING");var Kl=class extends aa{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=br(n);return new Ro(t,this.ngModule)}};function tM(e){return Object.keys(e).map(n=>{let[t,r,i]=e[n],o={propName:t,templateName:n,isSignal:(r&du.SignalBased)!==0};return i&&(o.transform=i),o})}function nM(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}function rM(e,n,t){let r=n instanceof Ye?n:n?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new lp(t,r):t}function iM(e){let n=e.get(wi,null);if(n===null)throw new L(407,!1);let t=e.get(c0,null),r=e.get(ai,null);return{rendererFactory:n,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function oM(e,n){let t=m0(e);return E_(n,t,t==="svg"?_h:t==="math"?$y:null)}function m0(e){return(e.selectors[0][0]||"div").toLowerCase()}var Ro=class extends vu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=nM(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=II(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,i,o,s){me(22);let a=z(null);try{let c=this.componentDef,l=sM(r,c,s,o),u=rM(c,i||this.ngModule,n),d=iM(u),h=d.rendererFactory.createRenderer(null,c),f=r?tT(h,r,c.encapsulation,u):oM(c,h),p=s?.some(Pb)||o?.some(y=>typeof y!="function"&&y.bindings.some(Pb)),g=kp(null,l,null,512|R_(c),null,null,d,h,u,null,v_(f,u,!0));g[Ze]=f,Dl(g);let m=null;try{let y=u0(Ze,g,2,"#host",()=>l.directiveRegistry,!0,0);S_(h,f,y),Mo(f,g),H_(l,g,y),b_(l,y,g),d0(l,y),t!==void 0&&cM(y,this.ngContentSelectors,t),m=Yt(y.index,g),g[Ne]=m[Ne],Hp(l,g,null)}catch(y){throw m!==null&&Xh(m),Xh(g),y}finally{me(23),Sl()}return new Yl(this.componentType,g,!!p)}finally{z(a)}}};function sM(e,n,t,r){let i=e?["ng-version","20.3.16"]:TI(n.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[up].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[up].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[n];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=hh(d);c.push(h)}return Rp(0,null,aM(o,s),1,a,c,null,null,null,[i],null)}function aM(e,n){return!e&&!n?null:t=>{if(t&1&&e)for(let r of e)r.create();if(t&2&&n)for(let r of n)r.update()}}function Pb(e){let n=e[up].kind;return n==="input"||n==="twoWay"}var Yl=class extends a0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=zs(t[V],Ze),this.location=No(this._tNode,t),this.instance=Yt(this._tNode.index,t)[Ne],this.hostView=this.changeDetectorRef=new Dr(t,void 0),this.componentType=n}setInput(n,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let i=this._rootLView,o=Up(r,i[V],i,n,t);this.previousInputValues.set(n,t);let s=Yt(r.index,i);zp(s,1)}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function cM(e,n,t){let r=e.projection=[];for(let i=0;i<n.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Di=(()=>{class e{static __NG_ELEMENT_ID__=lM}return e})();function lM(){let e=ht();return y0(e,J())}var uM=Di,v0=class extends uM{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return No(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){let n=Dp(this._hostTNode,this._hostLView);if(Qb(n)){let t=$l(n,this._hostLView),r=Bl(n),i=t[V].data[r+8];return new bi(i,t)}else return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=Fb(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-Me}createEmbeddedView(n,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ap(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Js(this._hostTNode,s)),a}createComponent(n,t,r,i,o,s,a){let c=n&&!Ax(n),l;if(c)l=t;else{let m=t||{};l=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef,s=m.directives,a=m.bindings}let u=c?n:new Ro(br(n)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let y=(c?d:this.parentInjector).get(Ye,null);y&&(o=y)}let h=br(u.componentType??{}),f=ap(this._lContainer,h?.id??null),p=f?.firstChild??null,g=u.create(d,i,p,o,s,a);return this.insertImpl(g.hostView,l,Js(this._hostTNode,f)),g}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){let i=n._lView;if(Hy(i)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let c=i[$e],l=new v0(c,c[Gt],c[$e]);l.detach(l.indexOf(n))}}let o=this._adjustIndex(t),s=this._lContainer;return gu(s,i,o,r),n.attachToViewContainerRef(),lh(Gh(s),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=Fb(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),r=ea(this._lContainer,t);r&&(js(Gh(this._lContainer),t),fu(r[V],r))}detach(n){let t=this._adjustIndex(n,-1),r=ea(this._lContainer,t);return r&&js(Gh(this._lContainer),t)!=null?new Dr(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function Fb(e){return e[Hs]}function Gh(e){return e[Hs]||(e[Hs]=[])}function y0(e,n){let t,r=n[e.index];return an(r)?t=r:(t=n0(r,n,null,e),n[e.index]=t,Op(n,t)),fM(t,n,e,r),new v0(t,e,n)}function dM(e,n){let t=e[Ce],r=t.createComment(""),i=cn(n,e),o=t.parentNode(i);return zl(t,o,r,t.nextSibling(i),!1),r}var fM=gM,hM=()=>!1;function pM(e,n,t){return hM(e,n,t)}function gM(e,n,t,r){if(e[wr])return;let i;t.type&8?i=Kt(r):i=dM(n,t),e[wr]=i}var dp=class e{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},fp=class e{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let r=n.contentQueries!==null?n.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new e(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)qp(n,t).matches!==null&&this.queries[t].setDirty()}},Zl=class{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,typeof n=="string"?this.predicate=CM(n):this.predicate=n}},hp=class e{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(n,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},pp=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=n.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(n,t,mM(t,o)),this.matchTNodeWithReadOption(n,t,Pl(t,n,o,!1,!1))}else r===Ao?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Pl(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===er||i===Di||i===Ao&&t.type&4)this.addMatch(t.index,-2);else{let o=Pl(t,n,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function mM(e,n){let t=e.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1]}return null}function vM(e,n){return e.type&11?No(e,n):e.type&4?Wp(e,n):null}function yM(e,n,t,r){return t===-1?vM(n,e):t===-2?bM(e,n,r):Vl(e,e[V],t,n)}function bM(e,n,t){if(t===er)return No(n,e);if(t===Ao)return Wp(n,e);if(t===Di)return y0(n,e)}function b0(e,n,t,r){let i=n[Dn].queries[r];if(i.matches===null){let o=e.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(yM(n,u,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function gp(e,n,t,r){let i=e.queries.getByIndex(t),o=i.matches;if(o!==null){let s=b0(e,n,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=n[-c];for(let d=Me;d<u.length;d++){let h=u[d];h[_r]===h[$e]&&gp(h[V],h,l,r)}if(u[gi]!==null){let d=u[gi];for(let h=0;h<d.length;h++){let f=d[h];gp(f[V],f,l,r)}}}}}return r}function _M(e,n){return e[Dn].queries[n].queryList}function _0(e,n,t){let r=new Ul((t&4)===4);return qy(e,n,r,r.destroy),(n[Dn]??=new fp).queries.push(new dp(r))-1}function wM(e,n,t){let r=ft();return r.firstCreatePass&&(w0(r,new Zl(e,n,t),-1),(n&2)===2&&(r.staticViewQueries=!0)),_0(r,J(),n)}function EM(e,n,t,r){let i=ft();if(i.firstCreatePass){let o=ht();w0(i,new Zl(n,t,r),o.index),DM(i,e),(t&2)===2&&(i.staticContentQueries=!0)}return _0(i,J(),t)}function CM(e){return e.split(",").map(n=>n.trim())}function w0(e,n,t){e.queries===null&&(e.queries=new hp),e.queries.track(new pp(n,t))}function DM(e,n){let t=e.contentQueries||(e.contentQueries=[]),r=t.length?t[t.length-1]:-1;n!==r&&t.push(e.queries.length-1,n)}function qp(e,n){return e.queries.getByIndex(n)}function SM(e,n){let t=e[V],r=qp(t,n);return r.crossesNgTemplate?gp(t,e,n,[]):b0(t,e,r,n)}var ko=class{},yu=class{};var Ql=class extends ko{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Kl(this);constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t;let o=fh(n);this._bootstrapComponents=M_(o.bootstrap),this._r3Injector=Bh(n,t,[{provide:ko,useValue:this},{provide:aa,useValue:this.componentFactoryResolver},...r],Kn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},Jl=class extends yu{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new Ql(this.moduleType,n,[])}};var ta=class extends ko{injector;componentFactoryResolver=new Kl(this);instance=null;constructor(n){super();let t=new si([...n.providers,{provide:ko,useValue:this},{provide:aa,useValue:this.componentFactoryResolver}],n.parent||$s(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function la(e,n,t=null){return new ta({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}var xM=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ph(!1,t.type),i=r.length>0?la([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:e,providedIn:"environment",factory:()=>new e(Y(Ye))})}return e})();function Ue(e){return ra(()=>{let n=E0(e),t=ue(O({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Sp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?i=>i.get(xM).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Jn.Emulated,styles:e.styles||Wt,_:null,schemas:e.schemas||null,tView:null,id:""});n.standalone&&Sr("NgStandalone"),C0(t);let r=e.dependencies;return t.directiveDefs=Lb(r,IM),t.pipeDefs=Lb(r,ky),t.id=AM(t),t})}function IM(e){return br(e)||hh(e)}function Po(e){return ra(()=>({type:e.type,bootstrap:e.bootstrap||Wt,declarations:e.declarations||Wt,imports:e.imports||Wt,exports:e.exports||Wt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function TM(e,n){if(e==null)return ui;let t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=du.None,c=null),t[o]=[r,a,c],n[o]=s}return t}function MM(e){if(e==null)return ui;let n={};for(let t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function Si(e){return ra(()=>{let n=E0(e);return C0(n),n})}function E0(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||ui,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Wt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:TM(e.inputs,n),outputs:MM(e.outputs),debugInfo:null}}function C0(e){e.features?.forEach(n=>n(e))}function Lb(e,n){return e?()=>{let t=typeof e=="function"?e():e,r=[];for(let i of t){let o=n(i);o!==null&&r.push(o)}return r}:null}function AM(e){let n=0,t=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,t,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function RM(e,n,t,r,i,o,s,a){if(t.firstCreatePass){e.mergedAttrs=iu(e.mergedAttrs,e.attrs);let u=e.tView=Rp(2,e,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,e),u.queries=t.queries.embeddedTView(e))}a&&(e.flags|=a),xo(e,!1);let c=kM(t,n,e,r);Ml()&&Bp(t,n,c,e),Mo(c,n);let l=n0(c,n,c,e);n[r+Ze]=l,Op(n,l),pM(l,e,n)}function Xl(e,n,t,r,i,o,s,a,c,l,u){let d=t+Ze,h;if(n.firstCreatePass){if(h=mu(n,d,4,s||null,a||null),l!=null){let f=xn(n.consts,l);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=n.data[d];return RM(h,e,n,t,r,i,o,c),l!=null&&Vp(e,h,u),h}var kM=OM;function OM(e,n,t,r){return Al(!0),n[Ce].createComment("")}var Gp=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Kp=new U("");function ua(e){return!!e&&typeof e.then=="function"}function D0(e){return!!e&&typeof e.subscribe=="function"}var S0=new U("");var Yp=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(S0,{optional:!0})??[];injector=k(on);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=yt(this.injector,i);if(ua(o))t.push(o);else if(D0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bu=new U("");function x0(){xf(()=>{let e="";throw new L(600,e)})}function I0(e){return e.isBoundToModule}var NM=10;var xi=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Lt);afterRenderManager=k(L_);zonelessEnabled=k(Gs);rootEffectScheduler=k(Hh);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Qn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ce(t=>!t))}constructor(){k(sa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(Ye);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=on.NULL){return this._injector.get(Ve).run(()=>{me(10);let s=t instanceof vu;if(!this._injector.get(Yp).done){let p="";throw new L(405,p)}let c;s?c=t:c=this._injector.get(aa).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=I0(c)?void 0:this._injector.get(ko),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(Kp,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Zs(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),me(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Pp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new L(101,!1);let t=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(t),this.afterTick.next(),me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<NM;)me(14),this.synchronizeOnce(),me(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ws(i))continue;let o=r&&!this.zonelessEnabled?0:1;J_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ws(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zs(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(bu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zs(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Zs(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function xr(e,n,t,r){let i=J(),o=yi();if(dn(i,o,n)){let s=ft(),a=xl();dT(a,i,e,n,t,r)}return xr}var D3=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var mp=class{destroy(n){}updateValue(n,t){}swap(n,t){let r=Math.min(n,t),i=Math.max(n,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(n,t){this.attach(t,this.detach(n))}};function Kh(e,n,t,r,i){return e===t&&Object.is(n,r)?1:Object.is(i(e,n),i(t,r))?-1:0}function PM(e,n,t){let r,i,o=0,s=e.length-1,a=void 0;if(Array.isArray(n)){let c=n.length-1;for(;o<=s&&o<=c;){let l=e.at(o),u=n[o],d=Kh(o,l,o,u,t);if(d!==0){d<0&&e.updateValue(o,u),o++;continue}let h=e.at(s),f=n[c],p=Kh(s,h,c,f,t);if(p!==0){p<0&&e.updateValue(s,f),s--,c--;continue}let g=t(o,l),m=t(s,h),y=t(o,u);if(Object.is(y,m)){let _=t(c,f);Object.is(_,g)?(e.swap(o,s),e.updateValue(s,f),c--,s--):e.move(s,o),e.updateValue(o,u),o++;continue}if(r??=new eu,i??=Bb(e,o,s,t),vp(e,r,o,y))e.updateValue(o,u),o++,s++;else if(i.has(y))r.set(g,e.detach(o)),s--;else{let _=e.create(o,n[o]);e.attach(o,_),o++,s++}}for(;o<=c;)jb(e,r,t,o,n[o]),o++}else if(n!=null){let c=n[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=e.at(o),d=l.value,h=Kh(o,u,o,d,t);if(h!==0)h<0&&e.updateValue(o,d),o++,l=c.next();else{r??=new eu,i??=Bb(e,o,s,t);let f=t(o,d);if(vp(e,r,o,f))e.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(f))e.attach(o,e.create(o,d)),o++,s++,l=c.next();else{let p=t(o,u);r.set(p,e.detach(o)),s--}}}for(;!l.done;)jb(e,r,t,e.length,l.value),l=c.next()}for(;o<=s;)e.destroy(e.detach(s--));r?.forEach(c=>{e.destroy(c)})}function vp(e,n,t,r){return n!==void 0&&n.has(r)?(e.attach(t,n.get(r)),n.delete(r),!0):!1}function jb(e,n,t,r,i){if(vp(e,n,r,t(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Bb(e,n,t,r){let i=new Set;for(let o=n;o<=t;o++)i.add(r(o,e.at(o)));return i}var eu=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let r=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,r]of this.kvMap)if(n(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),n(r,t)}}};function De(e,n,t,r,i,o,s,a){Sr("NgControlFlow");let c=J(),l=ft(),u=xn(l.consts,o);return Xl(c,l,e,n,t,r,i,u,256,s,a),Zp}function Zp(e,n,t,r,i,o,s,a){Sr("NgControlFlow");let c=J(),l=ft(),u=xn(l.consts,o);return Xl(c,l,e,n,t,r,i,u,512,s,a),Zp}function Se(e,n){Sr("NgControlFlow");let t=J(),r=yi(),i=t[r]!==bt?t[r]:-1,o=i!==-1?tu(t,Ze+i):void 0,s=0;if(dn(t,r,e)){let a=z(null);try{if(o!==void 0&&i0(o,s),e!==-1){let c=Ze+e,l=tu(t,c),u=wp(t[V],c),d=s0(l,u,t),h=pu(t,u,n,{dehydratedView:d});gu(l,h,s,Js(u,d))}}finally{z(a)}}else if(o!==void 0){let a=r0(o,s);a!==void 0&&(a[Ne]=n)}}var yp=class{lContainer;$implicit;$index;constructor(n,t,r){this.lContainer=n,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Me}};function Qp(e){return e}function Ii(e,n){return n}var bp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,t,r){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=r}};function it(e,n,t,r,i,o,s,a,c,l,u,d,h){Sr("NgControlFlow");let f=J(),p=ft(),g=c!==void 0,m=J(),y=a?s.bind(m[Pt][Ne]):s,_=new bp(g,y);m[Ze+e]=_,Xl(f,p,e+1,n,t,r,i,xn(p.consts,o),256),g&&Xl(f,p,e+2,c,l,u,d,xn(p.consts,h),512)}var _p=class extends mp{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,t,r){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Me}at(n){return this.getLView(n)[Ne].$implicit}attach(n,t){let r=t[Eo];this.needsIndexUpdate||=n!==this.length,gu(this.lContainer,t,n,Js(this.templateTNode,r)),FM(this.lContainer,n)}detach(n){return this.needsIndexUpdate||=n!==this.length-1,LM(this.lContainer,n),jM(this.lContainer,n)}create(n,t){let r=ap(this.lContainer,this.templateTNode.tView.ssrId),i=pu(this.hostLView,this.templateTNode,new yp(this.lContainer,t,n),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(n){fu(n[V],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[Ne].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Ne].$index=n}getLView(n){return BM(this.lContainer,n)}};function ot(e){let n=z(null),t=In();try{let r=J(),i=r[V],o=r[t],s=t+1,a=tu(r,s);if(o.liveCollection===void 0){let l=wp(i,s);o.liveCollection=new _p(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(PM(c,e,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=yi(),u=c.length===0;if(dn(r,l,u)){let d=t+2,h=tu(r,d);if(u){let f=wp(i,d),p=s0(h,f,r),g=pu(r,f,void 0,{dehydratedView:p});gu(h,g,0,Js(f,p))}else i.firstUpdatePass&&PT(h),i0(h,0)}}}finally{z(n)}}function tu(e,n){return e[n]}function FM(e,n){if(e.length<=Me)return;let t=Me+n,r=e[t],i=r?r[pi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Zn];BI(o,i),_i.delete(r),i.detachedLeaveAnimationFns=void 0}}function LM(e,n){if(e.length<=Me)return;let t=Me+n,r=e[t],i=r?r[pi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function jM(e,n){return ea(e,n)}function BM(e,n){return r0(e,n)}function wp(e,n){return zs(e,n)}function jt(e,n,t){let r=J(),i=yi();if(dn(r,i,n)){let o=ft(),s=xl();oT(s,r,e,n,r[Ce],t)}return jt}function $b(e,n,t,r,i){Up(n,e,t,i?"class":"style",r)}function T(e,n,t,r){let i=J(),o=i[V],s=e+Ze,a=o.firstCreatePass?u0(s,i,2,n,uT,Yy(),t,r):o.data[s];if(W_(a,i,e,n,T0),yl(a)){let c=i[V];H_(c,i,a),b_(c,a,i)}return r!=null&&Vp(i,a),T}function D(){let e=ft(),n=ht(),t=q_(n);return e.firstCreatePass&&d0(e,t),Th(t)&&Mh(),Ih(),t.classesWithoutHost!=null&&Lx(t)&&$b(e,t,J(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&jx(t)&&$b(e,t,J(),t.stylesWithoutHost,!1),D}function Ir(e,n,t,r){return T(e,n,t,r),D(),Ir}function A(e,n,t,r){let i=J(),o=i[V],s=e+Ze,a=o.firstCreatePass?ZT(s,o,2,n,t,r):o.data[s];return W_(a,i,e,n,T0),r!=null&&Vp(i,a),A}function I(){let e=ht(),n=q_(e);return Th(n)&&Mh(),Ih(),I}function Mn(e,n,t,r){return A(e,n,t,r),I(),Mn}var T0=(e,n,t,r,i)=>(Al(!0),E_(n[Ce],r,lb()));function fn(){return J()}function _u(e,n,t){let r=J(),i=yi();if(dn(r,i,n)){let o=ft(),s=xl();z_(s,r,e,n,r[Ce],t)}return _u}var da="en-US";var $M=da;function M0(e){typeof e=="string"&&($M=e.toLowerCase().replace(/_/g,"-"))}function xt(e,n,t){let r=J(),i=ft(),o=ht();return VM(i,r,r[Ce],o,e,n,t),xt}function Fo(e,n,t){let r=J(),i=ft(),o=ht();return(o.type&3||t)&&p0(o,i,r,t,r[Ce],e,n,Ll(o,r,n)),Fo}function VM(e,n,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Ll(r,n,o),p0(r,e,n,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=Ll(r,n,o),Nb(r,n,h,f,i,c)}if(l&&l.length)for(let d of l)c??=Ll(r,n,o),Nb(r,n,d,i,i,c)}}function ee(e=1){return cb(e)}function Jp(e,n,t,r){EM(e,n,t,r)}function Xp(e,n,t){wM(e,n,t)}function fa(e){let n=J(),t=ft(),r=Fh();Cl(r+1);let i=qp(t,r);if(e.dirty&&Uy(n)===((i.metadata.flags&2)===2)){if(i.matches===null)e.reset([]);else{let o=SM(n,r);e.reset(o,Jx),e.notifyOnChanges()}return!0}return!1}function ha(){return _M(J(),Fh())}function pa(e){let n=Xy();return Vy(n,Ze+e)}function kl(e,n){return e<<17|n<<2}function Ei(e){return e>>17&32767}function UM(e){return(e&2)==2}function HM(e,n){return e&131071|n<<17}function Ep(e){return e|2}function Oo(e){return(e&131068)>>2}function Yh(e,n){return e&-131069|n<<2}function zM(e){return(e&1)===1}function Cp(e){return e|1}function WM(e,n,t,r,i,o){let s=o?n.classBindings:n.styleBindings,a=Ei(s),c=Oo(s);e[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||wo(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let h=Ei(e[a+1]);e[r+1]=kl(h,a),h!==0&&(e[h+1]=Yh(e[h+1],r)),e[a+1]=HM(e[a+1],r)}else e[r+1]=kl(a,0),a!==0&&(e[a+1]=Yh(e[a+1],r)),a=r;else e[r+1]=kl(c,0),a===0?a=r:e[c+1]=Yh(e[c+1],r),c=r;l&&(e[r+1]=Ep(e[r+1])),Vb(e,u,r,!0),Vb(e,u,r,!1),qM(n,u,e,r,o),s=kl(a,c),o?n.classBindings=s:n.styleBindings=s}function qM(e,n,t,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&wo(o,n)>=0&&(t[r+1]=Cp(t[r+1]))}function Vb(e,n,t,r){let i=e[t+1],o=n===null,s=r?Ei(i):Oo(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];GM(c,n)&&(a=!0,e[s+1]=r?Cp(l):Ep(l)),s=r?Ei(l):Oo(l)}a&&(e[t+1]=r?Ep(i):Cp(i))}function GM(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?wo(e,n)>=0:!1}function hn(e,n){return KM(e,n,null,!0),hn}function KM(e,n,t,r){let i=J(),o=ft(),s=wl(2);if(o.firstUpdatePass&&ZM(o,e,s,r),n!==bt&&dn(i,s,n)){let a=o.data[In()];tA(o,a,i,i[Ce],e,i[s+1]=nA(n,t),r,s)}}function YM(e,n){return n>=e.expandoStartIndex}function ZM(e,n,t,r){let i=e.data;if(i[t+1]===null){let o=i[In()],s=YM(e,t);rA(o,r)&&n===null&&!s&&(n=!1),n=QM(i,o,n,r),WM(i,o,n,t,s,r)}}function QM(e,n,t,r){let i=ib(e),o=r?n.residualClasses:n.residualStyles;if(i===null)(r?n.classBindings:n.styleBindings)===0&&(t=Zh(null,e,n,t,r),t=na(t,n.attrs,r),o=null);else{let s=n.directiveStylingLast;if(s===-1||e[s]!==i)if(t=Zh(i,e,n,t,r),o===null){let c=JM(e,n,r);c!==void 0&&Array.isArray(c)&&(c=Zh(null,e,n,c[1],r),c=na(c,n.attrs,r),XM(e,n,r,c))}else o=eA(e,n,r)}return o!==void 0&&(r?n.residualClasses=o:n.residualStyles=o),t}function JM(e,n,t){let r=t?n.classBindings:n.styleBindings;if(Oo(r)!==0)return e[Ei(r)]}function XM(e,n,t,r){let i=t?n.classBindings:n.styleBindings;e[Ei(i)]=r}function eA(e,n,t){let r,i=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=na(r,s,t)}return na(r,n.attrs,t)}function Zh(e,n,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=n[a],r=na(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(t.directiveStylingLast=a),r}function na(e,n,t){let r=t?1:2,i=-1;if(n!==null)for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Ry(e,s,t?!0:n[++o]))}return e===void 0?null:e}function tA(e,n,t,r,i,o,s,a){if(!(n.type&3))return;let c=e.data,l=c[a+1],u=zM(l)?Ub(c,n,t,i,Oo(l),s):void 0;if(!nu(u)){nu(o)||UM(l)&&(o=Ub(c,null,t,i,a,s));let d=wh(In(),t);eT(r,s,d,i,o)}}function Ub(e,n,t,r,i,o){let s=n===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[i+1];h===bt&&(h=d?Wt:void 0);let f=d?gl(h,r):u===r?h:void 0;if(l&&!nu(f)&&(f=gl(c,r)),nu(f)&&(a=f,s))return a;let p=e[i+1];i=s?Ei(p):Oo(p)}if(n!==null){let c=o?n.residualClasses:n.residualStyles;c!=null&&(a=gl(c,r))}return a}function nu(e){return e!==void 0}function nA(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=Kn(lu(e)))),e}function rA(e,n){return(e.flags&(n?8:16))!==0}function b(e,n=""){let t=J(),r=ft(),i=e+Ze,o=r.firstCreatePass?mu(r,i,1,n,null):r.data[i],s=iA(r,t,o,n,e);t[i]=s,Ml()&&Bp(r,t,s,o),xo(o,!1)}var iA=(e,n,t,r,i)=>(Al(!0),dI(n[Ce],r));function oA(e,n,t,r=""){return dn(e,yi(),t)?n+En(t)+r:bt}function sA(e,n,t,r,i,o=""){let s=Ph(),a=h0(e,s,t,i);return wl(2),a?n+En(t)+r+En(i)+o:bt}function aA(e,n,t,r,i,o,s,a=""){let c=Ph(),l=JT(e,c,t,i,s);return wl(3),l?n+En(t)+r+En(i)+o+En(s)+a:bt}function ie(e){return le("",e),ie}function le(e,n,t){let r=J(),i=oA(r,e,n,t);return i!==bt&&eg(r,In(),i),le}function An(e,n,t,r,i){let o=J(),s=sA(o,e,n,t,r,i);return s!==bt&&eg(o,In(),s),An}function wu(e,n,t,r,i,o,s){let a=J(),c=aA(a,e,n,t,r,i,o,s);return c!==bt&&eg(a,In(),c),wu}function eg(e,n,t){let r=wh(n,e);fI(e[Ce],r,t)}function Eu(e,n,t){let r=Nh()+e,i=J();return i[r]===bt?f0(i,r,t?n.call(t):n()):QT(i,r)}function tg(e,n,t,r){return lA(J(),Nh(),e,n,t,r)}function cA(e,n){let t=e[n];return t===bt?void 0:t}function lA(e,n,t,r,i,o){let s=n+t;return dn(e,s,i)?f0(e,s+1,o?r.call(o,i):r(i)):cA(e,s+1)}var ru=class{ngModuleFactory;componentFactories;constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},ng=(()=>{class e{compileModuleSync(t){return new Jl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=fh(t),o=M_(i.declarations).reduce((s,a)=>{let c=br(a);return c&&s.push(new Ro(c)),s},[]);return new ru(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var uA=(()=>{class e{zone=k(Ve);changeDetectionScheduler=k(ai);applicationRef=k(xi);applicationErrorHandler=k(Lt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),A0=new U("",{factory:()=>!1});function rg({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Ve(ue(O({},og()),{scheduleInRootZone:t})),[{provide:Ve,useFactory:e},{provide:Yn,multi:!0,useFactory:()=>{let r=k(uA,{optional:!0});return()=>r.initialize()}},{provide:Yn,multi:!0,useFactory:()=>{let r=k(dA);return()=>{r.initialize()}}},n===!0?{provide:Vh,useValue:!0}:[],{provide:Uh,useValue:t??N_},{provide:Lt,useFactory:()=>{let r=k(Ve),i=k(Ye),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(wn),o.handleError(s))})}}}]}function ig(e){let n=e?.ignoreChangesOutsideZone,t=e?.scheduleInRootZone,r=rg({ngZoneFactory:()=>{let i=og(e);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Sr("NgZone_CoalesceEvent"),new Ve(i)},ignoreChangesOutsideZone:n,scheduleInRootZone:t});return di([{provide:A0,useValue:!0},{provide:Gs,useValue:!1},r])}function og(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var dA=(()=>{class e{subscription=new Pe;initialized=!1;zone=k(Ve);pendingTasks=k(Qn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var R0=(()=>{class e{applicationErrorHandler=k(Lt);appRef=k(xi);taskService=k(Qn);ngZone=k(Ve);zonelessEnabled=k(Gs);tracing=k(sa,{optional:!0});disableScheduling=k(Vh,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Wl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Uh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ql||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Db:P_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Wl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Db(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function fA(){return typeof $localize<"u"&&$localize.locale||da}var sg=new U("",{providedIn:"root",factory:()=>k(sg,{optional:!0,skipSelf:!0})||fA()});function tr(e){return wy(e)}function It(e,n){return jc(e,n?.equal)}var k0=class{[vt];constructor(n){this[vt]=n}destroy(){this[vt].destroy()}};var N0=Symbol("InputSignalNode#UNSET"),DA=ue(O({},Bc),{transformFn:void 0,applyValueToInputSignal(e,n){so(e,n)}});function P0(e,n){let t=Object.create(DA);t.value=e,t.transformFn=n?.transform;function r(){if(ro(t),t.value===N0){let i=null;throw new L(-950,i)}return t.value}return r[vt]=t,r}var Du=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>ia(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},SA=new U("");SA.__NG_ELEMENT_ID__=e=>{let n=ht();if(n===null)throw new L(204,!1);if(n.type&2)return n.value;if(e&8)return null;throw new L(204,!1)};function O0(e,n){return P0(e,n)}function xA(e){return P0(N0,e)}var F0=(O0.required=xA,O0);var ag=new U(""),IA=new U("");function ga(e){return!e.moduleRef}function TA(e){let n=ga(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Ve);return t.run(()=>{ga(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=n.get(Lt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),ga(e)){let o=()=>n.destroy(),s=e.platformInjector.get(ag);s.add(o),n.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(ag);s.add(o),e.moduleRef.onDestroy(()=>{Zs(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return AA(r,t,()=>{let o=n.get(Qn),s=o.add(),a=n.get(Yp);return a.runInitializers(),a.donePromise.then(()=>{let c=n.get(sg,da);if(M0(c||da),!n.get(IA,!0))return ga(e)?n.get(xi):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ga(e)){let u=n.get(xi);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return MA?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var MA;function AA(e,n,t){try{let r=t();return ua(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e(r)),r}}var Cu=null;function RA(e=[],n){return on.create({name:n,providers:[{provide:Bs,useValue:"platform"},{provide:ag,useValue:new Set([()=>Cu=null])},...e]})}function kA(e=[]){if(Cu)return Cu;let n=RA(e);return Cu=n,x0(),OA(n),n}function OA(e){let n=e.get(au,null);yt(e,()=>{n?.forEach(t=>t())})}var ma=(()=>{class e{static __NG_ELEMENT_ID__=NA}return e})();function NA(e){return PA(ht(),J(),(e&16)===16)}function PA(e,n,t){if(Er(e)&&!t){let r=Yt(e.index,n);return new Dr(r,r)}else if(e.type&175){let r=n[Pt];return new Dr(r,n)}return null}function L0(e){let{rootComponent:n,appProviders:t,platformProviders:r,platformRef:i}=e;me(8);try{let o=i?.injector??kA(r),s=[rg({}),{provide:ai,useExisting:R0},db,...t||[]],a=new ta({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return TA({r3Injector:a.injector,platformInjector:o,rootComponent:n})}catch(o){return Promise.reject(o)}finally{me(9)}}function Su(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var $0=null;function nr(){return $0}function cg(e){$0??=e}var va=class{},lg=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(V0),providedIn:"platform"})}return e})();var V0=(()=>{class e extends lg{_location;_history;_doc=k(Xe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return nr().getBaseHref(this._doc)}onPopState(t){let r=nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function U0(e,n){return e?n?e.endsWith("/")?n.startsWith("/")?e+n.slice(1):e+n:n.startsWith("/")?e+n:`${e}/${n}`:e:n}function j0(e){let n=e.search(/#|\?|$/);return e[n-1]==="/"?e.slice(0,n-1)+e.slice(n):e}function Mr(e){return e&&e[0]!=="?"?`?${e}`:e}var Lo=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(z0),providedIn:"root"})}return e})(),H0=new U(""),z0=(()=>{class e extends Lo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return U0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Mr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(Y(lg),Y(H0,8))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jo=(()=>{class e{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=jA(j0(B0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mr(r))}normalize(t){return e.stripTrailingSlash(LA(this._basePath,B0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Mr;static joinWithSlash=U0;static stripTrailingSlash=j0;static \u0275fac=function(r){return new(r||e)(Y(Lo))};static \u0275prov=F({token:e,factory:()=>FA(),providedIn:"root"})}return e})();function FA(){return new jo(Y(Lo))}function LA(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function B0(e){return e.replace(/\/index.html$/,"")}function jA(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}var Ar=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Po({type:e});static \u0275inj=ci({})}return e})();function ug(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(o)}return null}var ya=class{};var W0="browser";var ba=class{_doc;constructor(n){this._doc=n}manager},xu=(()=>{class e extends ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(Y(Xe))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Tu=new U(""),gg=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof xu));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof xu);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(Y(Tu),Y(Ve))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),dg="ng-app-id";function q0(e){for(let n of e)n.remove()}function G0(e,n){let t=n.createElement("style");return t.textContent=e,t}function VA(e,n,t,r){let i=e.head?.querySelectorAll(`style[${dg}="${n}"],link[${dg}="${n}"]`);if(i)for(let o of i)o.removeAttribute(dg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function hg(e,n){let t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}var mg=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,VA(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,G0);r?.forEach(i=>this.addUsage(i,this.external,hg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(q0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])q0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,G0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,hg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Y(Xe),Y(su),Y(cu,8),Y(oa))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),fg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vg=/%COMP%/g;var Y0="%COMP%",UA=`_nghost-${Y0}`,HA=`_ngcontent-${Y0}`,zA=!0,WA=new U("",{providedIn:"root",factory:()=>zA});function qA(e){return HA.replace(vg,e)}function GA(e){return UA.replace(vg,e)}function Z0(e,n){return n.map(t=>t.replace(vg,e))}var yg=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new _a(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Iu?i.applyToHost(t):i instanceof wa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Jn.Emulated:o=new Iu(c,l,r,this.appId,u,s,a,d,h);break;case Jn.ShadowDom:return new pg(c,l,t,r,s,a,this.nonce,d,h);default:o=new wa(c,l,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(Y(gg),Y(mg),Y(su),Y(WA),Y(Xe),Y(Ve),Y(cu),Y(sa,8))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),_a=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i,o){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(fg[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(K0(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(K0(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){t.remove()}selectRootElement(n,t){let r=typeof n=="string"?this.doc.querySelector(n):n;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;let o=fg[i];o?n.setAttributeNS(o,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){let i=fg[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Xn.DashCase|Xn.Important)?n.style.setProperty(t,r,i&Xn.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Xn.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n!=null&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if(typeof n=="string"&&(n=nr().getGlobalEventTarget(this.doc,n),!n))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,t,o)),this.eventManager.addEventListener(n,t,o,i)}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;n(t)===!1&&t.preventDefault()}}};function K0(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var pg=class extends _a{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,i,o,s,a,c,l){super(n,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Z0(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=hg(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wa=class extends _a{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,t,r,i,o,s,a,c,l){super(n,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?Z0(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&_i.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Iu=class extends wa{contentAttr;hostAttr;constructor(n,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(n,t,r,o,s,a,c,l,u),this.contentAttr=qA(u),this.hostAttr=GA(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}};var Mu=class e extends va{supportsDOMEvents=!0;static makeCurrent(){cg(new e)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=KA();return t==null?null:YA(t)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ug(document.cookie,n)}},Ea=null;function KA(){return Ea=Ea||document.head.querySelector("base"),Ea?Ea.getAttribute("href"):null}function YA(e){return new URL(e,document.baseURI).pathname}var ZA=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})(),Q0=["alt","control","meta","shift"],QA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},J0=(()=>{class e extends ba{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Q0.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=QA[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Q0.forEach(s=>{if(s!==i){let a=JA[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{e.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||e)(Y(Xe))};static \u0275prov=F({token:e,factory:e.\u0275fac})}return e})();function bg(e,n,t){let r=O({rootComponent:e,platformRef:t?.platformRef},XA(n));return L0(r)}function XA(e){return{appProviders:[...iR,...e?.providers??[]],platformProviders:rR}}function eR(){Mu.makeCurrent()}function tR(){return new wn}function nR(){return xp(document),document}var rR=[{provide:oa,useValue:W0},{provide:au,useValue:eR,multi:!0},{provide:Xe,useFactory:nR}];var iR=[{provide:Bs,useValue:"root"},{provide:wn,useFactory:tR},{provide:Tu,useClass:xu,multi:!0,deps:[Xe]},{provide:Tu,useClass:J0,multi:!0,deps:[Xe]},yg,mg,gg,{provide:wi,useExisting:yg},{provide:ya,useClass:ZA},[]];var X0=(()=>{class e{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||e)(Y(Xe))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var G="primary",La=Symbol("RouteTitle"),Dg=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ai(e){return new Dg(e)}function aw(e,n,t){let r=t.path.split("/");if(r.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function sR(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!Rn(e[t],n[t]))return!1;return!0}function Rn(e,n){let t=e?Sg(e):void 0,r=n?Sg(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!cw(e[i],n[i]))return!1;return!0}function Sg(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function cw(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),r=[...n].sort();return t.every((i,o)=>r[o]===i)}else return e===n}function lw(e){return e.length>0?e[e.length-1]:null}function ir(e){return jf(e)?e:ua(e)?Oe(Promise.resolve(e)):H(e)}var aR={exact:dw,subset:fw},uw={exact:cR,subset:lR,ignored:()=>!0};function ew(e,n,t){return aR[t.paths](e.root,n.root,t.matrixParams)&&uw[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function cR(e,n){return Rn(e,n)}function dw(e,n,t){if(!Ti(e.segments,n.segments)||!ku(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let r in n.children)if(!e.children[r]||!dw(e.children[r],n.children[r],t))return!1;return!0}function lR(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>cw(e[t],n[t]))}function fw(e,n,t){return hw(e,n,n.segments,t)}function hw(e,n,t,r){if(e.segments.length>t.length){let i=e.segments.slice(0,t.length);return!(!Ti(i,t)||n.hasChildren()||!ku(i,t,r))}else if(e.segments.length===t.length){if(!Ti(e.segments,t)||!ku(e.segments,t,r))return!1;for(let i in n.children)if(!e.children[i]||!fw(e.children[i],n.children[i],r))return!1;return!0}else{let i=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!Ti(e.segments,i)||!ku(e.segments,i,r)||!e.children[G]?!1:hw(e.children[G],n,o,r)}}function ku(e,n,t){return n.every((r,i)=>uw[t](e[i].parameters,r.parameters))}var On=class{root;queryParams;fragment;_queryParamMap;constructor(n=new fe([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ai(this.queryParams),this._queryParamMap}toString(){return fR.serialize(this)}},fe=class{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ou(this)}},Rr=class{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Ai(this.parameters),this._parameterMap}toString(){return gw(this)}};function uR(e,n){return Ti(e,n)&&e.every((t,r)=>Rn(t.parameters,n[r].parameters))}function Ti(e,n){return e.length!==n.length?!1:e.every((t,r)=>t.path===n[r].path)}function dR(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===G&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==G&&(t=t.concat(n(i,r)))}),t}var ja=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>new Ri,providedIn:"root"})}return e})(),Ri=class{parse(n){let t=new Ig(n);return new On(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${Ca(n.root,!0)}`,r=gR(n.queryParams),i=typeof n.fragment=="string"?`#${hR(n.fragment)}`:"";return`${t}${r}${i}`}},fR=new Ri;function Ou(e){return e.segments.map(n=>gw(n)).join("/")}function Ca(e,n){if(!e.hasChildren())return Ou(e);if(n){let t=e.children[G]?Ca(e.children[G],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==G&&r.push(`${i}:${Ca(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dR(e,(r,i)=>i===G?[Ca(e.children[G],!1)]:[`${i}:${Ca(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[G]!=null?`${Ou(e)}/${t[0]}`:`${Ou(e)}/(${t.join("//")})`}}function pw(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Au(e){return pw(e).replace(/%3B/gi,";")}function hR(e){return encodeURI(e)}function xg(e){return pw(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nu(e){return decodeURIComponent(e)}function tw(e){return Nu(e.replace(/\+/g,"%20"))}function gw(e){return`${xg(e.path)}${pR(e.parameters)}`}function pR(e){return Object.entries(e).map(([n,t])=>`;${xg(n)}=${xg(t)}`).join("")}function gR(e){let n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Au(t)}=${Au(i)}`).join("&"):`${Au(t)}=${Au(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var mR=/^[^\/()?;#]+/;function _g(e){let n=e.match(mR);return n?n[0]:""}var vR=/^[^\/()?;=#]+/;function yR(e){let n=e.match(vR);return n?n[0]:""}var bR=/^[^=?&#]+/;function _R(e){let n=e.match(bR);return n?n[0]:""}var wR=/^[^&#]+/;function ER(e){let n=e.match(wR);return n?n[0]:""}var Ig=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[G]=new fe(n,t)),r}parseSegment(){let n=_g(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(n),new Rr(Nu(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=yR(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=_g(this.remaining);i&&(r=i,this.capture(r))}n[Nu(t)]=Nu(r)}parseQueryParam(n){let t=_R(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=ER(this.remaining);s&&(r=s,this.capture(r))}let i=tw(t),o=tw(r);if(n.hasOwnProperty(i)){let s=n[i];Array.isArray(s)||(s=[s],n[i]=s),s.push(o)}else n[i]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_g(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=G);let s=this.parseChildren();t[o??G]=Object.keys(s).length===1&&s[G]?s[G]:new fe([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new L(4011,!1)}};function mw(e){return e.segments.length>0?new fe([],{[G]:e}):e}function vw(e){let n={};for(let[r,i]of Object.entries(e.children)){let o=vw(i);if(r===G&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))n[s]=a;else(o.segments.length>0||o.hasChildren())&&(n[r]=o)}let t=new fe(e.segments,n);return CR(t)}function CR(e){if(e.numberOfChildren===1&&e.children[G]){let n=e.children[G];return new fe(e.segments.concat(n.segments),n.children)}return e}function kr(e){return e instanceof On}function yw(e,n,t=null,r=null){let i=bw(e);return _w(i,n,t,r)}function bw(e){let n;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new fe(o.url,s);return o===e&&(n=a),a}let r=t(e.root),i=mw(r);return n??i}function _w(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(n.length===0)return wg(i,i,i,t,r);let o=DR(n);if(o.toRoot())return wg(i,i,new fe([],{}),t,r);let s=SR(o,i,e),a=s.processChildren?Sa(s.segmentGroup,s.index,o.commands):Ew(s.segmentGroup,s.index,o.commands);return wg(i,s.segmentGroup,a,t,r)}function Pu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ta(e){return typeof e=="object"&&e!=null&&e.outlets}function wg(e,n,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===n?s=t:s=ww(e,n,t);let a=mw(vw(s));return new On(a,o,i)}function ww(e,n,t){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===n?r[i]=t:r[i]=ww(o,n,t)}),new fe(e.segments,r)}var Fu=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Pu(r[0]))throw new L(4003,!1);let i=r.find(Ta);if(i&&i!==lw(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function DR(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Fu(!0,0,e);let n=0,t=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?n++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fu(t,n,r)}var Vo=class{segmentGroup;processChildren;index;constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}};function SR(e,n,t){if(e.isAbsolute)return new Vo(n,!0,0);if(!t)return new Vo(n,!1,NaN);if(t.parent===null)return new Vo(t,!0,0);let r=Pu(e.commands[0])?0:1,i=t.segments.length-1+r;return xR(t,i,e.numberOfDoubleDots)}function xR(e,n,t){let r=e,i=n,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Vo(r,!1,i-o)}function IR(e){return Ta(e[0])?e[0].outlets:{[G]:e}}function Ew(e,n,t){if(e??=new fe([],{}),e.segments.length===0&&e.hasChildren())return Sa(e,n,t);let r=TR(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new fe(e.segments.slice(0,r.pathIndex),{});return o.children[G]=new fe(e.segments.slice(r.pathIndex),e.children),Sa(o,0,i)}else return r.match&&i.length===0?new fe(e.segments,{}):r.match&&!e.hasChildren()?Tg(e,n,t):r.match?Sa(e,0,i):Tg(e,n,t)}function Sa(e,n,t){if(t.length===0)return new fe(e.segments,{});{let r=IR(t),i={};if(Object.keys(r).some(o=>o!==G)&&e.children[G]&&e.numberOfChildren===1&&e.children[G].segments.length===0){let o=Sa(e.children[G],n,t);return new fe(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Ew(e.children[o],n,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new fe(e.segments,i)}}function TR(e,n,t){let r=0,i=n,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return o;let s=e.segments[i],a=t[r];if(Ta(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!rw(c,l,s))return o;r+=2}else{if(!rw(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Tg(e,n,t){let r=e.segments.slice(0,n),i=0;for(;i<t.length;){let o=t[i];if(Ta(o)){let c=MR(o.outlets);return new fe(r,c)}if(i===0&&Pu(t[0])){let c=e.segments[n];r.push(new Rr(c.path,nw(t[0]))),i++;continue}let s=Ta(o)?o.outlets[G]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Pu(a)?(r.push(new Rr(s,nw(a))),i+=2):(r.push(new Rr(s,{})),i++)}return new fe(r,{})}function MR(e){let n={};return Object.entries(e).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[t]=Tg(new fe([],{}),0,r))}),n}function nw(e){let n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function rw(e,n,t){return e==t.path&&Rn(n,t.parameters)}var xa="imperative",et=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(et||{}),$t=class{id;url;constructor(n,t){this.id=n,this.url=t}},ki=class extends $t{type=et.NavigationStart;navigationTrigger;restoredState;constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gn=class extends $t{urlAfterRedirects;type=et.NavigationEnd;constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_t=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(_t||{}),Ma=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Ma||{}),kn=class extends $t{reason;code;type=et.NavigationCancel;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},rr=class extends $t{reason;code;type=et.NavigationSkipped;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}},Ho=class extends $t{error;target;type=et.NavigationError;constructor(n,t,r,i){super(n,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Aa=class extends $t{urlAfterRedirects;state;type=et.RoutesRecognized;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lu=class extends $t{urlAfterRedirects;state;type=et.GuardsCheckStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ju=class extends $t{urlAfterRedirects;state;shouldActivate;type=et.GuardsCheckEnd;constructor(n,t,r,i,o){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bu=class extends $t{urlAfterRedirects;state;type=et.ResolveStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class extends $t{urlAfterRedirects;state;type=et.ResolveEnd;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vu=class{route;type=et.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uu=class{route;type=et.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hu=class{snapshot;type=et.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zu=class{snapshot;type=et.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wu=class{snapshot;type=et.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qu=class{snapshot;type=et.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ra=class{},zo=class{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function AR(e){return!(e instanceof Ra)&&!(e instanceof zo)}function RR(e,n){return e.providers&&!e._injector&&(e._injector=la(e.providers,n,`Route: ${e.path}`)),e._injector??n}function pn(e){return e.outlet||G}function kR(e,n){let t=e.filter(r=>pn(r)===n);return t.push(...e.filter(r=>pn(r)!==n)),t}function Go(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Go(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Ko(this.rootInjector)}},Ko=(()=>{class e{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gu(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||e)(Y(Ye))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ku=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=Mg(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){let t=Mg(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=Ag(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return Ag(n,this._root).map(t=>t.value)}};function Mg(e,n){if(e===n.value)return n;for(let t of n.children){let r=Mg(e,t);if(r)return r}return null}function Ag(e,n){if(e===n.value)return[n];for(let t of n.children){let r=Ag(e,t);if(r.length)return r.unshift(n),r}return[]}var Bt=class{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function $o(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var ka=class extends Ku{snapshot;constructor(n,t){super(n),this.snapshot=t,jg(this,n)}toString(){return this.snapshot.toString()}};function Cw(e){let n=OR(e),t=new rt([new Rr("",{})]),r=new rt({}),i=new rt({}),o=new rt({}),s=new rt(""),a=new Vt(t,r,o,s,i,G,e,n.root);return a.snapshot=n.root,new ka(new Bt(a,[]),n)}function OR(e){let n={},t={},r={},o=new Mi([],n,r,"",t,G,e,null,{});return new Oa("",new Bt(o,[]))}var Vt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,r,i,o,s,a,c){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ce(l=>l[La]))??H(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(n=>Ai(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(n=>Ai(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yu(e,n,t="emptyOnly"){let r,{routeConfig:i}=e;return n!==null&&(t==="always"||i?.path===""||!n.component&&!n.routeConfig?.loadComponent)?r={params:O(O({},n.params),e.params),data:O(O({},n.data),e.data),resolve:O(O(O(O({},e.data),n.data),i?.data),e._resolvedData)}:r={params:O({},e.params),data:O({},e.data),resolve:O(O({},e.data),e._resolvedData??{})},i&&Sw(i)&&(r.resolve[La]=i.title),r}var Mi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[La]}constructor(n,t,r,i,o,s,a,c,l){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ai(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ai(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},Oa=class extends Ku{url;constructor(n,t){super(t),this.url=n,jg(this,t)}toString(){return Dw(this._root)}};function jg(e,n){n.value._routerState=e,n.children.forEach(t=>jg(e,t))}function Dw(e){let n=e.children.length>0?` { ${e.children.map(Dw).join(", ")} } `:"";return`${e.value}${n}`}function Eg(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,Rn(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),Rn(n.params,t.params)||e.paramsSubject.next(t.params),sR(n.url,t.url)||e.urlSubject.next(t.url),Rn(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Rg(e,n){let t=Rn(e.params,n.params)&&uR(e.url,n.url),r=!e.parent!=!n.parent;return t&&!r&&(!e.parent||Rg(e.parent,n.parent))}function Sw(e){return typeof e.title=="string"||e.title===null}var xw=new U(""),Ba=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=G;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=F0();parentContexts=k(Ko);location=k(Di);changeDetector=k(ma);inputBinder=k(Xu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new kg(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Si({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ci]})}return e})(),kg=class{route;childContexts;parent;outletData;constructor(n,t,r,i){this.route=n,this.childContexts=t,this.parent=r,this.outletData=i}get(n,t){return n===Vt?this.route:n===Ko?this.childContexts:n===xw?this.outletData:this.parent.get(n,t)}},Xu=new U("");var Bg=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ue({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ir(0,"router-outlet")},dependencies:[Ba],encapsulation:2})}return e})();function $g(e){let n=e.children&&e.children.map($g),t=n?ue(O({},e),{children:n}):O({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==G&&(t.component=Bg),t}function NR(e,n,t){let r=Na(e,n._root,t?t._root:void 0);return new ka(r,n)}function Na(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=n.value;let i=PR(e,n,t);return new Bt(r,i)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Na(e,a)),s}}let r=FR(n.value),i=n.children.map(o=>Na(e,o));return new Bt(r,i)}}function PR(e,n,t){return n.children.map(r=>{for(let i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Na(e,r,i);return Na(e,r)})}function FR(e){return new Vt(new rt(e.url),new rt(e.params),new rt(e.queryParams),new rt(e.fragment),new rt(e.data),e.outlet,e.component,e)}var Wo=class{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},Iw="ngNavigationCancelingError";function Zu(e,n){let{redirectTo:t,navigationBehaviorOptions:r}=kr(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=Tw(!1,_t.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Tw(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[Iw]=!0,t.cancellationCode=n,t}function LR(e){return Mw(e)&&kr(e.url)}function Mw(e){return!!e&&e[Iw]}var jR=(e,n,t,r)=>ce(i=>(new Og(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)),Og=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,r,i,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),Eg(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){let i=$o(t);n.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=$o(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,t){let r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,o=$o(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){let i=$o(t);n.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qu(o.value.snapshot))}),n.children.length&&this.forwardEvent(new zu(n.value.snapshot))}activateRoutes(n,t,r){let i=n.value,o=t?t.value:null;if(Eg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Eg(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,r)}},Qu=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Uo=class{component;route;constructor(n,t){this.component=n,this.route=t}};function BR(e,n,t){let r=e._root,i=n?n._root:null;return Da(r,i,t,[r.value])}function $R(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function Yo(e,n){let t=Symbol(),r=n.get(e,t);return r===t?typeof e=="function"&&!th(e)?e:n.get(e):r}function Da(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$o(n);return e.children.forEach(s=>{VR(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ia(a,t.getContext(s),i)),i}function VR(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=n?n.value:null,a=t?t.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=UR(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qu(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Da(e,n,a?a.children:null,r,i):Da(e,n,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uo(a.outlet.component,s))}else s&&Ia(n,a,i),i.canActivateChecks.push(new Qu(r)),o.component?Da(e,null,a?a.children:null,r,i):Da(e,null,t,r,i);return i}function UR(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!Ti(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Ti(e.url,n.url)||!Rn(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rg(e,n)||!Rn(e.queryParams,n.queryParams);case"paramsChange":default:return!Rg(e,n)}}function Ia(e,n,t){let r=$o(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?n?Ia(s,n.children.getContext(o),t):Ia(s,null,t):Ia(s,n,t)}),i.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new Uo(n.outlet.component,i)):t.canDeactivateChecks.push(new Uo(null,i)):t.canDeactivateChecks.push(new Uo(null,i))}function $a(e){return typeof e=="function"}function HR(e){return typeof e=="boolean"}function zR(e){return e&&$a(e.canLoad)}function WR(e){return e&&$a(e.canActivate)}function qR(e){return e&&$a(e.canActivateChild)}function GR(e){return e&&$a(e.canDeactivate)}function KR(e){return e&&$a(e.canMatch)}function Aw(e){return e instanceof Hn||e?.name==="EmptyError"}var Ru=Symbol("INITIAL_VALUE");function qo(){return Dt(e=>il(e.map(n=>n.pipe(Wn(1),Vf(Ru)))).pipe(ce(n=>{for(let t of n)if(t!==!0){if(t===Ru)return Ru;if(t===!1||YR(t))return t}return!0}),Ot(n=>n!==Ru),Wn(1)))}function YR(e){return kr(e)||e instanceof Wo}function ZR(e,n){return Fe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?H(ue(O({},t),{guardsResult:!0})):QR(s,r,i,e).pipe(Fe(a=>a&&HR(a)?JR(r,o,e,n):H(a)),ce(a=>ue(O({},t),{guardsResult:a})))})}function QR(e,n,t,r){return Oe(e).pipe(Fe(i=>rk(i.component,i.route,t,n,r)),qn(i=>i!==!0,!0))}function JR(e,n,t,r){return Oe(n).pipe(ni(i=>vo(ek(i.route.parent,r),XR(i.route,r),nk(e,i.path,t),tk(e,i.route,t))),qn(i=>i!==!0,!0))}function XR(e,n){return e!==null&&n&&n(new Wu(e)),H(!0)}function ek(e,n){return e!==null&&n&&n(new Hu(e)),H(!0)}function tk(e,n,t){let r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||r.length===0)return H(!0);let i=r.map(o=>As(()=>{let s=Go(n)??t,a=Yo(o,s),c=WR(a)?a.canActivate(n,e):yt(s,()=>a(n,e));return ir(c).pipe(qn())}));return H(i).pipe(qo())}function nk(e,n,t){let r=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>$R(s)).filter(s=>s!==null).map(s=>As(()=>{let a=s.guards.map(c=>{let l=Go(s.node)??t,u=Yo(c,l),d=qR(u)?u.canActivateChild(r,e):yt(l,()=>u(r,e));return ir(d).pipe(qn())});return H(a).pipe(qo())}));return H(o).pipe(qo())}function rk(e,n,t,r,i){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let c=Go(n)??i,l=Yo(a,c),u=GR(l)?l.canDeactivate(e,n,t,r):yt(c,()=>l(e,n,t,r));return ir(u).pipe(qn())});return H(s).pipe(qo())}function ik(e,n,t,r){let i=n.canLoad;if(i===void 0||i.length===0)return H(!0);let o=i.map(s=>{let a=Yo(s,e),c=zR(a)?a.canLoad(n,t):yt(e,()=>a(n,t));return ir(c)});return H(o).pipe(qo(),Rw(r))}function Rw(e){return Nf(Ke(n=>{if(typeof n!="boolean")throw Zu(e,n)}),ce(n=>n===!0))}function ok(e,n,t,r){let i=n.canMatch;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=Yo(s,e),c=KR(a)?a.canMatch(n,t):yt(e,()=>a(n,t));return ir(c)});return H(o).pipe(qo(),Rw(r))}var Pa=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Fa=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Bo(e){return go(new Pa(e))}function sk(e){return go(new L(4e3,!1))}function ak(e){return go(Tw(!1,_t.GuardRejected))}var Ng=class{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return H(r);if(i.numberOfChildren>1||!i.children[G])return sk(`${n.redirectTo}`);i=i.children[G]}}applyRedirectCommands(n,t,r,i,o){return ck(t,i,o).pipe(ce(s=>{if(s instanceof On)throw new Fa(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),n,r);if(s[0]==="/")throw new Fa(a);return a}))}applyRedirectCreateUrlTree(n,t,r,i){let o=this.createSegmentGroup(n,t.root,r,i);return new On(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let r={};return Object.entries(n).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(n,t,r,i){let o=this.createSegments(n,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(n,c,r,i)}),new fe(o,s)}createSegments(n,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,i):this.findOrReturn(o,r))}findPosParam(n,t,r){let i=r[t.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(n,t){let r=0;for(let i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}};function ck(e,n,t){if(typeof e=="string")return H(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d}=n;return ir(yt(t,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d})))}var Pg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lk(e,n,t,r,i){let o=kw(e,n,t);return o.matched?(r=RR(n,r),ok(r,n,t,i).pipe(ce(s=>s===!0?o:O({},Pg)))):H(o)}function kw(e,n,t){if(n.path==="**")return uk(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?O({},Pg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(n.matcher||aw)(t,e,n);if(!i)return O({},Pg);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uk(e){return{matched:!0,parameters:e.length>0?lw(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function iw(e,n,t,r){return t.length>0&&hk(e,t,r)?{segmentGroup:new fe(n,fk(r,new fe(t,e.children))),slicedSegments:[]}:t.length===0&&pk(e,t,r)?{segmentGroup:new fe(e.segments,dk(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new fe(e.segments,e.children),slicedSegments:t}}function dk(e,n,t,r){let i={};for(let o of t)if(ed(e,n,o)&&!r[pn(o)]){let s=new fe([],{});i[pn(o)]=s}return O(O({},r),i)}function fk(e,n){let t={};t[G]=n;for(let r of e)if(r.path===""&&pn(r)!==G){let i=new fe([],{});t[pn(r)]=i}return t}function hk(e,n,t){return t.some(r=>ed(e,n,r)&&pn(r)!==G)}function pk(e,n,t){return t.some(r=>ed(e,n,r))}function ed(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gk(e,n,t){return n.length===0&&!e.children[t]}var Fg=class{};function mk(e,n,t,r,i,o,s="emptyOnly"){return new Lg(e,n,t,r,i,s,o).recognize()}var vk=31,Lg=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,r,i,o,s,a){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ng(this.urlSerializer,this.urlTree)}noMatchError(n){return new L(4002,`'${n.segmentGroup}'`)}recognize(){let n=iw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ce(({children:t,rootSnapshot:r})=>{let i=new Bt(r,t),o=new Oa("",i),s=yw(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(n){let t=new Mi([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),G,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,G,t).pipe(ce(r=>({children:r,rootSnapshot:t})),zn(r=>{if(r instanceof Fa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pa?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(n,t,r,o):this.processSegment(n,t,r,r.segments,i,!0,o).pipe(ce(s=>s instanceof Bt?[s]:[]))}processChildren(n,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Oe(o).pipe(ni(s=>{let a=r.children[s],c=kR(t,s);return this.processSegmentGroup(n,c,a,s,i)}),$f((s,a)=>(s.push(...a),s)),vr(null),Bf(),Fe(s=>{if(s===null)return Bo(r);let a=Ow(s);return yk(a),H(a)}))}processSegment(n,t,r,i,o,s,a){return Oe(t).pipe(ni(c=>this.processSegmentAgainstRoute(c._injector??n,t,c,r,i,o,s,a).pipe(zn(l=>{if(l instanceof Pa)return H(null);throw l}))),qn(c=>!!c),zn(c=>{if(Aw(c))return gk(r,i,o)?H(new Fg):Bo(r);throw c}))}processSegmentAgainstRoute(n,t,r,i,o,s,a,c){return pn(r)!==s&&(s===G||!ed(i,o,r))?Bo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(n,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,o,s,c):Bo(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=kw(t,i,o);if(!c)return Bo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vk&&(this.allowRedirects=!1));let f=new Mi(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ow(i),pn(i),i.component??i._loadedComponent??null,i,sw(i)),p=Yu(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,n).pipe(Dt(m=>this.applyRedirects.lineralizeSegments(i,m)),Fe(m=>this.processSegment(n,r,t,m.concat(h),s,!1,a)))}matchSegmentAgainstRoute(n,t,r,i,o,s){let a=lk(t,r,i,n,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Dt(c=>c.matched?(n=r._injector??n,this.getChildConfig(n,r,i).pipe(Dt(({routes:l})=>{let u=r._loadedInjector??n,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Mi(h,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ow(r),pn(r),r.component??r._loadedComponent??null,r,sw(r)),g=Yu(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:y}=iw(t,h,f,l);if(y.length===0&&m.hasChildren())return this.processChildren(u,l,m,p).pipe(ce(w=>new Bt(p,w)));if(l.length===0&&y.length===0)return H(new Bt(p,[]));let _=pn(r)===o;return this.processSegment(u,l,m,y,_?G:o,!0,p).pipe(ce(w=>new Bt(p,w instanceof Bt?[w]:[])))}))):Bo(t)))}getChildConfig(n,t,r){return t.children?H({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?H({routes:t._loadedRoutes,injector:t._loadedInjector}):ik(n,t,r,this.urlSerializer).pipe(Fe(i=>i?this.configLoader.loadChildren(n,t).pipe(Ke(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):ak(t))):H({routes:[],injector:n})}};function yk(e){e.sort((n,t)=>n.value.outlet===G?-1:t.value.outlet===G?1:n.value.outlet.localeCompare(t.value.outlet))}function bk(e){let n=e.value.routeConfig;return n&&n.path===""}function Ow(e){let n=[],t=new Set;for(let r of e){if(!bk(r)){n.push(r);continue}let i=n.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):n.push(r)}for(let r of t){let i=Ow(r.children);n.push(new Bt(r.value,i))}return n.filter(r=>!t.has(r))}function ow(e){return e.data||{}}function sw(e){return e.resolve||{}}function _k(e,n,t,r,i,o){return Fe(s=>mk(e,n,t,r,s.extractedUrl,i,o).pipe(ce(({state:a,tree:c})=>ue(O({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function wk(e,n){return Fe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return H(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Nw(c))s.add(l);let a=0;return Oe(s).pipe(ni(c=>o.has(c)?Ek(c,r,e,n):(c.data=Yu(c,c.parent,e).resolve,H(void 0))),Ke(()=>a++),yo(1),Fe(c=>a===s.size?H(t):Et))})}function Nw(e){let n=e.children.map(t=>Nw(t)).flat();return[e,...n]}function Ek(e,n,t,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Sw(i)&&(o[La]=i.title),As(()=>(e.data=Yu(e,e.parent,t).resolve,Ck(o,e,n,r).pipe(ce(s=>(e._resolvedData=s,e.data=O(O({},e.data),s),null)))))}function Ck(e,n,t,r){let i=Sg(e);if(i.length===0)return H({});let o={};return Oe(i).pipe(Fe(s=>Dk(e[s],n,t,r).pipe(qn(),Ke(a=>{if(a instanceof Wo)throw Zu(new Ri,a);o[s]=a}))),yo(1),ce(()=>o),zn(s=>Aw(s)?Et:go(s)))}function Dk(e,n,t,r){let i=Go(n)??r,o=Yo(e,i),s=o.resolve?o.resolve(n,t):yt(i,()=>o(n,t));return ir(s)}function Cg(e){return Dt(n=>{let t=e(n);return t?Oe(t).pipe(ce(()=>n)):H(n)})}var Vg=(()=>{class e{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===G);return r}getResolvedTitleForRoute(t){return t.data[La]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(Pw),providedIn:"root"})}return e})(),Pw=(()=>{class e extends Vg{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(Y(X0))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Zo=new U("",{providedIn:"root",factory:()=>({})}),Va=new U(""),Fw=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(ng);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return H(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ir(yt(t,()=>r.loadComponent())).pipe(ce(jw),Dt(Bw),Ke(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Rs(()=>{this.componentLoaders.delete(r)})),o=new po(i,()=>new Be).pipe(ho());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Lw(r,this.compiler,t,this.onLoadEndListener).pipe(Rs(()=>{this.childrenLoaders.delete(r)})),s=new po(o,()=>new Be).pipe(ho());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Lw(e,n,t,r){return ir(yt(t,()=>e.loadChildren())).pipe(ce(jw),Dt(Bw),Fe(i=>i instanceof yu||Array.isArray(i)?H(i):Oe(n.compileModuleAsync(i))),ce(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Va,[],{optional:!0,self:!0}).flat()),{routes:s.map($g),injector:o}}))}function Sk(e){return e&&typeof e=="object"&&"default"in e}function jw(e){return Sk(e)?e.default:e}function Bw(e){return H(e)}var td=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(xk),providedIn:"root"})}return e})(),xk=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$w=new U("");var Vw=new U(""),Uw=(()=>{class e{currentNavigation=X(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Be;transitionAbortWithErrorSubject=new Be;configLoader=k(Fw);environmentInjector=k(Ye);destroyRef=k(ln);urlSerializer=k(ja);rootContexts=k(Ko);location=k(jo);inputBindingEnabled=k(Xu,{optional:!0})!==null;titleStrategy=k(Vg);options=k(Zo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(td);createViewTransition=k($w,{optional:!0});navigationErrorHandler=k(Vw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Vu(i)),r=i=>this.events.next(new Uu(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;tr(()=>{this.transitions?.next(ue(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(Ot(r=>r!==null),Dt(r=>{let i=!1;return H(r).pipe(Dt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),Et;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ue(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new rr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ma.IgnoredSameUrlNavigation)),o.resolve(!1),Et;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return H(o).pipe(Dt(c=>(this.events.next(new ki(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Et:Promise.resolve(c))),_k(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=c.urlAfterRedirects,u));let l=new Aa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:h}=o,f=new ki(c,this.urlSerializer.serialize(l),u,d);this.events.next(f);let p=Cw(this.rootComponentType).snapshot;return this.currentTransition=r=ue(O({},o),{targetSnapshot:p,urlAfterRedirects:l,extras:ue(O({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=l,g)),H(r)}else return this.events.next(new rr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ma.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Et}),Ke(o=>{let s=new Lu(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ce(o=>(this.currentTransition=r=ue(O({},o),{guards:BR(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),ZR(this.environmentInjector,o=>this.events.next(o)),Ke(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Zu(this.urlSerializer,o.guardsResult);let s=new ju(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ot(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",_t.GuardRejected),!1)),Cg(o=>{if(o.guards.canActivateChecks.length!==0)return H(o).pipe(Ke(s=>{let a=new Bu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Dt(s=>{let a=!1;return H(s).pipe(wk(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",_t.NoDataFromResolver)}}))}),Ke(s=>{let a=new $u(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Cg(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let l=Go(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ke(u=>{a.component=u}),ce(()=>{})))}for(let l of a.children)c.push(...s(l));return c};return il(s(o.targetSnapshot.root)).pipe(vr(null),Wn(1))}),Cg(()=>this.afterPreactivation()),Dt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Oe(a).pipe(ce(()=>r)):H(r)}),ce(o=>{let s=NR(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ue(O({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Ke(()=>{this.events.next(new Ra)}),jR(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Wn(1),bo(new oe(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ot(()=>!i&&!r.targetRouterState),Ke(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",_t.Aborted)}))),Ke({next:o=>{i=!0,this.lastSuccessfulNavigation=tr(this.currentNavigation),this.events.next(new gn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),bo(this.transitionAbortWithErrorSubject.pipe(Ke(o=>{throw o}))),Rs(()=>{i||this.cancelNavigationTransition(r,"",_t.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),zn(o=>{if(this.destroyed)return r.resolve(!1),Et;if(i=!0,Mw(o))this.events.next(new kn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),LR(o)?this.events.next(new zo(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ho(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=yt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Wo){let{message:c,cancellationCode:l}=Zu(this.urlSerializer,a);this.events.next(new kn(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new zo(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new kn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tr(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ik(e){return e!==xa}var Hw=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(Tk),providedIn:"root"})}return e})(),Ju=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},Tk=(()=>{class e extends Ju{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ou(e)))(i||e)}})();static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zw=(()=>{class e{urlSerializer=k(ja);options=k(Zo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(jo);urlHandlingStrategy=k(td);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new On;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof On?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Cw(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:()=>k(Mk),providedIn:"root"})}return e})(),Mk=(()=>{class e extends zw{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ki?this.updateStateMemento():t instanceof rr?this.commitTransition(r):t instanceof Aa?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ra?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof kn&&t.code!==_t.SupersededByNewNavigation&&t.code!==_t.Redirect?this.restoreHistory(r):t instanceof Ho?this.restoreHistory(r,!0):t instanceof gn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ou(e)))(i||e)}})();static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ug(e,n){e.events.pipe(Ot(t=>t instanceof gn||t instanceof kn||t instanceof Ho||t instanceof rr),ce(t=>t instanceof gn||t instanceof rr?0:(t instanceof kn?t.code===_t.Redirect||t.code===_t.SupersededByNewNavigation:!1)?2:1),Ot(t=>t!==2),Wn(1)).subscribe(()=>{n()})}var Ak={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Or=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Gp);stateManager=k(zw);options=k(Zo,{optional:!0})||{};pendingTasks=k(Qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Uw);urlSerializer=k(ja);location=k(jo);urlHandlingStrategy=k(td);injector=k(Ye);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(Hw);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Va,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Xu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=tr(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof kn&&r.code!==_t.Redirect&&r.code!==_t.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gn)this.navigated=!0;else if(r instanceof zo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ik(i.source)},s);this.scheduleNavigation(a,xa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}AR(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=O({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Lt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($g),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=bw(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return _w(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=kr(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xa,null,r)}navigate(t,r={skipLocationChange:!1}){return kk(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ps(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},Ak):r===!1?i=O({},Rk):i=r,kr(t))return ew(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ew(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Ug(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kk(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new L(4008,!1)}var Nn=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=X(null);get href(){return tr(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Be;applicationErrorHandler=k(Lt);options=k(Zo,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Du("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof gn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(kr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:kr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(gt(Or),gt(Vt),ia("tabindex"),gt(ca),gt(er),gt(Lo))};static \u0275dir=Si({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&xt("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&xr("href",i.reactiveHref(),Mp)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Su],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Su],replaceUrl:[2,"replaceUrl","replaceUrl",Su],routerLink:"routerLink"},features:[Ci]})}return e})(),Hg=(()=>{class e{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new pt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof gn&&this.update()})}ngAfterContentInit(){H(this.links.changes,H(null)).pipe(mo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Oe(t).pipe(mo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Nk(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||e)(gt(Or),gt(er),gt(ca),gt(ma),gt(Nn,8))};static \u0275dir=Si({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Jp(o,Nn,5),r&2){let s;fa(s=ha())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ci]})}return e})();function Nk(e){return!!e.paths}var Pk=new U("");function zg(e,...n){return di([{provide:Va,multi:!0,useValue:e},[],{provide:Vt,useFactory:Fk,deps:[Or]},{provide:bu,multi:!0,useFactory:Lk},n.map(t=>t.\u0275providers)])}function Fk(e){return e.routerState.root}function Lk(){let e=k(on);return n=>{let t=e.get(xi);if(n!==t.components[0])return;let r=e.get(Or),i=e.get(jk);e.get(Bk)===1&&r.initialNavigation(),e.get($k,null,{optional:!0})?.setUpPreloading(),e.get(Pk,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jk=new U("",{factory:()=>new Be}),Bk=new U("",{providedIn:"root",factory:()=>1});var $k=new U("");var Ww=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);var Qo=class extends Error{constructor(n,t="FunctionsError",r){super(n),this.name=t,this.context=r}},Ua=class extends Qo{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}},Jo=class extends Qo{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}},Xo=class extends Qo{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}},nd=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(nd||{});var Ha=class{constructor(n,{headers:t={},customFetch:r,region:i=nd.Any}={}){this.url=n,this.headers=t,this.region=i,this.fetch=Ww(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Wc(this,arguments,void 0,function*(t,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${t}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(h["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(h["Content-Type"]="application/json",g=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?g=JSON.stringify(l):g=l;let m=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(m=s.signal,u.addEventListener("abort",()=>s.abort())):m=s.signal);let y=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:m}).catch(C=>{throw new Ua(C)}),_=y.headers.get("x-relay-error");if(_&&_==="true")throw new Jo(y);if(!y.ok)throw new Xo(y);let w=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return w==="application/json"?E=yield y.json():w==="application/octet-stream"||w==="application/pdf"?E=yield y.blob():w==="text/event-stream"?E=y:w==="multipart/form-data"?E=yield y.formData():E=yield y.text(),{data:E,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof Xo||a instanceof Jo?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Gw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},Uk=class{constructor(e){var n,t;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(t=e.isMaybeSingle)!==null&&t!==void 0?t:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>v(this,null,function*(){let s=null,a=null,c=null,l=o.status,u=o.statusText;if(o.ok){var d,h;if(t.method!=="HEAD"){var f;let y=yield o.text();y===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((f=t.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}let g=(d=t.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),m=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&m&&m.length>1&&(c=parseInt(m[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let g=yield o.text();try{s=JSON.parse(g),Array.isArray(s)&&o.status===404&&(a=[],s=null,l=200,u="OK")}catch{o.status===404&&g===""?(l=204,u="No Content"):s={message:g}}if(s&&t.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,l=200,u="OK"),s&&t.shouldThrowOnError)throw new Gw(s)}return{error:s,data:a,count:c,status:l,statusText:u}}));return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c=o?.cause;if(c){var l,u,d,h;let p=(l=c?.message)!==null&&l!==void 0?l:"",g=(u=c?.code)!==null&&u!==void 0?u:"";a=`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(h=c?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,g&&(a+=` (${g})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}},Hk=class extends Uk{select(e){let n=!1,t=(e??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:t,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${n?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:t=n}={}){let r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:t=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,n?"verbose":null,t?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},qw=new RegExp("[,()]"),es=class extends Hk{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){let t=Array.from(new Set(n)).map(r=>typeof r=="string"&&qw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}notIn(e,n){let t=Array.from(new Set(n)).map(r=>typeof r=="string"&&qw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${t})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:t,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,t])=>{this.url.searchParams.append(n,`eq.${t}`)}),this}not(e,n,t){return this.url.searchParams.append(e,`not.${n}.${t}`),this}or(e,{foreignTable:n,referencedTable:t=n}={}){let r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,t){return this.url.searchParams.append(e,`${n}.${t}`),this}},zk=class{constructor(e,{headers:n={},schema:t,fetch:r}){this.url=e,this.headers=new Headers(n),this.schema=t,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,n){let{head:t=!1,count:r}=n??{},i=t?"HEAD":"GET",o=!1,s=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new es({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:t=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(n&&s.append("Prefer",`count=${n}`),t||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);o.searchParams.set("columns",c.join(","))}}return new es({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:t=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),n!==void 0&&a.searchParams.set("on_conflict",n),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){let u=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new es({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var t;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new es({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:e}={}){var n;let t="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new es({method:t,url:r,headers:i,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},Kw=class Yw{constructor(n,{headers:t={},schema:r,fetch:i}={}){this.url=n,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new zk(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new Yw(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,t={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${n}`),l,u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(t).some(u);d?(a="POST",l=t):r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",l=t);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new es({method:a,url:c,headers:h,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var Wg=class{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let t=globalThis.process;if(t){let r=t.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let n=this.detectEnvironment();if(n.constructor)return n.constructor;let t=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(t+=`

Suggested solution: ${n.workaround}`),new Error(t)}static createWebSocket(n,t){let r=this.getWebSocketConstructor();return new r(n,t)}static isWebSocketSupported(){try{let n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}},qg=Wg;var Zw="2.91.0";var Qw=`realtime-js/${Zw}`,Jw="1.0.0",Gg="2.0.0",Kg=Gg;var za=1e4,Xw=1e3,eE=100,Nr=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(Nr||{}),ze=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(ze||{}),Zt=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(Zt||{}),Yg=(function(e){return e.websocket="websocket",e})(Yg||{}),Oi=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(Oi||{});var rd=class{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,t){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(n));let r=[n.join_ref,n.ref,n.topic,n.event,n.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(n){var t;return this._isArrayBuffer((t=n.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var t,r;let i=(r=(t=n.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(n){var t,r;let i=(r=(t=n.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(n,t,r){var i,o;let s=n.topic,a=(i=n.ref)!==null&&i!==void 0?i:"",c=(o=n.join_ref)!==null&&o!==void 0?o:"",l=n.payload.event,u=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,c.length),p.setUint8(g++,a.length),p.setUint8(g++,s.length),p.setUint8(g++,l.length),p.setUint8(g++,d.length),p.setUint8(g++,t),Array.from(c,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(a,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(s,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(l,y=>p.setUint8(g++,y.charCodeAt(0))),Array.from(d,y=>p.setUint8(g++,y.charCodeAt(0)));var m=new Uint8Array(f.byteLength+r.byteLength);return m.set(new Uint8Array(f),0),m.set(new Uint8Array(r),f.byteLength),m.buffer}decode(n,t){if(this._isArrayBuffer(n)){let r=this._binaryDecode(n);return t(r)}if(typeof n=="string"){let r=JSON.parse(n),[i,o,s,a,c]=r;return t({join_ref:i,ref:o,topic:s,event:a,payload:c})}return t({})}_binaryDecode(n){let t=new DataView(n),r=t.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,t,i)}}_decodeUserBroadcast(n,t,r){let i=t.getUint8(1),o=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(n.slice(c,c+i));c=c+i;let u=r.decode(n.slice(c,c+o));c=c+o;let d=r.decode(n.slice(c,c+s));c=c+s;let h=n.slice(c,n.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(n){var t;return n instanceof ArrayBuffer||((t=n?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(n,t){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([r])=>t.includes(r)))}};var ts=class{constructor(n,t){this.callback=n,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var _e=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(_e||{}),Qg=(e,n,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return n?Object.keys(n).reduce((o,s)=>(o[s]=Wk(s,e,n,i),o),{}):{}},Wk=(e,n,t,r)=>{let i=n.find(a=>a.name===e),o=i?.type,s=t[e];return o&&!r.includes(o)?tE(o,s):Zg(s)},tE=(e,n)=>{if(e.charAt(0)==="_"){let t=e.slice(1,e.length);return Yk(n,t)}switch(e){case _e.bool:return qk(n);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return Gk(n);case _e.json:case _e.jsonb:return Kk(n);case _e.timestamp:return Zk(n);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return Zg(n);default:return Zg(n)}},Zg=e=>e,qk=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gk=e=>{if(typeof e=="string"){let n=parseFloat(e);if(!Number.isNaN(n))return n}return e},Kk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Yk=(e,n)=>{if(typeof e!="string")return e;let t=e.length-1,r=e[t];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,t);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>tE(n,a))}return e},Zk=e=>typeof e=="string"?e.replace(" ","T"):e,id=e=>{let n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};var ns=class{constructor(n,t,r={},i=za){this.channel=n,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,t){var r;return this._hasReceived(n)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:n,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let n=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:t}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(t))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}};var Wa=class e{constructor(n,t){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,t,r,i){let o=this.cloneDeep(n),s=this.transformState(t),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=d.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(n,t,r,i){let{joins:o,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=n[a])!==null&&l!==void 0?l:[];if(n[a]=this.cloneDeep(c),u.length>0){let d=n[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);n[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=n[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),n[a]=l,i(a,l,c),l.length===0&&delete n[a]}),n}static map(n,t){return Object.getOwnPropertyNames(n).map(r=>t(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((t,r)=>{let i=n[r];return"metas"in i?t[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=i,t},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var qa=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(qa||{}),or=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(or||{});var Ga=class e{constructor(n,t={config:{}},r){var i,o;if(this.topic=n,this.params=t,this.socket=r,this.bindings={},this.state=ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ns(this,Zt.join,this.params,this.timeout),this.rejoinTimer=new ts(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ze.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Wa(this),this.broadcastEndpointURL=id(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,t=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ze.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[qa.PRESENCE]&&this.bindings[qa.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>n?.(or.CHANNEL_ERROR,f)),this._onClose(()=>n?.(or.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",p=>v(this,[p],function*({postgres_changes:f}){var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){n?.(or.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,y=(g=m?.length)!==null&&g!==void 0?g:0,_=[];for(let w=0;w<y;w++){let E=m[w],{filter:{event:C,schema:S,table:x,filter:R}}=E,N=f&&f[w];if(N&&N.event===C&&e.isFilterValueEqual(N.schema,S)&&e.isFilterValueEqual(N.table,x)&&e.isFilterValueEqual(N.filter,R))_.push(Object.assign(Object.assign({},E),{id:N.id}));else{this.unsubscribe(),this.state=ze.errored,n?.(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,n&&n(or.SUBSCRIBED);return}})).receive("error",f=>{this.state=ze.errored,n?.(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{n?.(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return v(this,arguments,function*(n,t={}){return yield this.send({type:"presence",event:"track",payload:n},t.timeout||this.timeout)})}untrack(){return v(this,arguments,function*(n={}){return yield this.send({type:"presence",event:"untrack"},n)})}on(n,t,r){return this.state===ze.joined&&n===qa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>v(this,null,function*(){return yield this.subscribe()}))),this._on(n,t,r)}httpSend(i,o){return v(this,arguments,function*(n,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");let a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:t,private:this.private}]})},l=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{let d=yield l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))})}send(r){return v(this,arguments,function*(n,t={}){var i,o;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=n,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);let l={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return yield(o=u.body)===null||o===void 0?void 0:o.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,l;let u=this._push(n.type,n,t.timeout||this.timeout);n.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=ze.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ns(this,Zt.leave,{},n),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ze.closed,this.bindings={}}_fetchWithTimeout(n,t,r){return v(this,null,function*(){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=yield this.socket.fetch(n,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),s})}_push(n,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ns(this,n,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>eE){let t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(n,t,r){return t}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,t,r){var i,o;let s=n.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Zt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,g,m,y,_,w,E,C;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let S=f.id,x=(p=f.filter)===null||p===void 0?void 0:p.event;return S&&((g=t.ids)===null||g===void 0?void 0:g.includes(S))&&(x==="*"||x?.toLocaleLowerCase()===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))&&(!(!((y=f.filter)===null||y===void 0)&&y.table)||f.filter.table===((_=t.data)===null||_===void 0?void 0:_.table))}else{let S=(E=(w=f?.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return S==="*"||S===((C=t?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:g,table:m,commit_timestamp:y,type:_,errors:w}=p;h=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:y,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===ze.closed}_isJoined(){return this.state===ze.joined}_isJoining(){return this.state===ze.joining}_isLeaving(){return this.state===ze.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,t,r){let i=n.toLocaleLowerCase(),o={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(n,t){let r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,t))})),this}static isEqual(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(let r in n)if(n[r]!==t[r])return!1;return!0}static isFilterValueEqual(n,t){return(n??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Zt.close,{},n)}_onError(n){this._on(Zt.error,{},t=>n(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ze.joining,this.joinPush.resend(n))}_getPayloadRecords(n){let t={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(t.new=Qg(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(t.old=Qg(n.columns,n.old_record)),t}};var Jg=()=>{},od={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Jk=[1e3,2e3,5e3,1e4],Xk=1e4,eO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ka=class{constructor(n,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=za,this.transport=null,this.heartbeatIntervalMs=od.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jg,this.ref=0,this.reconnectTimer=null,this.vsn=Kg,this.logger=Jg,this.conn=null,this.sendBuffer=[],this.serializer=new rd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${n}/${Yg.websocket}`,this.httpEndpoint=id(n),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");let t=n.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(n){return v(this,null,function*(){let t=yield n.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return v(this,null,function*(){let n=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),n})}log(n,t,r){this.logger(n,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nr.connecting:return Oi.Connecting;case Nr.open:return Oi.Open;case Nr.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,t={config:{}}){let r=`realtime:${n}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Ga(`realtime:${n}`,t,this);return this.channels.push(o),o}}push(n){let{topic:t,event:r,payload:i,ref:o}=n,s=()=>{this.encode(n,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(n=null){return v(this,null,function*(){this._authPromise=this._performAuth(n);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return v(this,null,function*(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Xw,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},od.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")})}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let t=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${n}"`),t.unsubscribe())}_remove(n){this.channels=this.channels.filter(t=>t.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",l)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=t,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",t)})}_clearTimer(n){var t;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Nr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Nr.open||this.conn.readyState===Nr.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var t;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Zt.error))}_appendParams(n,t){if(Object.keys(t).length===0)return n;let r=n.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${n}${r}${i}`}_workerObjectUrl(n){let t;if(n)t=n;else{let r=new Blob([eO],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(n,t=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=t)}_performAuth(n=null){return v(this,null,function*(){let t,r=!1;if(n)t=n,r=!0;else if(this.accessToken)try{t=yield this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{let o={access_token:t,version:Qw};t&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Zt.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return v(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${n}`,t)})}_triggerStateCallbacks(n,t){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${n} callback`,i)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ts(()=>v(this,null,function*(){setTimeout(()=>v(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),od.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(n){var t,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(t=n?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=n?.timeout)!==null&&r!==void 0?r:za,this.heartbeatIntervalMs=(i=n?.heartbeatIntervalMs)!==null&&i!==void 0?i:od.HEARTBEAT_INTERVAL,this.worker=(o=n?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=n?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=n?.heartbeatCallback)!==null&&a!==void 0?a:Jg,this.vsn=(c=n?.vsn)!==null&&c!==void 0?c:Kg,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=n?.reconnectAfterMs)!==null&&l!==void 0?l:p=>Jk[p-1]||Xk,this.vsn){case Jw:this.encode=(u=n?.encode)!==null&&u!==void 0?u:(p,g)=>g(JSON.stringify(p)),this.decode=(d=n?.decode)!==null&&d!==void 0?d:(p,g)=>g(JSON.parse(p));break;case Gg:this.encode=(h=n?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=n?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}};var Ya=class extends Error{constructor(e,n){super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tO(e,n,t){let r=new URL(n,e);if(t)for(let[i,o]of Object.entries(t))o!==void 0&&r.searchParams.set(i,o);return r.toString()}function nO(e){return v(this,null,function*(){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?yield e.getHeaders():{}})}function rO(e){let n=e.fetchImpl??globalThis.fetch;return{request(c){return v(this,arguments,function*({method:r,path:i,query:o,body:s,headers:a}){let l=tO(e.baseUrl,i,o),u=yield nO(e.auth),d=yield n(l,{method:r,headers:O(O(O({},s?{"Content-Type":"application/json"}:{}),u),a),body:s?JSON.stringify(s):void 0}),h=yield d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),p=f&&h?JSON.parse(h):h;if(!d.ok){let g=f?p:void 0,m=g?.error;throw new Ya(m?.message??`Request failed with status ${d.status}`,{status:d.status,icebergType:m?.type,icebergCode:m?.code,details:g})}return{status:d.status,headers:d.headers,data:p}})}}}function sd(e){return e.join("")}var iO=class{constructor(e,n=""){this.client=e,this.prefix=n}listNamespaces(e){return v(this,null,function*(){let n=e?{parent:sd(e.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(r=>({namespace:r}))})}createNamespace(e,n){return v(this,null,function*(){let t={namespace:e.namespace,properties:n?.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data})}dropNamespace(e){return v(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sd(e.namespace)}`})})}loadNamespaceMetadata(e){return v(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sd(e.namespace)}`})).data.properties}})}namespaceExists(e){return v(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sd(e.namespace)}`}),!0}catch(n){if(n instanceof Ya&&n.status===404)return!1;throw n}})}createNamespaceIfNotExists(e,n){return v(this,null,function*(){try{return yield this.createNamespace(e,n)}catch(t){if(t instanceof Ya&&t.status===409)return;throw t}})}};function rs(e){return e.join("")}var oO=class{constructor(e,n="",t){this.client=e,this.prefix=n,this.accessDelegation=t}listTables(e){return v(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables`})).data.identifiers})}createTable(e,n){return v(this,null,function*(){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables`,body:n,headers:t})).data.metadata})}updateTable(e,n){return v(this,null,function*(){let t=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}})}dropTable(e,n){return v(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(n?.purge??!1)}})})}loadTable(e){return v(this,null,function*(){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata})}tableExists(e){return v(this,null,function*(){let n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rs(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(t){if(t instanceof Ya&&t.status===404)return!1;throw t}})}createTableIfNotExists(e,n){return v(this,null,function*(){try{return yield this.createTable(e,n)}catch(t){if(t instanceof Ya&&t.status===409)return yield this.loadTable({namespace:e.namespace,name:n.name});throw t}})}},nE=class{constructor(e){let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);let t=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=rO({baseUrl:t,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new iO(this.client,n),this.tableOps=new oO(this.client,n,this.accessDelegation)}listNamespaces(e){return v(this,null,function*(){return this.namespaceOps.listNamespaces(e)})}createNamespace(e,n){return v(this,null,function*(){return this.namespaceOps.createNamespace(e,n)})}dropNamespace(e){return v(this,null,function*(){yield this.namespaceOps.dropNamespace(e)})}loadNamespaceMetadata(e){return v(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(e)})}listTables(e){return v(this,null,function*(){return this.tableOps.listTables(e)})}createTable(e,n){return v(this,null,function*(){return this.tableOps.createTable(e,n)})}updateTable(e,n){return v(this,null,function*(){return this.tableOps.updateTable(e,n)})}dropTable(e,n){return v(this,null,function*(){yield this.tableOps.dropTable(e,n)})}loadTable(e){return v(this,null,function*(){return this.tableOps.loadTable(e)})}namespaceExists(e){return v(this,null,function*(){return this.namespaceOps.namespaceExists(e)})}tableExists(e){return v(this,null,function*(){return this.tableOps.tableExists(e)})}createNamespaceIfNotExists(e,n){return v(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(e,n)})}createTableIfNotExists(e,n){return v(this,null,function*(){return this.tableOps.createTableIfNotExists(e,n)})}};var ad=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var sO=class extends ad{constructor(e,n,t){super(e),this.name="StorageApiError",this.status=n,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},tm=class extends ad{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}},im=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),aO=()=>Response,nm=e=>{if(Array.isArray(e))return e.map(t=>nm(t));if(typeof e=="function"||e!==Object(e))return e;let n={};return Object.entries(e).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));n[i]=nm(r)}),n},cO=e=>{if(typeof e!="object"||e===null)return!1;let n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lO=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Za(e){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Za(e)}function uO(e,n){if(Za(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n||"default");if(Za(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function dO(e){var n=uO(e,"string");return Za(n)=="symbol"?n:n+""}function fO(e,n,t){return(n=dO(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function rE(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?rE(Object(t),!0).forEach(function(r){fO(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rE(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var Xg=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},hO=(e,n,t)=>v(null,null,function*(){e instanceof(yield aO())&&!t?.noResolveJson?e.json().then(r=>{let i=e.status||500,o=r?.statusCode||i+"";n(new sO(Xg(r),i,o))}).catch(r=>{n(new tm(Xg(r),r))}):n(new tm(Xg(e),e))}),pO=(e,n,t,r)=>{let i={method:e,headers:n?.headers||{}};return e==="GET"||!r?i:(cO(r)?(i.headers=$({"Content-Type":"application/json"},n?.headers),i.body=JSON.stringify(r)):i.body=r,n?.duplex&&(i.duplex=n.duplex),$($({},i),t))};function Ja(e,n,t,r,i,o){return v(this,null,function*(){return new Promise((s,a)=>{e(t,pO(n,r,i,o)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>hO(c,a,r))})})}function Qa(e,n,t,r){return v(this,null,function*(){return Ja(e,"GET",n,t,r)})}function mn(e,n,t,r,i){return v(this,null,function*(){return Ja(e,"POST",n,r,i,t)})}function rm(e,n,t,r,i){return v(this,null,function*(){return Ja(e,"PUT",n,r,i,t)})}function gO(e,n,t,r){return v(this,null,function*(){return Ja(e,"HEAD",n,$($({},t),{},{noResolveJson:!0}),r)})}function om(e,n,t,r,i){return v(this,null,function*(){return Ja(e,"DELETE",n,r,i,t)})}var mO=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return v(this,null,function*(){var e=this;try{return{data:(yield e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}},sE;sE=Symbol.toStringTag;var vO=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[sE]="BlobDownloadBuilder",this.promise=null}asStream(){return new mO(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return v(this,null,function*(){var e=this;try{return{data:yield(yield e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(xe(n))return{data:null,error:n};throw n}})}},yO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},bO=class{constructor(e,n={},t,r){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=t,this.fetch=im(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,t,r){return v(this,null,function*(){var i=this;try{let o,s=$($({},iE),r),a=$($({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=t,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=$($({},a),r.headers));let l=i._removeEmptyFolders(n),u=i._getFinalPath(l),d=yield(e=="PUT"?rm:mn)(i.fetch,`${i.url}/object/${u}`,o,$({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(xe(o))return{data:null,error:o};throw o}})}upload(e,n,t){return v(this,null,function*(){return this.uploadOrUpdate("POST",e,n,t)})}uploadToSignedUrl(e,n,t,r){return v(this,null,function*(){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let c,l=$({upsert:iE.upsert},r),u=$($({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&t instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",t)):typeof FormData<"u"&&t instanceof FormData?(c=t,c.append("cacheControl",l.cacheControl)):(c=t,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{data:{path:o,fullPath:(yield rm(i.fetch,a.toString(),c,{headers:u})).Key},error:null}}catch(c){if(i.shouldThrowOnError)throw c;if(xe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return v(this,null,function*(){var t=this;try{let r=t._getFinalPath(e),i=$({},t.headers);n?.upsert&&(i["x-upsert"]="true");let o=yield mn(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(t.url+o.url),a=s.searchParams.get("token");if(!a)throw new ad("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}update(e,n,t){return v(this,null,function*(){return this.uploadOrUpdate("PUT",e,n,t)})}move(e,n,t){return v(this,null,function*(){var r=this;try{return{data:yield mn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:n,destinationBucket:t?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}copy(e,n,t){return v(this,null,function*(){var r=this;try{return{data:{path:(yield mn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:n,destinationBucket:t?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,t){return v(this,null,function*(){var r=this;try{let i=r._getFinalPath(e),o=yield mn(r.fetch,`${r.url}/object/sign/${i}`,$({expiresIn:n},t?.transform?{transform:t.transform}:{}),{headers:r.headers}),s=t?.download?`&download=${t.download===!0?"":t.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,t){return v(this,null,function*(){var r=this;try{let i=yield mn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:n,paths:e},{headers:r.headers}),o=t?.download?`&download=${t.download===!0?"":t.download}`:"";return{data:i.map(s=>$($({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}download(e,n){let t=typeof n?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(n?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>Qa(this.fetch,`${this.url}/${t}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new vO(s,this.shouldThrowOnError)}info(e){return v(this,null,function*(){var n=this;let t=n._getFinalPath(e);try{return{data:nm(yield Qa(n.fetch,`${n.url}/object/info/${t}`,{headers:n.headers})),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}exists(e){return v(this,null,function*(){var n=this;let t=n._getFinalPath(e);try{return yield gO(n.fetch,`${n.url}/object/${t}`,{headers:n.headers}),{data:!0,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(xe(r)&&r instanceof tm){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){let t=this._getFinalPath(e),r=[],i=n?.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&r.push(i);let o=typeof n?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(n?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${a}`)}}}remove(e){return v(this,null,function*(){var n=this;try{return{data:yield om(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}list(e,n,t){return v(this,null,function*(){var r=this;try{let i=$($($({},yO),n),{},{prefix:e||""});return{data:yield mn(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},t),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}listV2(e,n){return v(this,null,function*(){var t=this;try{let r=$({},e);return{data:yield mn(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},n),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}},aE="2.91.0",cE={"X-Client-Info":`storage-js/${aE}`},_O=class{constructor(e,n={},t,r){this.shouldThrowOnError=!1;let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=$($({},cE),n),this.fetch=im(t)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return v(this,null,function*(){var n=this;try{let t=n.listBucketOptionsToQueryString(e);return{data:yield Qa(n.fetch,`${n.url}/bucket${t}`,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}getBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield Qa(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}createBucket(t){return v(this,arguments,function*(e,n={public:!1}){var r=this;try{return{data:yield mn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(xe(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return v(this,null,function*(){var t=this;try{return{data:yield rm(t.fetch,`${t.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield mn(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield om(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){let n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},wO=class{constructor(e,n={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=$($({},cE),n),this.fetch=im(t)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield mn(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}listBuckets(e){return v(this,null,function*(){var n=this;try{let t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);let r=t.toString(),i=r?`${n.url}/bucket?${r}`:`${n.url}/bucket`;return{data:yield Qa(n.fetch,i,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield om(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(xe(t))return{data:null,error:t};throw t}})}from(e){var n=this;if(!lO(e))throw new ad("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let t=new nE({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>v(this,null,function*(){return n.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(i,o){let s=i[o];return typeof s!="function"?s:(...a)=>v(null,null,function*(){try{return{data:yield s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}},sm={"X-Client-Info":`storage-js/${aE}`,"Content-Type":"application/json"},lE=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var em=class extends lE{constructor(e,n,t){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},EO=class extends lE{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}};var am=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);var CO=e=>{if(typeof e!="object"||e===null)return!1;let n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var oE=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DO=(e,n,t)=>v(null,null,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!t?.noResolveJson){let r=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{let s=o?.statusCode||o?.code||r+"";n(new em(oE(o),r,s))}).catch(()=>{let o=r+"";n(new em(i.statusText||`HTTP ${r} error`,r,o))});else{let o=r+"";n(new em(i.statusText||`HTTP ${r} error`,r,o))}}else n(new EO(oE(e),e))}),SO=(e,n,t,r)=>{let i={method:e,headers:n?.headers||{}};return e==="GET"||!r?i:(CO(r)?(i.headers=$({"Content-Type":"application/json"},n?.headers),i.body=JSON.stringify(r)):i.body=r,$($({},i),t))};function xO(e,n,t,r,i,o){return v(this,null,function*(){return new Promise((s,a)=>{e(t,SO(n,r,i,o)).then(c=>{if(!c.ok)throw c;if(r?.noResolveJson)return c;let l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>DO(c,a,r))})})}function Ht(e,n,t,r,i){return v(this,null,function*(){return xO(e,"POST",n,r,i,t)})}var IO=class{constructor(e,n={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=$($({},sm),n),this.fetch=am(t)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return v(this,null,function*(){var n=this;try{return{data:(yield Ht(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers}))||{},error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getIndex(e,n){return v(this,null,function*(){var t=this;try{return{data:yield Ht(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}listIndexes(e){return v(this,null,function*(){var n=this;try{return{data:yield Ht(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}deleteIndex(e,n){return v(this,null,function*(){var t=this;try{return{data:(yield Ht(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ut(r))return{data:null,error:r};throw r}})}},TO=class{constructor(e,n={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=$($({},sm),n),this.fetch=am(t)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return v(this,null,function*(){var n=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ht(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers}))||{},error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getVectors(e){return v(this,null,function*(){var n=this;try{return{data:yield Ht(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}listVectors(e){return v(this,null,function*(){var n=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ht(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}queryVectors(e){return v(this,null,function*(){var n=this;try{return{data:yield Ht(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}deleteVectors(e){return v(this,null,function*(){var n=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ht(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers}))||{},error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}},MO=class{constructor(e,n={},t){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=$($({},sm),n),this.fetch=am(t)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return v(this,null,function*(){var n=this;try{return{data:(yield Ht(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers}))||{},error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}getBucket(e){return v(this,null,function*(){var n=this;try{return{data:yield Ht(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}listBuckets(){return v(this,arguments,function*(e={}){var n=this;try{return{data:yield Ht(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}deleteBucket(e){return v(this,null,function*(){var n=this;try{return{data:(yield Ht(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers}))||{},error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}})}},AO=class e extends MO{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new RO(this.url,this.headers,n,this.fetch)}createBucket(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"createBucket"),r=this;return t().call(r,n)})}getBucket(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"getBucket"),r=this;return t().call(r,n)})}listBuckets(){return v(this,arguments,function*(n={}){var t=()=>wt(e.prototype,this,"listBuckets"),r=this;return t().call(r,n)})}deleteBucket(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"deleteBucket"),r=this;return t().call(r,n)})}},RO=class e extends IO{constructor(n,t,r,i){super(n,t,i),this.vectorBucketName=r}createIndex(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"createIndex"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName}))})}listIndexes(){return v(this,arguments,function*(n={}){var t=()=>wt(e.prototype,this,"listIndexes"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName}))})}getIndex(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"getIndex"),r=this;return t().call(r,r.vectorBucketName,n)})}deleteIndex(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"deleteIndex"),r=this;return t().call(r,r.vectorBucketName,n)})}index(n){return new kO(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},kO=class e extends TO{constructor(n,t,r,i,o){super(n,t,o),this.vectorBucketName=r,this.indexName=i}putVectors(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"putVectors"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}getVectors(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"getVectors"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}listVectors(){return v(this,arguments,function*(n={}){var t=()=>wt(e.prototype,this,"listVectors"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}queryVectors(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"queryVectors"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}deleteVectors(n){return v(this,null,function*(){var t=()=>wt(e.prototype,this,"deleteVectors"),r=this;return t().call(r,$($({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}},uE=class extends _O{constructor(e,n={},t,r){super(e,n,t,r)}from(e){return new bO(this.url,this.headers,e,this.fetch)}get vectors(){return new AO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wO(this.url+"/iceberg",this.headers,this.fetch)}};var cd="2.91.0";var Ni=30*1e3,ld=3,ud=ld*Ni,dE="http://localhost:9999",fE="supabase.auth.token";var hE={"X-Client-Info":`gotrue-js/${cd}`};var Xa="X-Supabase-Api-Version",cm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gE=600*1e3;var Pr=class extends Error{constructor(n,t,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function P(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var dd=class extends Pr{constructor(n,t,r){super(n,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function mE(e){return P(e)&&e.name==="AuthApiError"}var Qt=class extends Pr{constructor(n,t){super(n),this.name="AuthUnknownError",this.originalError=t}},vn=class extends Pr{constructor(n,t,r,i){super(n,r,i),this.name=t,this.status=r}},st=class extends vn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function vE(e){return P(e)&&e.name==="AuthSessionMissingError"}var sr=class extends vn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Pi=class extends vn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}},Fi=class extends vn{constructor(n,t=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function yE(e){return P(e)&&e.name==="AuthImplicitGrantRedirectError"}var ec=class extends vn{constructor(n,t=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},fd=class extends vn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var is=class extends vn{constructor(n,t){super(n,"AuthRetryableFetchError",t,void 0)}};function hd(e){return P(e)&&e.name==="AuthRetryableFetchError"}var tc=class extends vn{constructor(n,t,r){super(n,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Li=class extends vn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}};var pd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bE=` 	
\r=`.split(""),OO=(()=>{let e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<bE.length;n+=1)e[bE[n].charCodeAt(0)]=-2;for(let n=0;n<pd.length;n+=1)e[pd[n].charCodeAt(0)]=n;return e})();function _E(e,n,t){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){let r=n.queue>>n.queuedBits-6&63;t(pd[r]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){let r=n.queue>>n.queuedBits-6&63;t(pd[r]),n.queuedBits-=6}}function wE(e,n,t){let r=OO[e];if(r>-1)for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)t(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lm(e){let n=[],t=s=>{n.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{FO(s,r,t)};for(let s=0;s<e.length;s+=1)wE(e.charCodeAt(s),i,o);return n.join("")}function NO(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function PO(e,n){for(let t=0;t<e.length;t+=1){let r=e.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}NO(r,n)}}function FO(e,n,t){if(n.utf8seq===0){if(e<=127){t(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){n.utf8seq=r;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&t(n.codepoint)}}function Fr(e){let n=[],t={queue:0,queuedBits:0},r=i=>{n.push(i)};for(let i=0;i<e.length;i+=1)wE(e.charCodeAt(i),t,r);return new Uint8Array(n)}function EE(e){let n=[];return PO(e,t=>n.push(t)),new Uint8Array(n)}function ar(e){let n=[],t={queue:0,queuedBits:0},r=i=>{n.push(i)};return e.forEach(i=>_E(i,t,r)),_E(null,t,r),n.join("")}function CE(e){return Math.round(Date.now()/1e3)+e}function DE(){return Symbol("auth-callback")}var We=()=>typeof window<"u"&&typeof document<"u",ji={tested:!1,writable:!1},gd=()=>{if(!We())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ji.tested)return ji.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ji.tested=!0,ji.writable=!0}catch{ji.tested=!0,ji.writable=!1}return ji.writable};function SE(e){let n={},t=new URL(e);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{n[o]=i})}catch{}return t.searchParams.forEach((r,i)=>{n[i]=r}),n}var md=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),xE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bi=(e,n,t)=>v(null,null,function*(){yield e.setItem(n,JSON.stringify(t))}),Lr=(e,n)=>v(null,null,function*(){let t=yield e.getItem(n);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),tt=(e,n)=>v(null,null,function*(){yield e.removeItem(n)}),nc=class e{constructor(){this.promise=new e.promiseConstructor((n,t)=>{this.resolve=n,this.reject=t})}};nc.promiseConstructor=Promise;function vd(e){let n=e.split(".");if(n.length!==3)throw new Li("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!pE.test(n[r]))throw new Li("JWT not in base64url format");return{header:JSON.parse(lm(n[0])),payload:JSON.parse(lm(n[1])),signature:Fr(n[2]),raw:{header:n[0],payload:n[1]}}}function IE(e){return v(this,null,function*(){return yield new Promise(n=>{setTimeout(()=>n(null),e)})})}function TE(e,n){return new Promise((r,i)=>{v(null,null,function*(){for(let o=0;o<1/0;o++)try{let s=yield e(o);if(!n(o,null,s)){r(s);return}}catch(s){if(!n(o,s)){i(s);return}}})})}function LO(e){return("0"+e.toString(16)).substr(-2)}function jO(){let n=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(n),Array.from(n,LO).join("")}function BO(e){return v(this,null,function*(){let t=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")})}function $O(e){return v(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let t=yield BO(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function $i(e,n,t=!1){return v(this,null,function*(){let r=jO(),i=r;t&&(i+="/PASSWORD_RECOVERY"),yield Bi(e,`${n}-code-verifier`,i);let o=yield $O(r);return[o,r===o?"plain":"s256"]})}var VO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ME(e){let n=e.headers.get(Xa);if(!n||!n.match(VO))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function AE(e){if(!e)throw new Error("Missing exp claim");let n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function RE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var UO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vi(e){if(!UO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yd(){let e={};return new Proxy(e,{get:(n,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){let r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kE(e,n){return new Proxy(e,{get:(t,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,i)}return!n.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(t,r,i)}})}function um(e){return JSON.parse(JSON.stringify(e))}var Ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),HO=[502,503,504];function OE(e){return v(this,null,function*(){var n;if(!xE(e))throw new is(Ui(e),0);if(HO.includes(e.status))throw new is(Ui(e),e.status);let t;try{t=yield e.json()}catch(o){throw new Qt(Ui(o),o)}let r,i=ME(e);if(i&&i.getTime()>=cm["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new tc(Ui(t),e.status,((n=t.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(r==="session_not_found")throw new st}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new tc(Ui(t),e.status,t.weak_password.reasons);throw new dd(Ui(t),e.status||500,r)})}var zO=(e,n,t,r)=>{let i={method:e,headers:n?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function j(e,n,t,r){return v(this,null,function*(){var i;let o=Object.assign({},r?.headers);o[Xa]||(o[Xa]=cm["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield WO(e,n,t+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function WO(e,n,t,r,i,o){return v(this,null,function*(){let s=zO(n,r,i,o),a;try{a=yield e(t,Object.assign({},s))}catch(c){throw console.error(c),new is(Ui(c),0)}if(a.ok||(yield OE(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield OE(c)}})}function Jt(e){var n;let t=null;qO(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=CE(e.expires_in)));let r=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:t,user:r},error:null}}function dm(e){let n=Jt(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Pn(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function NE(e){return{data:e,error:null}}function PE(e){let{action_link:n,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o}=e,s=ti(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:n,email_otp:t,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function fm(e){return e}function qO(e){return e.access_token&&e.refresh_token&&e.expires_in}var bd=["global","local","others"];var os=class{constructor({url:n="",headers:t={},fetch:r}){this.url=n,this.headers=t,this.fetch=md(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return v(this,arguments,function*(n,t=bd[0]){if(bd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bd.join(", ")}`);try{return yield j(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(P(i))return{data:null,error:i};throw i}})}inviteUserByEmail(r){return v(this,arguments,function*(n,t={}){try{return yield j(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Pn})}catch(i){if(P(i))return{data:{user:null},error:i};throw i}})}generateLink(n){return v(this,null,function*(){try{let{options:t}=n,r=ti(n,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:PE,redirectTo:t?.redirectTo})}catch(t){if(P(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(n){return v(this,null,function*(){try{return yield j(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Pn})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}})}listUsers(n){return v(this,null,function*(){var t,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=n?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=n?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:fm});if(u.error)throw u.error;let d=yield u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(P(l))return{data:{users:[]},error:l};throw l}})}getUserById(n){return v(this,null,function*(){Vi(n);try{return yield j(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Pn})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}})}updateUserById(n,t){return v(this,null,function*(){Vi(n);try{return yield j(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:t,headers:this.headers,xform:Pn})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}})}deleteUser(n,t=!1){return v(this,null,function*(){Vi(n);try{return yield j(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:t},xform:Pn})}catch(r){if(P(r))return{data:{user:null},error:r};throw r}})}_listFactors(n){return v(this,null,function*(){Vi(n.userId);try{let{data:t,error:r}=yield j(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(P(t))return{data:null,error:t};throw t}})}_deleteFactor(n){return v(this,null,function*(){Vi(n.userId),Vi(n.id);try{return{data:yield j(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}})}_listOAuthClients(n){return v(this,null,function*(){var t,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield j(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=n?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=n?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:fm});if(u.error)throw u.error;let d=yield u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(P(l))return{data:{clients:[]},error:l};throw l}})}_createOAuthClient(n){return v(this,null,function*(){try{return yield j(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}_getOAuthClient(n){return v(this,null,function*(){try{return yield j(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}_updateOAuthClient(n,t){return v(this,null,function*(){try{return yield j(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(P(r))return{data:null,error:r};throw r}})}_deleteOAuthClient(n){return v(this,null,function*(){try{return yield j(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}})}_regenerateOAuthClientSecret(n){return v(this,null,function*(){try{return yield j(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}};function hm(e={}){return{getItem:n=>e[n]||null,setItem:(n,t)=>{e[n]=t},removeItem:n=>{delete e[n]}}}var Hi={debug:!!(globalThis&&gd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},rc=class extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}},_d=class extends rc{};function pm(e,n,t){return v(this,null,function*(){Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);let r=new globalThis.AbortController;return n>0&&setTimeout(()=>{r.abort(),Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>v(null,null,function*(){if(i){Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return yield t()}finally{Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(n===0)throw Hi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _d(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hi.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}function FE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gm(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function LE(e){return parseInt(e,16)}function jE(e){let n=new TextEncoder().encode(e);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}function BE(e){var n;let{chainId:t,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=gm(e.address),p=u?`${u}://${r}`:r,g=e.statement?`${e.statement}
`:"",m=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`,y=`URI: ${d}
Version: ${h}
Chain ID: ${t}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),c&&(y+=`
Request ID: ${c}`),l){let _=`
Resources:`;for(let w of l){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);_+=`
- ${w}`}y+=_}return`${m}
${y}`}var Ie=class extends Error{constructor({message:n,code:t,cause:r,name:i}){var o;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}},zi=class extends Ie{constructor(n,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:n}),this.name="WebAuthnUnknownError",this.originalError=t}};function $E({error:e,options:n}){var t,r,i;let{publicKey:o}=n;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(mm(s)){if(o.rp.id!==s)return new Ie({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function VE({error:e,options:n}){let{publicKey:t}=n;if(!t)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ie({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(mm(r)){if(t.rpId!==r)return new Ie({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var vm=class{createNewAbortSignal(){if(this.controller){let t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}let n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){let n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}},GO=new vm;function HE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:n,user:t,excludeCredentials:r}=e,i=ti(e,["challenge","user","excludeCredentials"]),o=Fr(n).buffer,s=Object.assign(Object.assign({},t),{id:Fr(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Fr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function zE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:n,allowCredentials:t}=e,r=ti(e,["challenge","allowCredentials"]),i=Fr(n).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let s=0;s<t.length;s++){let a=t[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Fr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function WE(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let t=e;return{id:e.id,rawId:e.id,response:{attestationObject:ar(new Uint8Array(e.response.attestationObject)),clientDataJSON:ar(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=t.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function qE(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let t=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ar(new Uint8Array(i.authenticatorData)),clientDataJSON:ar(new Uint8Array(i.clientDataJSON)),signature:ar(new Uint8Array(i.signature)),userHandle:i.userHandle?ar(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(n=t.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function mm(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function UE(){var e,n;return!!(We()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}function KO(e){return v(this,null,function*(){try{let n=yield navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new zi("Browser returned unexpected credential type",n)}:{data:null,error:new zi("Empty credential response",n)}}catch(n){return{data:null,error:$E({error:n,options:e})}}})}function YO(e){return v(this,null,function*(){try{let n=yield navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new zi("Browser returned unexpected credential type",n)}:{data:null,error:new zi("Empty credential response",n)}}catch(n){return{data:null,error:VE({error:n,options:e})}}})}var ZO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},QO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wd(...e){let n=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(t(s))r[o]=s;else if(n(s)){let a=r[o];n(a)?r[o]=wd(a,s):r[o]=wd(s)}else r[o]=s}return r}function JO(e,n){return wd(ZO,e,n||{})}function XO(e,n){return wd(QO,e,n||{})}var Ed=class{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(n){return v(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))})}_challenge(s,a){return v(this,arguments,function*({factorId:n,webauthn:t,friendlyName:r,signal:i},o){try{let{data:c,error:l}=yield this.client.mfa.challenge({factorId:n,webauthn:t});if(!c)return{data:null,error:l};let u=i??GO.createNewAbortSignal();if(c.webauthn.type==="create"){let{user:d}=c.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(c.webauthn.type){case"create":{let d=JO(c.webauthn.credential_options.publicKey,o?.create),{data:h,error:f}=yield KO({publicKey:d,signal:u});return h?{data:{factorId:n,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{let d=XO(c.webauthn.credential_options.publicKey,o?.request),{data:h,error:f}=yield YO(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:n,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(c){return P(c)?{data:null,error:c}:{data:null,error:new Qt("Unexpected error in challenge",c)}}})}_verify(i){return v(this,arguments,function*({challengeId:n,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:n,webauthn:r})})}_authenticate(s,a){return v(this,arguments,function*({factorId:n,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new Pr("rpId is required for WebAuthn authentication")};try{if(!UE())return{data:null,error:new Qt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this.challenge({factorId:n,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:l};let{webauthn:u}=c;return this._verify({factorId:n,challengeId:c.challengeId,webauthn:{type:u.type,rpId:t,rpOrigins:r,credential_response:u.credential_response}})}catch(c){return P(c)?{data:null,error:c}:{data:null,error:new Qt("Unexpected error in authenticate",c)}}})}_register(s,a){return v(this,arguments,function*({friendlyName:n,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!t)return{data:null,error:new Pr("rpId is required for WebAuthn registration")};try{if(!UE())return{data:null,error:new Qt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this._enroll({friendlyName:n});if(!c)return yield this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===n&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};let{data:u,error:d}=yield this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:c.id,challengeId:u.challengeId,webauthn:{rpId:t,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(c){return P(c)?{data:null,error:c}:{data:null,error:new Qt("Unexpected error in register",c)}}})}};FE();var eN={url:dE,storageKey:fE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function GE(e,n,t){return v(this,null,function*(){return yield t()})}var ss={},tN=(()=>{class e{get jwks(){var t,r;return(r=(t=ss[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ss[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ss[this.storageKey]=Object.assign(Object.assign({},ss[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},eN),t);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&We()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new os({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=md(s.fetch),this.lock=s.lock||GE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&We()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=pm:this.lock=GE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ed(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:gd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hm(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=hm(this.memoryStorage)),We()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",a=>v(this,null,function*(){this._debug("received broadcast notification from other tab or client",a),yield this._notifyAllSubscribers(a.data.event,a.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cd}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return v(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=v(this,null,function*(){return yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return v(this,null,function*(){var t;try{let r={},i="none";if(We()&&(r=SE(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce")),We()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=yield this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),yE(s)){let l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>v(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return P(r)?this._returnResult({error:r}):this._returnResult({error:new Qt("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return v(this,null,function*(){var r,i,o;try{let s=yield j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Jt}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signUp(t){return v(this,null,function*(){var r,i,o;try{let s;if("email"in t){let{email:d,password:h,options:f}=t,p=null,g=null;this.flowType==="pkce"&&([p,g]=yield $i(this.storage,this.storageKey)),s=yield j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Jt})}else if("phone"in t){let{phone:d,password:h,options:f}=t;s=yield j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Jt})}else throw new Pi("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return yield tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signInWithPassword(t){return v(this,null,function*(){try{let r;if("email"in t){let{email:s,password:a,options:c}=t;r=yield j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:dm})}else if("phone"in t){let{phone:s,password:a,options:c}=t;r=yield j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:dm})}else throw new Pi("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new sr;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(t){return v(this,null,function*(){var r,i,o,s;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(t){return v(this,null,function*(){return yield this.initializePromise,this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return v(this,null,function*(){let{chain:r}=t;switch(r){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(t){return v(this,null,function*(){var r,i,o,s,a,c,l,u,d,h,f;let p,g;if("message"in t)p=t.message,g=t.signature;else{let{chain:m,wallet:y,statement:_,options:w}=t,E;if(We())if(typeof y=="object")E=y;else{let B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")E=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=y}let C=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href),S=yield E.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let x=gm(S[0]),R=(i=w?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!R){let B=yield E.request({method:"eth_chainId"});R=LE(B)}let N={domain:C.host,address:x,statement:_,uri:C.href,version:"1",chainId:R,nonce:(o=w?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=w?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=w?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=w?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=BE(N),g=yield E.request({method:"personal_sign",params:[jE(p),x]})}try{let{data:m,error:y}=yield j(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Jt});if(y)throw y;if(!m||!m.session||!m.user){let _=new sr;return this._returnResult({data:{user:null,session:null},error:_})}return m.session&&(yield this._saveSession(m.session),yield this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(P(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}})}signInWithSolana(t){return v(this,null,function*(){var r,i,o,s,a,c,l,u,d,h,f,p;let g,m;if("message"in t)g=t.message,m=t.signature;else{let{chain:y,wallet:_,statement:w,options:E}=t,C;if(We())if(typeof _=="object")C=_;else{let x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))C=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=_}let S=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){let x=yield C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null)),R;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")R=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)R=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)g=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),m=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${S.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(o=(i=E?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=E?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((a=E?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(d=E?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);let x=yield C.signMessage(new TextEncoder().encode(g),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=x}}try{let{data:y,error:_}=yield j(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ar(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Jt});if(_)throw _;if(!y||!y.session||!y.user){let w=new sr;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(yield this._saveSession(y.session),yield this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:_})}catch(y){if(P(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}})}_exchangeCodeForSession(t){return v(this,null,function*(){let r=yield Lr(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new fd;let{data:s,error:a}=yield j(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Jt});if(yield tt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new sr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(yield this._saveSession(s.session),setTimeout(()=>v(this,null,function*(){yield this._notifyAllSubscribers("SIGNED_IN",s.session)}),0)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}})}signInWithIdToken(t){return v(this,null,function*(){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=t,c=yield j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Jt}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new sr;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(t){return v(this,null,function*(){var r,i,o,s,a;try{if("email"in t){let{email:c,options:l}=t,u=null,d=null;this.flowType==="pkce"&&([u,d]=yield $i(this.storage,this.storageKey));let{error:h}=yield j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){let{phone:c,options:l}=t,{data:u,error:d}=yield j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Pi("You must provide either an email or phone number.")}catch(c){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}verifyOtp(t){return v(this,null,function*(){var r,i;try{let o,s;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=yield j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Jt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(P(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return v(this,null,function*(){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=yield $i(this.storage,this.storageKey));let u=yield j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:NE});return!((s=u.data)===null||s===void 0)&&s.url&&We()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(c))return this._returnResult({data:null,error:c});throw c}})}reauthenticate(){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return v(this,null,function*(){try{return yield this._useSession(t=>v(this,null,function*(){let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new st;let{error:o}=yield j(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(P(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return v(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:o,options:s}=t,{error:a}=yield j(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){let{phone:i,type:o,options:s}=t,{data:a,error:c}=yield j(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Pi("You must provide either an email or phone number and a type")}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return this._useSession(r=>v(this,null,function*(){return r}))}))})}_acquireLock(t,r){return v(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=v(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(v(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>v(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(v(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return v(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return v(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield Lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<ud:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let a=yield Lr(this.userStorage,this.storageKey+"-user");a?.user?t.user=a.user:t.user=yd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};t.user=kE(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return v(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;let r=yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._getUser()}));return r.data.user&&(this.suppressGetSessionWarning=!0),r})}_getUser(t){return v(this,null,function*(){try{return t?yield j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Pn}):yield this._useSession(r=>v(this,null,function*(){var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:yield j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Pn})}))}catch(r){if(P(r))return vE(r)&&(yield this._removeSession(),yield tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(i){return v(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(i){return v(this,arguments,function*(t,r={}){try{return yield this._useSession(o=>v(this,null,function*(){let{data:s,error:a}=o;if(a)throw a;if(!s.session)throw new st;let c=s.session,l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=yield $i(this.storage,this.storageKey));let{data:d,error:h}=yield j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:Pn});if(h)throw h;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})}))}catch(o){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return v(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new st;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=vd(t.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=yield this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(P(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(t){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i;if(!t){let{data:a,error:c}=r;if(c)throw c;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new st;let{data:o,error:s}=yield this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(P(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(t,r){return v(this,null,function*(){try{if(!We())throw new Fi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ec("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ec("No code detected.");let{data:w,error:E}=yield this._exchangeCodeForSession(t.code);if(E)throw E;let C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:w.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=t;if(!s||!c||!a||!u)throw new Fi("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let p=f-d;p*1e3<=Ni&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);let{data:m,error:y}=yield this._getUser(s);if(y)throw y;let _={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:t.type},error:null})}catch(i){if(P(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return v(this,null,function*(){let r=yield Lr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return v(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return v(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>v(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=yield this.admin.signOut(a,t);if(c&&!(mE(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(yield this._removeSession(),yield tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){let r=DE(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),v(this,null,function*(){yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(t){return v(this,null,function*(){return yield this._useSession(r=>v(this,null,function*(){var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}}))})}resetPasswordForEmail(i){return v(this,arguments,function*(t,r={}){let o=null,s=null;this.flowType==="pkce"&&([o,s]=yield $i(this.storage,this.storageKey,!0));try{return yield j(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(a))return this._returnResult({data:null,error:a});throw a}})}getUserIdentities(){return v(this,null,function*(){var t;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(t){return v(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return v(this,null,function*(){var r;try{let{data:i,error:o}=yield this._useSession(s=>v(this,null,function*(){var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let p=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield j(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(o)throw o;return We()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:t.provider,url:i?.url},error:null})}catch(i){if(P(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}})}linkIdentityIdToken(t){return v(this,null,function*(){return yield this._useSession(r=>v(this,null,function*(){var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=t,h=yield j(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Jt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new sr}):(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(yield tt(this.storage,`${this.storageKey}-code-verifier`),P(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)throw a;return yield j(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(t){return v(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield TE(o=>v(this,null,function*(){return o>0&&(yield IE(200*Math.pow(2,o-1))),this._debug(r,"refreshing attempt",o),yield j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Jt})}),(o,s)=>{let a=200*Math.pow(2,o);return s&&hd(s)&&Date.now()+a-i<Ni})}catch(i){if(this._debug(r,"error",i),P(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return v(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),We()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})}_recoverAndRefresh(){return v(this,null,function*(){var t,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=yield Lr(this.storage,this.storageKey);if(o&&this.userStorage){let a=yield Lr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},yield Bi(this.userStorage,this.storageKey+"-user",a)),o.user=(t=a?.user)!==null&&t!==void 0?t:yd()}else if(o&&!o.user&&!o.user){let a=yield Lr(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,yield tt(this.storage,this.storageKey+"-user"),yield Bi(this.storage,this.storageKey,o)):o.user=yd()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&(yield this._removeSession());return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ud;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${ud}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=yield this._callRefreshToken(o.refresh_token);a&&(console.error(a),hd(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=yield this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}})}_callRefreshToken(t){return v(this,null,function*(){var r,i;if(!t)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new nc;let{data:s,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!s.session)throw new st;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),P(s)){let a={data:null,error:s};return hd(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,r,i=!0){return v(this,null,function*(){let o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>v(this,null,function*(){try{yield c.callback(t,r)}catch(l){s.push(l)}}));if(yield Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return v(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield tt(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&(yield Bi(this.userStorage,this.storageKey+"-user",{user:r.user}));let o=Object.assign({},r);delete o.user;let s=um(o);yield Bi(this.storage,this.storageKey,s)}else{let o=um(r);yield Bi(this.storage,this.storageKey,o)}})}_removeSession(){return v(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield tt(this.storage,this.storageKey),yield tt(this.storage,this.storageKey+"-code-verifier"),yield tt(this.storage,this.storageKey+"-user"),this.userStorage&&(yield tt(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&We()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return v(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Ni);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);let r=setTimeout(()=>v(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)})}_stopAutoRefresh(){return v(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)})}startAutoRefresh(){return v(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return v(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return v(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>v(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>v(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-t)/Ni);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Ni}ms, refresh threshold is ${ld} ticks`),o<=ld&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof rc)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return v(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!We()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>v(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return v(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,i){return v(this,null,function*(){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=yield $i(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):yield j(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:l,error:u}=yield j(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}_verify(t){return v(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?WE(t.webauthn.credential_response):qE(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:l}=yield j(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(t){return v(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=yield j(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:HE(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:zE(c.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(t){return v(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return v(this,null,function*(){var t;let{data:{user:r},error:i}=yield this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return v(this,null,function*(){var t,r;let{data:{session:i},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=vd(i.access_token),a=null;s.aal&&(a=s.aal);let c=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");let u=s.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}})}_getAuthorizationDetails(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?yield j(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new st})}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(t,r){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new st});let a=yield j(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&We()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(P(i))return this._returnResult({data:null,error:i});throw i}})}_denyAuthorization(t,r){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new st});let a=yield j(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&We()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(i){if(P(i))return this._returnResult({data:null,error:i});throw i}})}_listOAuthGrants(){return v(this,null,function*(){try{return yield this._useSession(t=>v(this,null,function*(){let{data:{session:r},error:i}=t;return i?this._returnResult({data:null,error:i}):r?yield j(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new st})}))}catch(t){if(P(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return v(this,null,function*(){try{return yield this._useSession(r=>v(this,null,function*(){let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(yield j(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new st})}))}catch(r){if(P(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(i){return v(this,arguments,function*(t,r={keys:[]}){let o=r.keys.find(l=>l.kid===t);if(o)return o;let s=Date.now();if(o=this.jwks.keys.find(l=>l.kid===t),o&&this.jwks_cached_at+gE>s)return o;let{data:a,error:c}=yield j(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,o=a.keys.find(l=>l.kid===t),!o)?null:o})}getClaims(i){return v(this,arguments,function*(t,r={}){try{let o=t;if(!o){let{data:g,error:m}=yield this.getSession();if(m||!g.session)return this._returnResult({data:null,error:m});o=g.session.access_token}let{header:s,payload:a,signature:c,raw:{header:l,payload:u}}=vd(o);r?.allowExpired||AE(a.exp);let d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){let{error:g}=yield this.getUser(o);if(g)throw g;return{data:{claims:a,header:s,signature:c},error:null}}let h=RE(s.alg),f=yield crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!(yield crypto.subtle.verify(h,f,c,EE(`${l}.${u}`))))throw new Li("Invalid JWT signature");return{data:{claims:a,header:s,signature:c},error:null}}catch(o){if(P(o))return this._returnResult({data:null,error:o});throw o}})}}return e.nextInstanceID={},e})(),ym=tN;var nN=ym,bm=nN;var rN="2.91.0",ic="";typeof Deno<"u"?ic="deno":typeof document<"u"?ic="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ic="react-native":ic="node";var iN={"X-Client-Info":`supabase-js-${ic}/${rN}`},oN={headers:iN},sN={schema:"public"},aN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cN={};function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oc(e)}function lN(e,n){if(oc(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n||"default");if(oc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function uN(e){var n=lN(e,"string");return oc(n)=="symbol"?n:n+""}function dN(e,n,t){return(n=uN(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function KE(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function Ae(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?KE(Object(t),!0).forEach(function(r){dN(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):KE(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var fN=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),hN=()=>Headers,pN=(e,n,t)=>{let r=fN(t),i=hN();return(o,s)=>v(null,null,function*(){var a;let c=(a=yield n())!==null&&a!==void 0?a:e,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,Ae(Ae({},s),{},{headers:l}))})};function gN(e){return e.endsWith("/")?e:e+"/"}function mN(e,n){var t,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:l,realtime:u,global:d}=n,h={db:Ae(Ae({},c),i),auth:Ae(Ae({},l),o),realtime:Ae(Ae({},u),s),storage:{},global:Ae(Ae(Ae({},d),a),{},{headers:Ae(Ae({},(t=d?.headers)!==null&&t!==void 0?t:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>v(null,null,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function vN(e){let n=e?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(gN(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yN=class extends bm{constructor(e){super(e)}},bN=class{constructor(e,n,t){var r,i;this.supabaseUrl=e,this.supabaseKey=n;let o=vN(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:sN,realtime:cN,auth:Ae(Ae({},aN),{},{storageKey:s}),global:oN},c=mN(t??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=pN(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Ae({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new Kw(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new uE(this.storageUrl.href,this.headers,this.fetch,t?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ha(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,t)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return v(this,null,function*(){var e=this,n,t;if(e.accessToken)return yield e.accessToken();let{data:r}=yield e.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:e.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:l},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yN({url:this.authUrl.href,headers:Ae(Ae({},h),u),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ka(this.realtimeUrl.href,Ae(Ae({},e),{},{params:Ae(Ae({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(e,n,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},YE=(e,n,t)=>new bN(e,n,t);function _N(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let n=e.version;if(n==null)return!1;let t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}_N()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var _m={production:!1,supabaseUrl:"https://vazxxdxhpfjmenajawps.supabase.co",supabaseAnonKey:"sb_publishable_GGcsrVmSVlJ2_pr7OfT9lQ_yXnpKg4C"};var zt=YE(_m.supabaseUrl,_m.supabaseAnonKey,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}});function wN(e){return e.reduce((n,t)=>n+t,0)}function as(e){return e.length===0?0:wN(e)/e.length}function Le(e){if(e.length===0)return 0;let n=[...e].sort((r,i)=>r-i),t=Math.floor(n.length/2);return n.length%2===0?(n[t-1]+n[t])/2:n[t]}function wm(e){if(e.length<2)return 0;let n=as(e),t=e.reduce((r,i)=>r+(i-n)**2,0)/(e.length-1);return Math.sqrt(t)}function Fn(e,n){return e.reduce((t,r)=>{let i=n(r);return(t[i]||=[]).push(r),t},{})}function Cd(e,n){return n===0?0:(e/n-1)*100}function ZE(e){return e.slice(0,7)}var Dd="fruver_cache",sc="fruver_cache_timestamp",EN=3600*1e3,Sd=class e{store=new Map;initialized=!1;constructor(){this.loadFromStorage()}touch(){try{localStorage.setItem(sc,Date.now().toString())}catch{}}loadFromStorage(){if(!this.initialized){this.initialized=!0;try{let n=localStorage.getItem(sc);if(!n)return;let t=parseInt(n,10),r=Date.now();if(r-t>EN){localStorage.removeItem(Dd),localStorage.removeItem(sc);return}let i=localStorage.getItem(Dd);if(!i)return;let o=JSON.parse(i),s=0;for(let[a,c]of Object.entries(o))c.expiresAt>r&&(this.store.set(a,{value:c.data,expiresAt:c.expiresAt}),s++);s>0&&this.touch()}catch(n){console.warn("[Cache] Error leyendo localStorage:",n)}}}saveToStorage(){try{let n={},t=Date.now();for(let[r,i]of this.store.entries())i.value!==void 0&&i.expiresAt>t&&(n[r]={expiresAt:i.expiresAt,data:i.value});localStorage.setItem(Dd,JSON.stringify(n)),localStorage.setItem(sc,t.toString())}catch(n){console.warn("[Cache] Error guardando en localStorage:",n)}}get(n){let t=this.store.get(n);if(t){if(Date.now()>t.expiresAt){this.store.delete(n);return}return this.touch(),t.value}}set(n,t,r){this.store.set(n,{value:t,expiresAt:Date.now()+r}),this.saveToStorage()}cached(n,t,r){let i=Date.now(),o=this.store.get(n);if(o){if(o.value!==void 0&&i<=o.expiresAt)return this.touch(),Promise.resolve(o.value);if(o.inFlight&&i<=o.expiresAt)return this.touch(),o.inFlight}let s=r().then(a=>(this.store.set(n,{value:a,expiresAt:Date.now()+t}),this.saveToStorage(),a)).catch(a=>{throw this.store.delete(n),a});return this.store.set(n,{inFlight:s,expiresAt:Date.now()+t}),s}invalidate(n){for(let t of this.store.keys())t.startsWith(n)&&this.store.delete(t);this.saveToStorage()}clear(){this.store.clear(),localStorage.removeItem(Dd),localStorage.removeItem(sc),console.log("[Cache] Cache limpiado completamente.")}static \u0275fac=function(t){return new(t||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};var Xt=3600*1e3,Em=5e3,jr=class e{constructor(n){this.cache=n}parseISODate(n){let t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(n);if(!t)return null;let r=Number(t[1]),i=Number(t[2])-1,o=Number(t[3]),s=new Date(Date.UTC(r,i,o));return Number.isFinite(s.getTime())?s:null}formatISODateUTC(n){let t=n.getUTCFullYear(),r=String(n.getUTCMonth()+1).padStart(2,"0"),i=String(n.getUTCDate()).padStart(2,"0");return`${t}-${r}-${i}`}canastaTotalEnFecha(n,t){return v(this,null,function*(){let{data:r,error:i}=yield zt.from("fruver_data").select("producto,precio_medio").in("producto",n).eq("fecha_inicio",t).limit(5e4);if(i)throw i;let s=Fn(r??[],c=>c.producto),a=0;for(let c of n){let l=(s[c]??[]).map(u=>u.precio_medio).filter(u=>Number.isFinite(u)&&u>0);l.length!==0&&(a+=Le(l))}return Math.round(a)})}fetchAll(n){return v(this,null,function*(){let t=[];for(let r=0;r<500;r++){let i=r*Em,o=i+Em-1,s=yield n(i,o);if(t.push(...s),s.length<Em)break}return t})}getFechaGlobalActual(){return v(this,null,function*(){return this.cache.cached("fechas:global:actual",Xt,()=>v(this,null,function*(){let{data:t,error:r}=yield zt.from("fruver_data").select("fecha_inicio").order("fecha_inicio",{ascending:!1}).limit(1);if(r)throw r;return t?.[0]?.fecha_inicio??""}))})}getCatalogoBasico(){return v(this,null,function*(){return this.cache.cached("catalogo:basico",Xt,()=>v(this,null,function*(){console.log("[FruverData] Cargando cat\xE1logo con DISTINCT ON...");let{data:t,error:r}=yield zt.rpc("get_productos_catalogo");if(r)throw console.error("[FruverData] Error en RPC:",r),r;let i=t??[];return console.log("[FruverData] Productos cargados:",i.length),i.map(o=>({producto:o.producto,grupo_alimentos:o.grupo_alimentos??"desconocido",codigo_grupo:Number(o.codigo_grupo??0),precioActual:o.precio_medio,precioAnterior:o.precio_anterior??null,cambioPct:o.cambio_pct??null,fechaInicio:o.fecha_inicio??""})).sort((o,s)=>o.producto.localeCompare(s.producto))}))})}getProductosDistinct(){return v(this,null,function*(){return this.cache.cached("productos:distinct",Xt,()=>v(this,null,function*(){return(yield this.getCatalogoBasico()).map(r=>r.producto)}))})}getFechasDistintas(n){return v(this,null,function*(){let t=`producto:${n}:fechasDistintas`;return this.cache.cached(t,Xt,()=>v(this,null,function*(){let{data:r,error:i}=yield zt.from("fruver_data").select("fecha_inicio,fecha_final").eq("producto",n).order("fecha_inicio",{ascending:!1}).limit(500);if(i)throw i;let o=new Map;for(let s of r??[])s.fecha_inicio&&!o.has(s.fecha_inicio)&&o.set(s.fecha_inicio,s.fecha_final??s.fecha_inicio);return Array.from(o.entries()).map(([s,a])=>({fecha_inicio:s,fecha_final:a})).sort((s,a)=>a.fecha_inicio.localeCompare(s.fecha_inicio))}))})}getUltimoPeriodo(n){return v(this,null,function*(){let t=n.toLowerCase(),r=`producto:${t}:ultimoPeriodo`;return this.cache.cached(r,Xt,()=>v(this,null,function*(){let i=yield this.getFechasDistintas(t);if(i.length===0)return{fechaInicio:"",fechaFinal:"",rows:[]};let{fecha_inicio:o,fecha_final:s}=i[0],a=yield this.fetchAll((c,l)=>v(this,null,function*(){let{data:u,error:d}=yield zt.from("fruver_data").select("*").eq("producto",t).eq("fecha_inicio",o).order("ciudad",{ascending:!0}).range(c,l);if(d)throw d;return u??[]}));return{fechaInicio:o,fechaFinal:s,rows:a}}))})}getPeriodoAnterior(n){return v(this,null,function*(){let t=n.toLowerCase(),r=`producto:${t}:periodoAnterior`;return this.cache.cached(r,Xt,()=>v(this,null,function*(){let i=yield this.getFechasDistintas(t);if(i.length<2)return{fechaInicio:"",fechaFinal:"",rows:[]};let{fecha_inicio:o,fecha_final:s}=i[1],a=yield this.fetchAll((c,l)=>v(this,null,function*(){let{data:u,error:d}=yield zt.from("fruver_data").select("*").eq("producto",t).eq("fecha_inicio",o).order("ciudad",{ascending:!0}).range(c,l);if(d)throw d;return u??[]}));return{fechaInicio:o,fechaFinal:s,rows:a}}))})}getSerieHistorica(n,t){return v(this,null,function*(){let r=n.toLowerCase(),i=`producto:${r}:serie:${t}`;return this.cache.cached(i,Xt,()=>v(this,null,function*(){let o=t==="1 mes"?20:t==="6 meses"?60:t==="1 a\xF1o"?80:400,{data:s,error:a}=yield zt.from("fruver_data").select("fecha_inicio,precio_medio").eq("producto",r).order("fecha_inicio",{ascending:!1}).limit(o*50);if(a)throw a;let l=Fn(s??[],f=>f.fecha_inicio),u=Object.keys(l).sort((f,p)=>f.localeCompare(p)).map(f=>({label:f,value:Le(l[f].map(p=>p.precio_medio).filter(Number.isFinite))}));if(t!=="max"){let f=t==="1 mes"?4:t==="6 meses"?26:t==="1 a\xF1o"?52:u.length;return u.slice(-f)}let d=Fn(u,f=>ZE(f.label));return Object.keys(d).sort((f,p)=>f.localeCompare(p)).map(f=>({label:f,value:Le(d[f].map(p=>p.value).filter(Number.isFinite))})).slice(-60)}))})}getProductosMismoGrupo(n,t){return v(this,null,function*(){let r=`grupo:${n}:fecha:${t}`;return this.cache.cached(r,Xt,()=>v(this,null,function*(){return yield this.fetchAll((o,s)=>v(this,null,function*(){let{data:a,error:c}=yield zt.from("fruver_data").select("producto,precio_medio").eq("codigo_grupo",n).eq("fecha_inicio",t).order("producto",{ascending:!0}).range(o,s);if(c)throw c;return a??[]}))}))})}getCanastaActual(n){return v(this,null,function*(){return this.cache.cached("canasta:actual",Xt,()=>v(this,null,function*(){let r=yield this.getFechaGlobalActual();if(!r)return{valorTotal:0,productosEncontrados:0,productosUsados:[],fechaInicio:""};let i=n.map(h=>h.toLowerCase().trim()),o=[],s=[],{data:a,error:c}=yield zt.from("fruver_data").select("producto,precio_medio").in("producto",i).eq("fecha_inicio",r).limit(5e4);if(c)throw c;let u=Fn(a??[],h=>h.producto);for(let h of i){let f=(u[h]??[]).map(p=>p.precio_medio).filter(p=>Number.isFinite(p)&&p>0);f.length!==0&&(s.push(h),o.push(Le(f)))}return{valorTotal:o.reduce((h,f)=>h+f,0),productosEncontrados:o.length,productosUsados:s,fechaInicio:r}}))})}getFechasGlobalesDisponibles(){return v(this,null,function*(){return this.cache.cached("fechas:globales:todas",Xt,()=>v(this,null,function*(){let{data:t,error:r}=yield zt.from("fruver_data").select("fecha_inicio").order("fecha_inicio",{ascending:!0}).limit(1e4);if(r)throw r;let i=new Set;for(let s of t??[])s.fecha_inicio&&i.add(s.fecha_inicio);let o=Array.from(i).sort((s,a)=>s.localeCompare(a));return console.log(`[FruverData] Fechas globales disponibles: ${o.length}`,o.slice(-5)),o}))})}getCanastaSerieUltimasSemanas(n,t=13){return v(this,null,function*(){let r=n.map(o=>o.toLowerCase().trim()).filter(Boolean),i=`canasta:serie:${t}:${r.length}`;return this.cache.cached(i,Xt,()=>v(this,null,function*(){if(r.length===0)return[];let o=yield this.getFechasGlobalesDisponibles();if(o.length===0)return console.warn("[FruverData] No hay fechas disponibles en la BD"),[];let s=o.slice(-t);if(console.log(`[FruverData] Cargando serie canasta para ${s.length} fechas:`,s),s.length===0)return[];let{data:a,error:c}=yield zt.from("fruver_data").select("fecha_inicio,producto,precio_medio").in("producto",r).in("fecha_inicio",s).limit(5e5);if(c)throw c;let l=a??[];console.log(`[FruverData] Filas cargadas para serie canasta: ${l.length}`);let u=Fn(l,h=>h.fecha_inicio);return s.map(h=>{let f=u[h]??[],p=Fn(f,m=>m.producto),g=0;for(let m of r){let y=(p[m]??[]).map(_=>_.precio_medio).filter(_=>Number.isFinite(_)&&_>0);y.length!==0&&(g+=Le(y))}return{label:h,value:Math.round(g)}}).filter(h=>h.value>0)}))})}getCanastaBarrasTresMeses(n){return v(this,null,function*(){return this.cache.cached("canasta:barras:3m",Xt,()=>v(this,null,function*(){let r=n.map(E=>E.toLowerCase().trim()).filter(Boolean);if(r.length===0)return{labels:["Actual","Anterior","Hace dos meses"],values:[0,0,0],fechas:[null,null,null]};let{data:i,error:o}=yield zt.from("fruver_data").select("fecha_inicio").order("fecha_inicio",{ascending:!1}).limit(2500);if(o)throw o;let s=Array.from(new Set((i??[]).map(E=>E.fecha_inicio).filter(Boolean))).sort((E,C)=>E.localeCompare(C));if(s.length===0)return{labels:["Actual","Anterior","Hace dos meses"],values:[0,0,0],fechas:[null,null,null]};let a=s[s.length-1],c=this.parseISODate(a);if(!c)return{labels:["Actual","Anterior","Hace dos meses"],values:[0,0,0],fechas:[a,null,null]};let l=E=>{for(let C=s.length-1;C>=0;C--){let S=s[C];if(S.startsWith(E))return S}return null},u=a.slice(0,7),d=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-1,1)),h=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-2,1)),f=`${d.getUTCFullYear()}-${String(d.getUTCMonth()+1).padStart(2,"0")}`,p=`${h.getUTCFullYear()}-${String(h.getUTCMonth()+1).padStart(2,"0")}`,g=l(f),m=l(p),y=yield this.canastaTotalEnFecha(r,a),_=g?yield this.canastaTotalEnFecha(r,g):0,w=m?yield this.canastaTotalEnFecha(r,m):0;return{labels:["Actual","Anterior","Hace dos meses"],values:[y,_,w],fechas:[a,g,m]}}))})}static \u0275fac=function(t){return new(t||e)(Y(Sd))};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};var DN=(e,n)=>n.producto;function SN(e,n){if(e&1){let t=fn();A(0,"li",18),Fo("mousedown",function(){let i=Qe(t).$implicit,o=ee(2);return Je(o.seleccionarProducto(i))}),A(1,"span",19),b(2),I(),A(3,"span",20),b(4),I()()}if(e&2){let t=n.$implicit;M(2),ie(t.producto),M(2),le("$ ",t.precioActual.toLocaleString("es-CO"))}}function xN(e,n){if(e&1&&(A(0,"ul",12),it(1,SN,5,2,"li",null,DN),I()),e&2){let t=ee();M(),ot(t.sugerencias())}}function IN(e,n){if(e&1&&(A(0,"p",13),b(1),I()),e&2){let t=ee();M(),ie(t.searchNotFound())}}function TN(e,n){e&1&&(A(0,"p",14),b(1,"Cargando productos\u2026"),I())}function MN(e,n){if(e&1&&(A(0,"p",14),b(1),I()),e&2){let t=ee();M(),le("",t.productos().length," productos disponibles")}}function AN(e,n){e&1&&(A(0,"p",14),b(1,"Calculando\u2026"),I())}function RN(e,n){if(e&1&&(A(0,"p",14),b(1),I()),e&2){let t=ee();M(),ie(t.canastaError())}}function kN(e,n){if(e&1&&(A(0,"p",17),b(1),I()),e&2){let t=ee();M(),le("$ ",t.canastaValor().toLocaleString("es-CO"))}}var xd=class e{router=k(Or);fruver=k(jr);productosCanasta=X(["acelga","ajo","ahuyama","apio","arveja verde en vaina","berenjena","br\xF3coli","calabaza","cebolla cabezona blanca","cebolla cabezona roja","cebolla junca","ch\xF3colo (mazorca)","coliflor","espinaca","fr\xEDjol verde (cargamanto)","habichuela","lechuga batavia","lechuga crespa","pepino cohombro","piment\xF3n","r\xE1bano rojo","remolacha","repollo blanco","repollo morado","tomate chonto","tomate larga vida (milano)","tomate riogrande","zanahoria","aguacate com\xFAn","aguacate hass","aguacate papelillo","banano criollo","banano urab\xE1","coco","curuba","fresa","granadilla","guayaba pera","lim\xF3n com\xFAn","lim\xF3n tahit\xED","lulo","mandarina","mango com\xFAn","mango tommy","manzana (importada y nacional)","maracuy\xE1","mel\xF3n","mora de castilla","naranja valencia","naranja sweet","papaya maradol","pera","pi\xF1a gold","pi\xF1a perolera","pitahaya","sand\xEDa","tomate de \xE1rbol","uva (isabela, red globe)","arracacha amarilla","arracacha blanca","\xF1ame diamante","\xF1ame espino","papa criolla (amarilla)","papa negra (capira)","papa parda pastusa","papa r-12","papa rub\xED","papa sabanera","papa suprema","papa \xFAnica","pl\xE1tano guineo","pl\xE1tano hart\xF3n maduro","pl\xE1tano hart\xF3n verde","ulluco","yuca chirosa","yuca llanera"]);loading=X(!0);error=X(null);productos=X([]);searchQuery=X("");showSuggestions=X(!1);searchNotFound=X(null);canastaLoading=X(!0);canastaError=X(null);canastaValor=X(0);sugerencias=It(()=>{let n=this.searchQuery().toLowerCase().trim();return!n||n.length<2?[]:this.productos().filter(t=>t.producto.toLowerCase().includes(n)).slice(0,8)});constructor(){this.load(),this.loadCanasta()}load(){return v(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let n=yield this.fruver.getCatalogoBasico();this.productos.set(n)}catch(n){this.error.set(n instanceof Error?n.message:"No se pudo cargar.")}finally{this.loading.set(!1)}})}loadCanasta(){return v(this,null,function*(){this.canastaLoading.set(!0),this.canastaError.set(null);try{let n=yield this.fruver.getCanastaActual(this.productosCanasta());this.canastaValor.set(n.valorTotal)}catch(n){this.canastaError.set(n instanceof Error?n.message:"No se pudo cargar la canasta.")}finally{this.canastaLoading.set(!1)}})}onSearchInput(n){this.searchQuery.set(n),this.showSuggestions.set(n.trim().length>=2),this.searchNotFound.set(null)}buscar(n){let t=(n??"").toLowerCase().trim();if(!t)return;if(this.showSuggestions.set(!1),!this.productos().some(i=>i.producto.toLowerCase()===t)){this.searchNotFound.set(`No encontramos "${n}". Revisa el nombre o prueba con otra b\xFAsqueda.`);return}this.router.navigate(["/producto",t])}seleccionarProducto(n){this.showSuggestions.set(!1),this.searchQuery.set(n.producto),this.router.navigate(["/producto",n.producto.toLowerCase()])}ocultarSugerencias(){setTimeout(()=>this.showSuggestions.set(!1),150)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-home"]],decls:29,vars:5,consts:[["buscador",""],[1,"section","hero-section"],[1,"hero-content"],[1,"hero-text"],[1,"eyebrow"],[1,"lead"],["role","search",1,"search-card"],["for","buscador",1,"field-label"],[1,"search-wrapper"],[1,"search-input"],["id","buscador","type","search","placeholder","\xBFQu\xE9 buscas hoy? Ej. Tomate Chonto","aria-label","Buscar producto","autocomplete","off",3,"input","keydown.enter","blur","value"],[1,"btn","btn-accent",3,"click"],[1,"suggestions-list"],["aria-live","polite",1,"muted"],[1,"muted"],[1,"hero-visual"],[1,"card","canasta-kpi-card"],[1,"canasta-value"],[3,"mousedown"],[1,"suggestion-name"],[1,"suggestion-price"]],template:function(t,r){if(t&1){let i=fn();A(0,"section",1)(1,"div",2)(2,"div",3)(3,"p",4),b(4,"Panel de control de la canasta"),I(),A(5,"h1"),b(6,"Busca, compara y ahorra en tu mercado de confianza."),I(),A(7,"p",5),b(8," Fruver Index reune los precios oficiales del DANE y los acerca a tu barrio. Usa el buscador para entender la tendencia de tus productos favoritos. "),I(),A(9,"div",6)(10,"label",7),b(11,"Buscador de productos"),I(),A(12,"div",8)(13,"div",9)(14,"input",10,0),Fo("input",function(){Qe(i);let s=pa(15);return Je(r.onSearchInput(s.value))})("keydown.enter",function(){Qe(i);let s=pa(15);return Je(r.buscar(s.value))})("blur",function(){return Qe(i),Je(r.ocultarSugerencias())}),I(),A(16,"button",11),Fo("click",function(){Qe(i);let s=pa(15);return Je(r.buscar(s.value))}),b(17,"Buscar"),I()(),De(18,xN,3,0,"ul",12),I(),De(19,IN,2,1,"p",13),De(20,TN,2,0,"p",14)(21,MN,2,1,"p",14),I()(),A(22,"div",15)(23,"div",16)(24,"h3"),b(25,"Valor actual de la canasta familiar"),I(),De(26,AN,2,0,"p",14)(27,RN,2,1,"p",14)(28,kN,2,1,"p",17),I()()()()}t&2&&(M(14),_u("value",r.searchQuery()),M(4),Se(r.showSuggestions()&&r.sugerencias().length>0?18:-1),M(),Se(r.searchNotFound()?19:-1),M(),Se(r.loading()?20:r.productos().length>0?21:-1),M(6),Se(r.canastaLoading()?26:r.canastaError()?27:28))},dependencies:[Ar],styles:["[_nghost-%COMP%]{display:block}.search-wrapper[_ngcontent-%COMP%]{position:relative}.suggestions-list[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;margin:4px 0 0;padding:0;list-style:none;background:#fff;border:1px solid rgba(26,26,26,.12);border-radius:12px;box-shadow:0 8px 24px #0000001f;max-height:320px;overflow-y:auto;z-index:100}.suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;cursor:pointer;transition:background .15s ease}.suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-radius:12px 12px 0 0}.suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-radius:0 0 12px 12px}.suggestions-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#2d5a2714}.suggestions-list[_ngcontent-%COMP%]   .suggestion-name[_ngcontent-%COMP%]{font-weight:500;color:#1a1a1a}.suggestions-list[_ngcontent-%COMP%]   .suggestion-price[_ngcontent-%COMP%]{font-size:14px;color:#1a1a1a99}.canasta-kpi-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.canasta-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-primary);margin:var(--spacing-sm) 0;font-family:var(--font-mono)}.chart-area[_ngcontent-%COMP%]{position:relative;height:280px;margin-top:var(--spacing-md)}.chart-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;min-height:200px}.search-card[_ngcontent-%COMP%]{margin-top:var(--spacing-lg)}.search-input[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm);margin-top:var(--spacing-sm)}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-sm) var(--spacing-md);border-radius:8px;border:1px solid var(--color-border);font-size:var(--font-size-body)}.search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:2px solid var(--color-accent);outline-offset:2px;border-color:var(--color-accent)}.hero-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.hero-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.hero-text[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}"]})};var ON=e=>["/producto",e],NN=(e,n)=>n.producto;function PN(e,n){if(e&1&&(T(0,"div",3)(1,"h3"),b(2,"No se pudo cargar el cat\xE1logo"),D(),T(3,"p",5),b(4),D()()),e&2){let t=ee();M(4),ie(t.error())}}function FN(e,n){if(e&1){let t=fn();T(0,"label",23)(1,"input",25),xt("change",function(i){let o=Qe(t).$implicit,s=ee(2);return Je(s.toggleCategory(o,i.target.checked))}),D(),T(2,"span"),b(3),D()()}if(e&2){let t=n.$implicit,r=ee(2);M(),jt("checked",r.selectedCategories().has(t)),M(2),ie(t)}}function LN(e,n){e&1&&(T(0,"div",3)(1,"p",5),b(2,"Cargando productos\u2026"),D()())}function jN(e,n){if(e&1&&(T(0,"article",28)(1,"a",30)(2,"div",31)(3,"span"),b(4),D()(),T(5,"div",32)(6,"div",33)(7,"h4"),b(8),D(),T(9,"span",34),b(10),D()(),T(11,"p",35),b(12),D(),T(13,"p",36)(14,"span",37),b(15),D(),b(16),D()()()()),e&2){let t=n.$implicit,r=ee(3);M(),jt("routerLink",tg(16,ON,t.producto.toLowerCase())),xr("aria-label","Ver detalles de "+t.producto),M(3),ie(r.iconFor(t.grupo_alimentos)),M(4),ie(t.producto),M(2),ie(t.grupo_alimentos),M(2),le("$ ",t.precioActual.toLocaleString("es-CO")," / kg"),M(),hn("up",r.trendFor(t)==="up")("down",r.trendFor(t)==="down")("neutral",r.trendFor(t)==="neutral"),xr("aria-label","Tendencia: "+r.trendText(t)+(r.changeLabel(t)?" "+r.changeLabel(t):"")),M(2),ie(r.trendIcon(t)),M(),An(" ",r.trendText(t)," ",r.changeLabel(t)," ")}}function BN(e,n){e&1&&(T(0,"div",3)(1,"p",5),b(2,"No se encontraron productos con los filtros seleccionados."),D()())}function $N(e,n){e&1&&(T(0,"span",41),b(1,"..."),D())}function VN(e,n){if(e&1){let t=fn();T(0,"button",43),xt("click",function(){Qe(t);let i=ee().$implicit,o=ee(4);return Je(o.setPage(i.value))}),b(1),D()}if(e&2){let t=ee().$implicit,r=ee(4);hn("active",r.page()===t.value),xr("aria-current",r.page()===t.value?"page":null)("aria-label","Ir a p\xE1gina "+t.value),M(),le(" ",t.value," ")}}function UN(e,n){if(e&1&&De(0,$N,2,0,"span",41)(1,VN,2,5,"button",42),e&2){let t=n.$implicit;Se(t.kind==="ellipsis"?0:1)}}function HN(e,n){if(e&1){let t=fn();T(0,"nav",29)(1,"button",38),xt("click",function(){Qe(t);let i=ee(3);return Je(i.setPage(i.page()-1))}),b(2," Anterior "),D(),T(3,"div",39),it(4,UN,2,1,null,null,Qp),D(),T(6,"button",40),xt("click",function(){Qe(t);let i=ee(3);return Je(i.setPage(i.page()+1))}),b(7," Siguiente "),D()()}if(e&2){let t=ee(3);M(),jt("disabled",t.page()===1),M(3),ot(t.getPaginationItems()),M(2),jt("disabled",t.page()===t.pageCount())}}function zN(e,n){if(e&1&&(T(0,"div",26)(1,"p",5),b(2),D()(),T(3,"div",27),it(4,jN,17,18,"article",28,NN),De(6,BN,3,0,"div",3),D(),De(7,HN,8,2,"nav",29)),e&2){let t=ee(2);M(2),wu("",t.filteredItems().length," producto",t.filteredItems().length!==1?"s":""," encontrado",t.filteredItems().length!==1?"s":""),M(2),ot(t.pagedItems()),M(2),Se(t.pagedItems().length===0?6:-1),M(),Se(t.pageCount()>1?7:-1)}}function WN(e,n){if(e&1){let t=fn();T(0,"div",4)(1,"aside",6)(2,"h3"),b(3,"Filtros laterales"),D(),T(4,"div",7)(5,"label",8),b(6,"Buscar"),D(),T(7,"input",9),xt("input",function(i){Qe(t);let o=ee();return Je(o.setSearch(i.target.value))}),D()(),T(8,"div",7)(9,"label",10),b(10,"Ordenar por"),D(),T(11,"select",11),xt("change",function(i){Qe(t);let o=ee();return Je(o.setSort(i.target.value))}),T(12,"option",12),b(13,"Nombre (A-Z)"),D(),T(14,"option",13),b(15,"Precio (menor a mayor)"),D(),T(16,"option",14),b(17,"Tendencia (m\xE1s subi\xF3)"),D(),T(18,"option",15),b(19,"Tendencia (m\xE1s baj\xF3)"),D()()(),T(20,"div",7)(21,"label",16),b(22,"Filtrar tendencia"),D(),T(23,"select",17),xt("change",function(i){Qe(t);let o=ee();return Je(o.setTrendFilter(i.target.value))}),T(24,"option",18),b(25,"Todas"),D(),T(26,"option",19),b(27,"Subi\xF3"),D(),T(28,"option",20),b(29,"Baj\xF3"),D(),T(30,"option",21),b(31,"Estable"),D()()(),T(32,"div",7)(33,"p",22),b(34,"Categorias"),D(),it(35,FN,4,2,"label",23,Ii),D()(),T(37,"div",24),De(38,LN,3,0,"div",3)(39,zN,8,5),D()()}if(e&2){let t=ee();M(7),jt("value",t.search()),M(4),jt("value",t.sort()),M(12),jt("value",t.trendFilter()),M(12),ot(t.categories()),M(3),Se(t.loading()?38:39)}}var Id=class e{fruver=k(jr);loading=X(!0);error=X(null);items=X([]);selectedCategories=X(new Set);search=X("");trendFilter=X("all");sort=X("name");categories=It(()=>Array.from(new Set(this.items().map(t=>t.grupo_alimentos))).filter(Boolean).sort((t,r)=>t.localeCompare(r)));filteredItems=It(()=>{let n=this.selectedCategories(),t=this.search().toLowerCase().trim(),r=this.trendFilter(),i=this.sort(),o=this.items();n.size>0&&(o=o.filter(a=>n.has(a.grupo_alimentos))),t&&(o=o.filter(a=>a.producto.toLowerCase().includes(t))),r!=="all"&&(o=o.filter(a=>this.trendFor(a)===r));let s=a=>{let c=a.cambioPct;return c!==null&&Number.isFinite(c)?c:Number.NaN};return o=[...o].sort((a,c)=>{if(i==="name")return a.producto.localeCompare(c.producto);if(i==="price")return a.precioActual-c.precioActual;if(i==="trend_up"){let d=s(a),h=s(c);return!Number.isFinite(d)&&!Number.isFinite(h)?a.producto.localeCompare(c.producto):Number.isFinite(d)?Number.isFinite(h)?h-d||a.producto.localeCompare(c.producto):-1:1}let l=s(a),u=s(c);return!Number.isFinite(l)&&!Number.isFinite(u)?a.producto.localeCompare(c.producto):Number.isFinite(l)?Number.isFinite(u)?l-u||a.producto.localeCompare(c.producto):-1:1}),o});page=X(1);pageSize=10;pageCount=It(()=>Math.ceil(this.filteredItems().length/this.pageSize));pagedItems=It(()=>{let n=this.filteredItems(),r=(this.page()-1)*this.pageSize,i=r+this.pageSize;return n.slice(r,i)});setPage(n){n>=1&&n<=this.pageCount()&&(this.page.set(n),window.scrollTo({top:0,behavior:"smooth"}))}getPaginationItems(){let n=this.pageCount(),t=this.page(),r=[];if(n<=7)for(let i=1;i<=n;i++)r.push({kind:"page",value:i});else if(r.push({kind:"page",value:1}),t<=3){for(let i=2;i<=4;i++)r.push({kind:"page",value:i});r.push({kind:"ellipsis"}),r.push({kind:"page",value:n})}else if(t>=n-2){r.push({kind:"ellipsis"});for(let i=n-3;i<=n;i++)r.push({kind:"page",value:i})}else{r.push({kind:"ellipsis"});for(let i=t-1;i<=t+1;i++)r.push({kind:"page",value:i});r.push({kind:"ellipsis"}),r.push({kind:"page",value:n})}return r}constructor(){this.load()}load(){return v(this,null,function*(){this.loading.set(!0),this.error.set(null);try{let n=yield this.fruver.getCatalogoBasico();this.items.set(this.toCatalogoItem(n))}catch(n){console.error("[Catalogo] Error:",n),this.error.set(n instanceof Error?n.message:"No se pudo cargar el cat\xE1logo.")}finally{this.loading.set(!1)}})}toCatalogoItem(n){return n.map(t=>({producto:t.producto,grupo_alimentos:t.grupo_alimentos,codigo_grupo:t.codigo_grupo,precioActual:t.precioActual,precioAnterior:t.precioAnterior??null,cambioPct:t.cambioPct??null,tendenciaScore:t.cambioPct??0}))}toggleCategory(n,t){let r=new Set(this.selectedCategories());t?r.add(n):r.delete(n),this.selectedCategories.set(r),this.page.set(1)}setSearch(n){this.search.set(n),this.page.set(1)}setTrendFilter(n){(n==="up"||n==="down"||n==="neutral"||n==="all")&&(this.trendFilter.set(n),this.page.set(1))}setSort(n){(n==="name"||n==="price"||n==="trend_up"||n==="trend_down")&&(this.sort.set(n),this.page.set(1))}iconFor(n){let t=(n??"").toLowerCase();return t.includes("fruta")?"\u{1F96D}":t.includes("verdura")||t.includes("hortaliza")?"\u{1F955}":t.includes("tub")?"\u{1F954}":t.includes("grano")?"\u{1F33E}":"\u{1F957}"}trendFor(n){let t=n.cambioPct;return t===null||!Number.isFinite(t)||Math.abs(t)<.05?"neutral":t>0?"up":"down"}changeLabel(n){let t=n.cambioPct;return t===null||!Number.isFinite(t)||Math.abs(t)<.05?"":`${Math.abs(t).toFixed(2)}%`}trendText(n){let t=this.trendFor(n);return t==="up"?"Subi\xF3":t==="down"?"Baj\xF3":"Estable"}trendIcon(n){let t=this.trendFor(n);return t==="up"?"+":t==="down"?"-":"="}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-catalogo"]],decls:9,vars:1,consts:[[1,"section"],[1,"section-header"],[1,"eyebrow"],[1,"card"],[1,"catalog-layout"],[1,"muted"],[1,"filters","card"],[1,"filter-group"],["for","catalogo-search",1,"field-label"],["id","catalogo-search","type","search","placeholder","Ej. Tomate chonto",3,"input","value"],["for","catalogo-sort",1,"field-label"],["id","catalogo-sort",3,"change","value"],["value","name"],["value","price"],["value","trend_up"],["value","trend_down"],["for","catalogo-trend",1,"field-label"],["id","catalogo-trend",3,"change","value"],["value","all"],["value","up"],["value","down"],["value","neutral"],[1,"filter-title"],[1,"checkbox"],[1,"product-section"],["type","checkbox",3,"change","checked"],[1,"product-results-header"],[1,"product-grid"],[1,"card","product-card"],["aria-label","Paginaci\xF3n de productos",1,"pagination"],[1,"product-link",3,"routerLink"],["aria-hidden","true",1,"product-icon"],[1,"product-body"],[1,"product-title"],[1,"tag"],[1,"price"],[1,"trend"],["aria-hidden","true",1,"trend-icon"],["aria-label","P\xE1gina anterior",1,"btn","btn-secondary","btn-sm",3,"click","disabled"],[1,"pagination-numbers"],["aria-label","P\xE1gina siguiente",1,"btn","btn-secondary","btn-sm",3,"click","disabled"],[1,"pagination-ellipsis"],[1,"btn","btn-secondary","btn-sm","pagination-number",3,"active"],[1,"btn","btn-secondary","btn-sm","pagination-number",3,"click"]],template:function(t,r){t&1&&(T(0,"section",0)(1,"div",1)(2,"div")(3,"p",2),b(4,"Catalogo de productos"),D(),T(5,"h2"),b(6,"Navegacion rapida por categorias"),D()()(),De(7,PN,5,1,"div",3)(8,WN,40,4,"div",4),D()),t&2&&(M(7),Se(r.error()?7:8))},dependencies:[Ar,Nn],styles:["[_nghost-%COMP%]{display:block}.product-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.product-results-header[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.product-card[_ngcontent-%COMP%]{position:relative;transition:transform .2s ease,box-shadow .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--elevation-3)}.product-link[_ngcontent-%COMP%]{display:block;text-decoration:none;color:inherit;outline:none}.product-link[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px;border-radius:16px}.filters[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border-radius:8px;border:1px solid var(--color-border);background:#fff}.filters[_ngcontent-%COMP%]   input[type=search][_ngcontent-%COMP%]:focus-visible, .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);margin-top:var(--spacing-lg);flex-wrap:wrap}.pagination-numbers[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs);align-items:center}.pagination-number[_ngcontent-%COMP%]{min-width:40px}.pagination-number.active[_ngcontent-%COMP%]{background:var(--color-primary);color:#fff;border-color:var(--color-primary)}.pagination-ellipsis[_ngcontent-%COMP%]{padding:0 var(--spacing-sm);color:var(--color-muted)}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})};var qN=(e,n)=>n.market,GN=(e,n)=>n.period,KN=(e,n)=>n.name;function YN(e,n){if(e&1&&(A(0,"button",4),b(1),I()),e&2){let t=n.$implicit;M(),ie(t)}}function ZN(e,n){if(e&1&&(A(0,"tr")(1,"td"),b(2),I(),A(3,"td"),b(4),I(),A(5,"td"),b(6),I()()),e&2){let t=n.$implicit;M(2),ie(t.market),M(2),le("$ ",t.periodA),M(2),le("$ ",t.periodB)}}function QN(e,n){if(e&1&&(A(0,"tr")(1,"td"),b(2),I(),A(3,"td"),b(4),I(),A(5,"td"),b(6),I()()),e&2){let t=n.$implicit;M(2),ie(t.period),M(2),le("$ ",t.market1),M(2),le("$ ",t.market2)}}function JN(e,n){if(e&1&&(A(0,"article",37)(1,"div",38)(2,"h4"),b(3),I(),A(4,"span",17),b(5),I()(),A(6,"p",7),b(7),I(),A(8,"p",39),b(9),I(),A(10,"p",40)(11,"span",41),b(12),I(),b(13),I()()),e&2){let t=n.$implicit;M(3),ie(t.name),M(2),le("",t.distance," km"),M(2),ie(t.address),M(2),An("$ ",t.price," / ",t.unit),M(),hn("up",t.trend==="down")("down",t.trend==="up"),M(2),ie(t.trend==="down"?"\u2193":"\u2191"),M(),le(" ",t.note," ")}}var Td=class e{constructor(n){this.route=n}productName="tomate chonto";ranges=["1S","1M","1A","5A"];marketPeriodTable=[{market:"Mercado 1",periodA:"3.200",periodB:"3.100"},{market:"Mercado 2",periodA:"3.100",periodB:"3.300"},{market:"Mercado 3",periodA:"2.000",periodB:"1.500"}];periodMarketTable=[{period:"A",market1:"3.200",market2:"3.100"},{period:"B",market1:"3.050",market2:"3.350"},{period:"C",market1:"2.980",market2:"3.020"}];nearbyMarkets=[{name:"Plaza Minorista",address:"Cra 55 #57-80, Medellin",price:"2.780",unit:"kg",distance:"1.4",trend:"down",note:"Mejor precio hoy"},{name:"Mercado La 80",address:"Cl 80 #75-40, Medellin",price:"2.980",unit:"kg",distance:"2.1",trend:"up",note:"Subio levemente"},{name:"Plaza La America",address:"Cl 44 #90-30, Medellin",price:"2.850",unit:"kg",distance:"3.0",trend:"down",note:"Promedio estable"}];ngOnInit(){this.route.params.subscribe(n=>{n.productName&&(this.productName=n.productName)})}static \u0275fac=function(t){return new(t||e)(gt(Vt))};static \u0275cmp=Ue({type:e,selectors:[["app-historicos"]],decls:127,vars:4,consts:[[1,"section"],[1,"section-header"],[1,"eyebrow"],["role","group","aria-label","Rango de tiempo",1,"range-buttons"],[1,"btn","btn-secondary","btn-sm"],[1,"history-grid"],[1,"card"],[1,"muted"],[1,"chart-area","line"],["viewBox","0 0 560 220","aria-hidden","true"],["d","M10 180 L70 160 L130 140 L190 150 L250 120 L310 130 L370 90 L430 110 L490 80 L550 100","fill","none","stroke","#F28C28","stroke-width","3"],["cx","310","cy","130","r","5","fill","#F28C28"],[1,"chart-tooltip"],[1,"caption"],[1,"card","insight-card"],[1,"insight-text"],[1,"insight-meta"],[1,"tag"],[1,"comparison-grid"],[1,"card","location-card"],[1,"btn","btn-accent"],[1,"form-row"],["for","departamento",1,"field-label"],["id","departamento"],["for","ciudad",1,"field-label"],["id","ciudad"],[1,"map-placeholder"],[1,"card","temporal-card"],[1,"date-grid"],["for","periodo-a",1,"field-label"],["id","periodo-a","type","date","value","2025-05-01"],["for","periodo-b",1,"field-label"],["id","periodo-b","type","date","value","2025-12-01"],[1,"table-block"],[1,"table-title"],[1,"section-subgrid"],[1,"market-grid"],[1,"card","market-card"],[1,"market-header"],[1,"price"],[1,"trend"],[1,"trend-icon"]],template:function(t,r){t&1&&(A(0,"section",0)(1,"div",1)(2,"div")(3,"p",2),b(4,"Precios historicos"),I(),A(5,"h2"),b(6),I()(),A(7,"div",3),it(8,YN,2,1,"button",4,Ii),I()(),A(10,"div",5)(11,"div",6)(12,"h3"),b(13),I(),A(14,"p",7),b(15,"Hover sobre el grafico para ver precio exacto."),I(),A(16,"div",8),Il(),A(17,"svg",9),Mn(18,"path",10)(19,"circle",11),I(),Tl(),A(20,"div",12),b(21,"$ 2.950 \xB7 12 Jun 2025"),I()(),A(22,"p",13),b(23,"Para rango 5A se usa promedio mensual."),I()(),A(24,"div",14)(25,"h3"),b(26,"Insights IA"),I(),A(27,"p",15),b(28,' "Historicamente, este producto baja de precio en los meses de Junio y Julio debido a la cosecha en la region de Boyaca." '),I(),A(29,"div",16)(30,"span",17),b(31,"Insight simulado"),I(),A(32,"span",7),b(33,"Actualizado: 08 Ene 2026"),I()()()()(),A(34,"section",0)(35,"div",1)(36,"div")(37,"p",2),b(38,"Comparador de precios y mercados"),I(),A(39,"h2"),b(40),I()(),A(41,"span",17),b(42,"Core"),I()(),A(43,"div",18)(44,"div",19)(45,"h3"),b(46,"Selecciona tu ubicacion"),I(),A(47,"p",7),b(48,"Elige GPS o selecciona departamento y ciudad."),I(),A(49,"button",20),b(50,"Usar mi ubicacion actual"),I(),A(51,"div",21)(52,"label",22),b(53,"Departamento"),I(),A(54,"select",23)(55,"option"),b(56,"Antioquia"),I(),A(57,"option"),b(58,"Bogota D.C."),I(),A(59,"option"),b(60,"Valle del Cauca"),I()()(),A(61,"div",21)(62,"label",24),b(63,"Ciudad"),I(),A(64,"select",25)(65,"option"),b(66,"Medellin"),I(),A(67,"option"),b(68,"Bogota"),I(),A(69,"option"),b(70,"Cali"),I()()(),A(71,"div",26)(72,"div")(73,"p"),b(74,"Mapa de mercados cercanos"),I(),A(75,"span"),b(76,"Leaflet.js + OpenStreetMap"),I()()()(),A(77,"div",27)(78,"h3"),b(79,"Comparacion temporal"),I(),A(80,"p",7),b(81,"Periodo A vs Periodo B con datos de prueba."),I(),A(82,"div",28)(83,"div",21)(84,"label",29),b(85,"Periodo A"),I(),Mn(86,"input",30),I(),A(87,"div",21)(88,"label",31),b(89,"Periodo B"),I(),Mn(90,"input",32),I()(),A(91,"div",33)(92,"p",34),b(93,"Mercado vs Periodo"),I(),A(94,"table")(95,"thead")(96,"tr")(97,"th"),b(98,"Mercado"),I(),A(99,"th"),b(100,"Periodo A"),I(),A(101,"th"),b(102,"Periodo B"),I()()(),A(103,"tbody"),it(104,ZN,7,3,"tr",null,qN),I()()(),A(106,"div",33)(107,"p",34),b(108,"Periodo vs Mercado"),I(),A(109,"table")(110,"thead")(111,"tr")(112,"th"),b(113,"Periodo"),I(),A(114,"th"),b(115,"Mercado 1"),I(),A(116,"th"),b(117,"Mercado 2"),I()()(),A(118,"tbody"),it(119,QN,7,3,"tr",null,GN),I()()()()(),A(121,"div",35)(122,"h3"),b(123),I(),A(124,"div",36),it(125,JN,14,11,"article",37,KN),I()()()),t&2&&(M(6),le("Analisis profundo del ",r.productName),M(2),ot(r.ranges),M(5),le("Precio historico del ",r.productName),M(27),le("Compara precios del ",r.productName," en diferentes mercados"),M(64),ot(r.marketPeriodTable),M(15),ot(r.periodMarketTable),M(4),le("Top 3 mercados cercanos para ",r.productName),M(2),ot(r.nearbyMarkets))},styles:["[_nghost-%COMP%]{display:block}"]})};function lc(e){return e+.5|0}var Br=(e,n,t)=>Math.max(Math.min(e,t),n);function ac(e){return Br(lc(e*2.55),0,255)}function $r(e){return Br(lc(e*255),0,255)}function cr(e){return Br(lc(e/2.55)/100,0,1)}function QE(e){return Br(lc(e*100),0,100)}var en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Dm=[..."0123456789ABCDEF"],XN=e=>Dm[e&15],e1=e=>Dm[(e&240)>>4]+Dm[e&15],Md=e=>(e&240)>>4===(e&15),t1=e=>Md(e.r)&&Md(e.g)&&Md(e.b)&&Md(e.a);function n1(e){var n=e.length,t;return e[0]==="#"&&(n===4||n===5?t={r:255&en[e[1]]*17,g:255&en[e[2]]*17,b:255&en[e[3]]*17,a:n===5?en[e[4]]*17:255}:(n===7||n===9)&&(t={r:en[e[1]]<<4|en[e[2]],g:en[e[3]]<<4|en[e[4]],b:en[e[5]]<<4|en[e[6]],a:n===9?en[e[7]]<<4|en[e[8]]:255})),t}var r1=(e,n)=>e<255?n(e):"";function i1(e){var n=t1(e)?XN:e1;return e?"#"+n(e.r)+n(e.g)+n(e.b)+r1(e.a,n):void 0}var o1=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tC(e,n,t){let r=n*Math.min(t,1-t),i=(o,s=(o+e/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function s1(e,n,t){let r=(i,o=(i+e/60)%6)=>t-t*n*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function a1(e,n,t){let r=tC(e,1,.5),i;for(n+t>1&&(i=1/(n+t),n*=i,t*=i),i=0;i<3;i++)r[i]*=1-n-t,r[i]+=n;return r}function c1(e,n,t,r,i){return e===i?(n-t)/r+(n<t?6:0):n===i?(t-e)/r+2:(e-n)/r+4}function Sm(e){let t=e.r/255,r=e.g/255,i=e.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2,c,l,u;return o!==s&&(u=o-s,l=a>.5?u/(2-o-s):u/(o+s),c=c1(t,r,i,u,o),c=c*60+.5),[c|0,l||0,a]}function xm(e,n,t,r){return(Array.isArray(n)?e(n[0],n[1],n[2]):e(n,t,r)).map($r)}function Im(e,n,t){return xm(tC,e,n,t)}function l1(e,n,t){return xm(a1,e,n,t)}function u1(e,n,t){return xm(s1,e,n,t)}function nC(e){return(e%360+360)%360}function d1(e){let n=o1.exec(e),t=255,r;if(!n)return;n[5]!==r&&(t=n[6]?ac(+n[5]):$r(+n[5]));let i=nC(+n[2]),o=+n[3]/100,s=+n[4]/100;return n[1]==="hwb"?r=l1(i,o,s):n[1]==="hsv"?r=u1(i,o,s):r=Im(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function f1(e,n){var t=Sm(e);t[0]=nC(t[0]+n),t=Im(t),e.r=t[0],e.g=t[1],e.b=t[2]}function h1(e){if(!e)return;let n=Sm(e),t=n[0],r=QE(n[1]),i=QE(n[2]);return e.a<255?`hsla(${t}, ${r}%, ${i}%, ${cr(e.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var JE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},XE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function p1(){let e={},n=Object.keys(XE),t=Object.keys(JE),r,i,o,s,a;for(r=0;r<n.length;r++){for(s=a=n[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,JE[o]);o=parseInt(XE[s],16),e[a]=[o>>16&255,o>>8&255,o&255]}return e}var Ad;function g1(e){Ad||(Ad=p1(),Ad.transparent=[0,0,0,0]);let n=Ad[e.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:n.length===4?n[3]:255}}var m1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function v1(e){let n=m1.exec(e),t=255,r,i,o;if(n){if(n[7]!==r){let s=+n[7];t=n[8]?ac(s):Br(s*255,0,255)}return r=+n[1],i=+n[3],o=+n[5],r=255&(n[2]?ac(r):Br(r,0,255)),i=255&(n[4]?ac(i):Br(i,0,255)),o=255&(n[6]?ac(o):Br(o,0,255)),{r,g:i,b:o,a:t}}}function y1(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${cr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var Cm=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,cs=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function b1(e,n,t){let r=cs(cr(e.r)),i=cs(cr(e.g)),o=cs(cr(e.b));return{r:$r(Cm(r+t*(cs(cr(n.r))-r))),g:$r(Cm(i+t*(cs(cr(n.g))-i))),b:$r(Cm(o+t*(cs(cr(n.b))-o))),a:e.a+t*(n.a-e.a)}}function Rd(e,n,t){if(e){let r=Sm(e);r[n]=Math.max(0,Math.min(r[n]+r[n]*t,n===0?360:1)),r=Im(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function rC(e,n){return e&&Object.assign(n||{},e)}function eC(e){var n={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(n={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(n.a=$r(e[3]))):(n=rC(e,{r:0,g:0,b:0,a:1}),n.a=$r(n.a)),n}function _1(e){return e.charAt(0)==="r"?v1(e):d1(e)}var cc=class e{constructor(n){if(n instanceof e)return n;let t=typeof n,r;t==="object"?r=eC(n):t==="string"&&(r=n1(n)||g1(n)||_1(n)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var n=rC(this._rgb);return n&&(n.a=cr(n.a)),n}set rgb(n){this._rgb=eC(n)}rgbString(){return this._valid?y1(this._rgb):void 0}hexString(){return this._valid?i1(this._rgb):void 0}hslString(){return this._valid?h1(this._rgb):void 0}mix(n,t){if(n){let r=this.rgb,i=n.rgb,o,s=t===o?.5:t,a=2*s-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-l,r.r=255&l*r.r+o*i.r+.5,r.g=255&l*r.g+o*i.g+.5,r.b=255&l*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(n,t){return n&&(this._rgb=b1(this._rgb,n._rgb,t)),this}clone(){return new e(this.rgb)}alpha(n){return this._rgb.a=$r(n),this}clearer(n){let t=this._rgb;return t.a*=1-n,this}greyscale(){let n=this._rgb,t=lc(n.r*.3+n.g*.59+n.b*.11);return n.r=n.g=n.b=t,this}opaquer(n){let t=this._rgb;return t.a*=1+n,this}negate(){let n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return Rd(this._rgb,2,n),this}darken(n){return Rd(this._rgb,2,-n),this}saturate(n){return Rd(this._rgb,1,n),this}desaturate(n){return Rd(this._rgb,1,-n),this}rotate(n){return f1(this._rgb,n),this}};function Bn(){}var pC=(()=>{let e=0;return()=>e++})();function te(e){return e==null}function ye(e){if(Array.isArray&&Array.isArray(e))return!0;let n=Object.prototype.toString.call(e);return n.slice(0,7)==="[object"&&n.slice(-6)==="Array]"}function ne(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Te(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Tt(e,n){return Te(e)?e:n}function W(e,n){return typeof e>"u"?n:e}var gC=(e,n)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/n,Rm=(e,n)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*n:+e;function ve(e,n,t){if(e&&typeof e.call=="function")return e.apply(t,n)}function pe(e,n,t,r){let i,o,s;if(ye(e))if(o=e.length,r)for(i=o-1;i>=0;i--)n.call(t,e[i],i);else for(i=0;i<o;i++)n.call(t,e[i],i);else if(ne(e))for(s=Object.keys(e),o=s.length,i=0;i<o;i++)n.call(t,e[s[i]],s[i])}function fc(e,n){let t,r,i,o;if(!e||!n||e.length!==n.length)return!1;for(t=0,r=e.length;t<r;++t)if(i=e[t],o=n[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Pd(e){if(ye(e))return e.map(Pd);if(ne(e)){let n=Object.create(null),t=Object.keys(e),r=t.length,i=0;for(;i<r;++i)n[t[i]]=Pd(e[t[i]]);return n}return e}function mC(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function w1(e,n,t,r){if(!mC(e))return;let i=n[e],o=t[e];ne(i)&&ne(o)?us(i,o,r):n[e]=Pd(o)}function us(e,n,t){let r=ye(n)?n:[n],i=r.length;if(!ne(e))return e;t=t||{};let o=t.merger||w1,s;for(let a=0;a<i;++a){if(s=r[a],!ne(s))continue;let c=Object.keys(s);for(let l=0,u=c.length;l<u;++l)o(c[l],e,s,t)}return e}function fs(e,n){return us(e,n,{merger:E1})}function E1(e,n,t){if(!mC(e))return;let r=n[e],i=t[e];ne(r)&&ne(i)?fs(r,i):Object.prototype.hasOwnProperty.call(n,e)||(n[e]=Pd(i))}var iC={"":e=>e,x:e=>e.x,y:e=>e.y};function C1(e){let n=e.split("."),t=[],r="";for(let i of n)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function D1(e){let n=C1(e);return t=>{for(let r of n){if(r==="")break;t=t&&t[r]}return t}}function dr(e,n){return(iC[n]||(iC[n]=D1(n)))(e)}function Bd(e){return e.charAt(0).toUpperCase()+e.slice(1)}var hs=e=>typeof e<"u",lr=e=>typeof e=="function",km=(e,n)=>{if(e.size!==n.size)return!1;for(let t of e)if(!n.has(t))return!1;return!0};function vC(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var de=Math.PI,be=2*de,S1=be+de,Fd=Number.POSITIVE_INFINITY,x1=de/180,Re=de/2,Wi=de/4,oC=de*2/3,ur=Math.log10,yn=Math.sign;function ps(e,n,t){return Math.abs(e-n)<t}function Om(e){let n=Math.round(e);e=ps(e,n,e/1e3)?n:e;let t=Math.pow(10,Math.floor(ur(e))),r=e/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function yC(e){let n=[],t=Math.sqrt(e),r;for(r=1;r<t;r++)e%r===0&&(n.push(r),n.push(e/r));return t===(t|0)&&n.push(t),n.sort((i,o)=>i-o).pop(),n}function I1(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Ki(e){return!I1(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function bC(e,n){let t=Math.round(e);return t-n<=e&&t+n>=e}function Nm(e,n,t){let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r][t],isNaN(o)||(n.min=Math.min(n.min,o),n.max=Math.max(n.max,o))}function tn(e){return e*(de/180)}function $d(e){return e*(180/de)}function Pm(e){if(!Te(e))return;let n=1,t=0;for(;Math.round(e*n)/n!==e;)n*=10,t++;return t}function Fm(e,n){let t=n.x-e.x,r=n.y-e.y,i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t);return o<-.5*de&&(o+=be),{angle:o,distance:i}}function Ld(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function T1(e,n){return(e-n+S1)%be-de}function at(e){return(e%be+be)%be}function gs(e,n,t,r){let i=at(e),o=at(n),s=at(t),a=at(o-i),c=at(s-i),l=at(i-o),u=at(i-s);return i===o||i===s||r&&o===s||a>c&&l<u}function qe(e,n,t){return Math.max(n,Math.min(t,e))}function _C(e){return qe(e,-32768,32767)}function $n(e,n,t,r=1e-6){return e>=Math.min(n,t)-r&&e<=Math.max(n,t)+r}function Vd(e,n,t){t=t||(s=>e[s]<n);let r=e.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}var Ln=(e,n,t,r)=>Vd(e,t,r?i=>{let o=e[i][n];return o<t||o===t&&e[i+1][n]===t}:i=>e[i][n]<t),wC=(e,n,t)=>Vd(e,t,r=>e[r][n]>=t);function EC(e,n,t){let r=0,i=e.length;for(;r<i&&e[r]<n;)r++;for(;i>r&&e[i-1]>t;)i--;return r>0||i<e.length?e.slice(r,i):e}var CC=["push","pop","shift","splice","unshift"];function DC(e,n){if(e._chartjs){e._chartjs.listeners.push(n);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),CC.forEach(t=>{let r="_onData"+Bd(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return e._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function Lm(e,n){let t=e._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(n);i!==-1&&r.splice(i,1),!(r.length>0)&&(CC.forEach(o=>{delete e[o]}),delete e._chartjs)}function jm(e){let n=new Set(e);return n.size===e.length?e:Array.from(n)}var Bm=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function $m(e,n){let t=[],r=!1;return function(...i){t=i,r||(r=!0,Bm.call(window,()=>{r=!1,e.apply(n,t)}))}}function SC(e,n){let t;return function(...r){return n?(clearTimeout(t),t=setTimeout(e,n,r)):e.apply(this,r),n}}var Ud=e=>e==="start"?"left":e==="end"?"right":"center",ct=(e,n,t)=>e==="start"?n:e==="end"?t:(n+t)/2,xC=(e,n,t,r)=>e===(r?"left":"right")?t:e==="center"?(n+t)/2:n;function Vm(e,n,t){let r=n.length,i=0,o=r;if(e._sorted){let{iScale:s,vScale:a,_parsed:c}=e,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=s.axis,{min:d,max:h,minDefined:f,maxDefined:p}=s.getUserBounds();if(f){if(i=Math.min(Ln(c,u,d).lo,t?r:Ln(n,u,s.getPixelForValue(d)).lo),l){let g=c.slice(0,i+1).reverse().findIndex(m=>!te(m[a.axis]));i-=Math.max(0,g)}i=qe(i,0,r-1)}if(p){let g=Math.max(Ln(c,s.axis,h,!0).hi+1,t?0:Ln(n,u,s.getPixelForValue(h),!0).hi+1);if(l){let m=c.slice(g-1).findIndex(y=>!te(y[a.axis]));g+=Math.max(0,m)}o=qe(g,i,r)-i}else o=r-i}return{start:i,count:o}}function Um(e){let{xScale:n,yScale:t,_scaleRanges:r}=e,i={xmin:n.min,xmax:n.max,ymin:t.min,ymax:t.max};if(!r)return e._scaleRanges=i,!0;let o=r.xmin!==n.min||r.xmax!==n.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}var kd=e=>e===0||e===1,sC=(e,n,t)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-n)*be/t)),aC=(e,n,t)=>Math.pow(2,-10*e)*Math.sin((e-n)*be/t)+1,ls={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Re)+1,easeOutSine:e=>Math.sin(e*Re),easeInOutSine:e=>-.5*(Math.cos(de*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>kd(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>kd(e)?e:sC(e,.075,.3),easeOutElastic:e=>kd(e)?e:aC(e,.075,.3),easeInOutElastic(e){return kd(e)?e:e<.5?.5*sC(e*2,.1125,.45):.5+.5*aC(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let n=1.70158;return(e/=.5)<1?.5*(e*e*(((n*=1.525)+1)*e-n)):.5*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)},easeInBounce:e=>1-ls.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?ls.easeInBounce(e*2)*.5:ls.easeOutBounce(e*2-1)*.5+.5};function Hm(e){if(e&&typeof e=="object"){let n=e.toString();return n==="[object CanvasPattern]"||n==="[object CanvasGradient]"}return!1}function zm(e){return Hm(e)?e:new cc(e)}function Tm(e){return Hm(e)?e:new cc(e).saturate(.5).darken(.1).hexString()}var M1=["x","y","borderWidth","radius","tension"],A1=["color","borderColor","backgroundColor"];function R1(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"}),e.set("animations",{colors:{type:"color",properties:A1},numbers:{type:"number",properties:M1}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}})}function k1(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var cC=new Map;function O1(e,n){n=n||{};let t=e+JSON.stringify(n),r=cC.get(t);return r||(r=new Intl.NumberFormat(e,n),cC.set(t,r)),r}function ms(e,n,t){return O1(n,t).format(e)}var IC={values(e){return ye(e)?e:""+e},numeric(e,n,t){if(e===0)return"0";let r=this.chart.options.locale,i,o=e;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),o=N1(e,t)}let s=ur(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),ms(e,r,c)},logarithmic(e,n,t){if(e===0)return"0";let r=t[n].significand||e/Math.pow(10,Math.floor(ur(e)));return[1,2,3,5,10,15].includes(r)||n>.8*t.length?IC.numeric.call(this,e,n,t):""}};function N1(e,n){let t=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}var hc={formatters:IC};function P1(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"&&n!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"})}var Hr=Object.create(null),Hd=Object.create(null);function uc(e,n){if(!n)return e;let t=n.split(".");for(let r=0,i=t.length;r<i;++r){let o=t[r];e=e[o]||(e[o]=Object.create(null))}return e}function Mm(e,n,t){return typeof n=="string"?us(uc(e,n),t):us(uc(e,""),n)}var Am=class{constructor(n,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Tm(i.backgroundColor),this.hoverBorderColor=(r,i)=>Tm(i.borderColor),this.hoverColor=(r,i)=>Tm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n),this.apply(t)}set(n,t){return Mm(this,n,t)}get(n){return uc(this,n)}describe(n,t){return Mm(Hd,n,t)}override(n,t){return Mm(Hr,n,t)}route(n,t,r,i){let o=uc(this,n),s=uc(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=s[i];return ne(c)?Object.assign({},l,c):W(c,l)},set(c){this[a]=c}}})}apply(n){n.forEach(t=>t(this))}},we=new Am({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[R1,k1,P1]);function F1(e){return!e||te(e.size)||te(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function dc(e,n,t,r,i){let o=n[i];return o||(o=n[i]=e.measureText(i).width,t.push(i)),o>r&&(r=o),r}function TC(e,n,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==n&&(i=r.data={},o=r.garbageCollect=[],r.font=n),e.save(),e.font=n;let s=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!ye(d))s=dc(e,i,o,s,d);else if(ye(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!ye(h)&&(s=dc(e,i,o,s,h));e.restore();let f=o.length/2;if(f>t.length){for(c=0;c<f;c++)delete i[o[c]];o.splice(0,f)}return s}function zr(e,n,t){let r=e.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((n-i)*r)/r+i}function Wm(e,n){!n&&!e||(n=n||e.getContext("2d"),n.save(),n.resetTransform(),n.clearRect(0,0,e.width,e.height),n.restore())}function zd(e,n,t,r){qm(e,n,t,r,null)}function qm(e,n,t,r,i){let o,s,a,c,l,u,d,h,f=n.pointStyle,p=n.rotation,g=n.radius,m=(p||0)*x1;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(t,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(t,r,i/2,g,0,0,be):e.arc(t,r,g,0,be),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(t+Math.sin(m)*u,r-Math.cos(m)*g),m+=oC,e.lineTo(t+Math.sin(m)*u,r-Math.cos(m)*g),m+=oC,e.lineTo(t+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":l=g*.516,c=g-l,s=Math.cos(m+Wi)*c,d=Math.cos(m+Wi)*(i?i/2-l:c),a=Math.sin(m+Wi)*c,h=Math.sin(m+Wi)*(i?i/2-l:c),e.arc(t-d,r-a,l,m-de,m-Re),e.arc(t+h,r-s,l,m-Re,m),e.arc(t+d,r+a,l,m,m+Re),e.arc(t-h,r+s,l,m+Re,m+de),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=i?i/2:c,e.rect(t-u,r-c,2*u,2*c);break}m+=Wi;case"rectRot":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),e.moveTo(t-d,r-a),e.lineTo(t+h,r-s),e.lineTo(t+d,r+a),e.lineTo(t-h,r+s),e.closePath();break;case"crossRot":m+=Wi;case"cross":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),e.moveTo(t-d,r-a),e.lineTo(t+d,r+a),e.moveTo(t+h,r-s),e.lineTo(t-h,r+s);break;case"star":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),e.moveTo(t-d,r-a),e.lineTo(t+d,r+a),e.moveTo(t+h,r-s),e.lineTo(t-h,r+s),m+=Wi,d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),e.moveTo(t-d,r-a),e.lineTo(t+d,r+a),e.moveTo(t+h,r-s),e.lineTo(t-h,r+s);break;case"line":s=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(t-s,r-a),e.lineTo(t+s,r+a);break;case"dash":e.moveTo(t,r),e.lineTo(t+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:e.closePath();break}e.fill(),n.borderWidth>0&&e.stroke()}}function jn(e,n,t){return t=t||.5,!n||e&&e.x>n.left-t&&e.x<n.right+t&&e.y>n.top-t&&e.y<n.bottom+t}function pc(e,n){e.save(),e.beginPath(),e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()}function gc(e){e.restore()}function MC(e,n,t,r,i){if(!n)return e.lineTo(t.x,t.y);if(i==="middle"){let o=(n.x+t.x)/2;e.lineTo(o,n.y),e.lineTo(o,t.y)}else i==="after"!=!!r?e.lineTo(n.x,t.y):e.lineTo(t.x,n.y);e.lineTo(t.x,t.y)}function AC(e,n,t,r){if(!n)return e.lineTo(t.x,t.y);e.bezierCurveTo(r?n.cp1x:n.cp2x,r?n.cp1y:n.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function L1(e,n){n.translation&&e.translate(n.translation[0],n.translation[1]),te(n.rotation)||e.rotate(n.rotation),n.color&&(e.fillStyle=n.color),n.textAlign&&(e.textAlign=n.textAlign),n.textBaseline&&(e.textBaseline=n.textBaseline)}function j1(e,n,t,r,i){if(i.strikethrough||i.underline){let o=e.measureText(r),s=n-o.actualBoundingBoxLeft,a=n+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,l=t+o.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,u),e.lineTo(a,u),e.stroke()}}function B1(e,n){let t=e.fillStyle;e.fillStyle=n.color,e.fillRect(n.left,n.top,n.width,n.height),e.fillStyle=t}function Wr(e,n,t,r,i,o={}){let s=ye(n)?n:[n],a=o.strokeWidth>0&&o.strokeColor!=="",c,l;for(e.save(),e.font=i.string,L1(e,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&B1(e,o.backdrop),a&&(o.strokeColor&&(e.strokeStyle=o.strokeColor),te(o.strokeWidth)||(e.lineWidth=o.strokeWidth),e.strokeText(l,t,r,o.maxWidth)),e.fillText(l,t,r,o.maxWidth),j1(e,t,r,l,o),r+=Number(i.lineHeight);e.restore()}function vs(e,n){let{x:t,y:r,w:i,h:o,radius:s}=n;e.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*de,de,!0),e.lineTo(t,r+o-s.bottomLeft),e.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,de,Re,!0),e.lineTo(t+i-s.bottomRight,r+o),e.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,Re,0,!0),e.lineTo(t+i,r+s.topRight),e.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-Re,!0),e.lineTo(t+s.topLeft,r)}var $1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,V1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function U1(e,n){let t=(""+e).match($1);if(!t||t[1]==="normal")return n*1.2;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100;break}return n*e}var H1=e=>+e||0;function Wd(e,n){let t={},r=ne(n),i=r?Object.keys(n):n,o=ne(e)?r?s=>W(e[s],e[n[s]]):s=>e[s]:()=>e;for(let s of i)t[s]=H1(o(s));return t}function Gm(e){return Wd(e,{top:"y",right:"x",bottom:"y",left:"x"})}function qr(e){return Wd(e,["topLeft","topRight","bottomLeft","bottomRight"])}function lt(e){let n=Gm(e);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function je(e,n){e=e||{},n=n||we.font;let t=W(e.size,n.size);typeof t=="string"&&(t=parseInt(t,10));let r=W(e.style,n.style);r&&!(""+r).match(V1)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:W(e.family,n.family),lineHeight:U1(W(e.lineHeight,n.lineHeight),t),size:t,style:r,weight:W(e.weight,n.weight),string:""};return i.string=F1(i),i}function ys(e,n,t,r){let i=!0,o,s,a;for(o=0,s=e.length;o<s;++o)if(a=e[o],a!==void 0&&(n!==void 0&&typeof a=="function"&&(a=a(n),i=!1),t!==void 0&&ye(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function RC(e,n,t){let{min:r,max:i}=e,o=Rm(n,(i-r)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function fr(e,n){return Object.assign(Object.create(e),n)}function qd(e,n=[""],t,r,i=()=>e[0]){let o=t||e;typeof r>"u"&&(r=NC("_fallback",e));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>qd([a,...e],n,o,r)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete e[0][c],!0},get(a,c){return kC(a,c,()=>Q1(c,n,e,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,c){return uC(a).includes(c)},ownKeys(a){return uC(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Gi(e,n,t,r){let i={_cacheable:!1,_proxy:e,_context:n,_subProxy:t,_stack:new Set,_descriptors:Km(e,r),setContext:o=>Gi(e,o,t,r),override:o=>Gi(e.override(o),n,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete e[s],!0},get(o,s,a){return kC(o,s,()=>W1(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(o,s){return Reflect.has(e,s)},ownKeys(){return Reflect.ownKeys(e)},set(o,s,a){return e[s]=a,delete o[s],!0}})}function Km(e,n={scriptable:!0,indexable:!0}){let{_scriptable:t=n.scriptable,_indexable:r=n.indexable,_allKeys:i=n.allKeys}=e;return{allKeys:i,scriptable:t,indexable:r,isScriptable:lr(t)?t:()=>t,isIndexable:lr(r)?r:()=>r}}var z1=(e,n)=>e?e+Bd(n):n,Ym=(e,n)=>ne(n)&&e!=="adapters"&&(Object.getPrototypeOf(n)===null||n.constructor===Object);function kC(e,n,t){if(Object.prototype.hasOwnProperty.call(e,n)||n==="constructor")return e[n];let r=t();return e[n]=r,r}function W1(e,n,t){let{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=e,a=r[n];return lr(a)&&s.isScriptable(n)&&(a=q1(n,a,e,t)),ye(a)&&a.length&&(a=G1(n,a,e,s.isIndexable)),Ym(n,a)&&(a=Gi(a,i,o&&o[n],s)),a}function q1(e,n,t,r){let{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let c=n(o,s||r);return a.delete(e),Ym(e,c)&&(c=Zm(i._scopes,i,e,c)),c}function G1(e,n,t,r){let{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(e))return n[o.index%n.length];if(ne(n[0])){let c=n,l=i._scopes.filter(u=>u!==c);n=[];for(let u of c){let d=Zm(l,i,e,u);n.push(Gi(d,o,s&&s[e],a))}}return n}function OC(e,n,t){return lr(e)?e(n,t):e}var K1=(e,n)=>e===!0?n:typeof e=="string"?dr(n,e):void 0;function Y1(e,n,t,r,i){for(let o of n){let s=K1(t,o);if(s){e.add(s);let a=OC(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function Zm(e,n,t,r){let i=n._rootScopes,o=OC(n._fallback,t,r),s=[...e,...i],a=new Set;a.add(r);let c=lC(a,s,t,o||t,r);return c===null||typeof o<"u"&&o!==t&&(c=lC(a,s,o,c,r),c===null)?!1:qd(Array.from(a),[""],i,o,()=>Z1(n,t,r))}function lC(e,n,t,r,i){for(;t;)t=Y1(e,n,t,r,i);return t}function Z1(e,n,t){let r=e._getTarget();n in r||(r[n]={});let i=r[n];return ye(i)&&ne(t)?t:i||{}}function Q1(e,n,t,r){let i;for(let o of n)if(i=NC(z1(o,e),t),typeof i<"u")return Ym(e,i)?Zm(t,r,e,i):i}function NC(e,n){for(let t of n){if(!t)continue;let r=t[e];if(typeof r<"u")return r}}function uC(e){let n=e._keys;return n||(n=e._keys=J1(e._scopes)),n}function J1(e){let n=new Set;for(let t of e)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))n.add(r);return Array.from(n)}function Qm(e,n,t,r){let{iScale:i}=e,{key:o="r"}=this._parsing,s=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=n[l],s[a]={r:i.parse(dr(u,o),l)};return s}var X1=Number.EPSILON||1e-14,ds=(e,n)=>n<e.length&&!e[n].skip&&e[n],PC=e=>e==="x"?"y":"x";function eP(e,n,t,r){let i=e.skip?n:e,o=n,s=t.skip?n:t,a=Ld(o,i),c=Ld(s,o),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=r*l,h=r*u;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function tP(e,n,t){let r=e.length,i,o,s,a,c,l=ds(e,0);for(let u=0;u<r-1;++u)if(c=l,l=ds(e,u+1),!(!c||!l)){if(ps(n[u],0,X1)){t[u]=t[u+1]=0;continue}i=t[u]/n[u],o=t[u+1]/n[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[u]=i*s*n[u],t[u+1]=o*s*n[u])}}function nP(e,n,t="x"){let r=PC(t),i=e.length,o,s,a,c=ds(e,0);for(let l=0;l<i;++l){if(s=a,a=c,c=ds(e,l+1),!a)continue;let u=a[t],d=a[r];s&&(o=(u-s[t])/3,a[`cp1${t}`]=u-o,a[`cp1${r}`]=d-o*n[l]),c&&(o=(c[t]-u)/3,a[`cp2${t}`]=u+o,a[`cp2${r}`]=d+o*n[l])}}function rP(e,n="x"){let t=PC(n),r=e.length,i=Array(r).fill(0),o=Array(r),s,a,c,l=ds(e,0);for(s=0;s<r;++s)if(a=c,c=l,l=ds(e,s+1),!!c){if(l){let u=l[n]-c[n];i[s]=u!==0?(l[t]-c[t])/u:0}o[s]=a?l?yn(i[s-1])!==yn(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}tP(e,i,o),nP(e,o,n)}function Od(e,n,t){return Math.max(Math.min(e,t),n)}function iP(e,n){let t,r,i,o,s,a=jn(e[0],n);for(t=0,r=e.length;t<r;++t)s=o,o=a,a=t<r-1&&jn(e[t+1],n),o&&(i=e[t],s&&(i.cp1x=Od(i.cp1x,n.left,n.right),i.cp1y=Od(i.cp1y,n.top,n.bottom)),a&&(i.cp2x=Od(i.cp2x,n.left,n.right),i.cp2y=Od(i.cp2y,n.top,n.bottom)))}function FC(e,n,t,r,i){let o,s,a,c;if(n.spanGaps&&(e=e.filter(l=>!l.skip)),n.cubicInterpolationMode==="monotone")rP(e,i);else{let l=r?e[e.length-1]:e[0];for(o=0,s=e.length;o<s;++o)a=e[o],c=eP(l,a,e[Math.min(o+1,s-(r?0:1))%s],n.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}n.capBezierPoints&&iP(e,t)}function Gd(){return typeof window<"u"&&typeof document<"u"}function Kd(e){let n=e.parentNode;return n&&n.toString()==="[object ShadowRoot]"&&(n=n.host),n}function jd(e,n,t){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*n.parentNode[t])):r=e,r}var Yd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function oP(e,n){return Yd(e).getPropertyValue(n)}var sP=["top","right","bottom","left"];function qi(e,n,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=sP[i];r[o]=parseFloat(e[n+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var aP=(e,n,t)=>(e>0||n>0)&&(!t||!t.shadowRoot);function cP(e,n){let t=e.touches,r=t&&t.length?t[0]:e,{offsetX:i,offsetY:o}=r,s=!1,a,c;if(aP(i,o,e.target))a=i,c=o;else{let l=n.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,s=!0}return{x:a,y:c,box:s}}function Gr(e,n){if("native"in e)return e;let{canvas:t,currentDevicePixelRatio:r}=n,i=Yd(t),o=i.boxSizing==="border-box",s=qi(i,"padding"),a=qi(i,"border","width"),{x:c,y:l,box:u}=cP(e,t),d=s.left+(u&&a.left),h=s.top+(u&&a.top),{width:f,height:p}=n;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((c-d)/f*t.width/r),y:Math.round((l-h)/p*t.height/r)}}function lP(e,n,t){let r,i;if(n===void 0||t===void 0){let o=e&&Kd(e);if(!o)n=e.clientWidth,t=e.clientHeight;else{let s=o.getBoundingClientRect(),a=Yd(o),c=qi(a,"border","width"),l=qi(a,"padding");n=s.width-l.width-c.width,t=s.height-l.height-c.height,r=jd(a.maxWidth,o,"clientWidth"),i=jd(a.maxHeight,o,"clientHeight")}}return{width:n,height:t,maxWidth:r||Fd,maxHeight:i||Fd}}var Ur=e=>Math.round(e*10)/10;function LC(e,n,t,r){let i=Yd(e),o=qi(i,"margin"),s=jd(i.maxWidth,e,"clientWidth")||Fd,a=jd(i.maxHeight,e,"clientHeight")||Fd,c=lP(e,n,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let h=qi(i,"border","width"),f=qi(i,"padding");l-=f.width+h.width,u-=f.height+h.height}return l=Math.max(0,l-o.width),u=Math.max(0,r?l/r:u-o.height),l=Ur(Math.min(l,s,c.maxWidth)),u=Ur(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Ur(l/2)),(n!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=Ur(Math.floor(u*r))),{width:l,height:u}}function Jm(e,n,t){let r=n||1,i=Ur(e.height*r),o=Ur(e.width*r);e.height=Ur(e.height),e.width=Ur(e.width);let s=e.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${e.height}px`,s.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(e.currentDevicePixelRatio=r,s.height=i,s.width=o,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}var jC=(function(){let e=!1;try{let n={get passive(){return e=!0,!1}};Gd()&&(window.addEventListener("test",null,n),window.removeEventListener("test",null,n))}catch{}return e})();function Xm(e,n){let t=oP(e,n),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vr(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)}}function BC(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:r==="middle"?t<.5?e.y:n.y:r==="after"?t<1?e.y:n.y:t>0?n.y:e.y}}function $C(e,n,t,r){let i={x:e.cp2x,y:e.cp2y},o={x:n.cp1x,y:n.cp1y},s=Vr(e,i,t),a=Vr(i,o,t),c=Vr(o,n,t),l=Vr(s,a,t),u=Vr(a,c,t);return Vr(l,u,t)}var uP=function(e,n){return{x(t){return e+e+n-t},setWidth(t){n=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},dP=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,n){return e+n},leftForLtr(e,n){return e}}};function Yi(e,n,t){return e?uP(n,t):dP()}function ev(e,n){let t,r;(n==="ltr"||n==="rtl")&&(t=e.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",n,"important"),e.prevTextDirection=r)}function tv(e,n){n!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",n[0],n[1]))}function VC(e){return e==="angle"?{between:gs,compare:T1,normalize:at}:{between:$n,compare:(n,t)=>n-t,normalize:n=>n}}function dC({start:e,end:n,count:t,loop:r,style:i}){return{start:e%t,end:n%t,loop:r&&(n-e+1)%t===0,style:i}}function fP(e,n,t){let{property:r,start:i,end:o}=t,{between:s,normalize:a}=VC(r),c=n.length,{start:l,end:u,loop:d}=e,h,f;if(d){for(l+=c,u+=c,h=0,f=c;h<f&&s(a(n[l%c][r]),i,o);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:e.style}}function nv(e,n,t){if(!t)return[e];let{property:r,start:i,end:o}=t,s=n.length,{compare:a,between:c,normalize:l}=VC(r),{start:u,end:d,loop:h,style:f}=fP(e,n,t),p=[],g=!1,m=null,y,_,w,E=()=>c(i,w,y)&&a(i,w)!==0,C=()=>a(o,y)===0||c(o,w,y),S=()=>g||E(),x=()=>!g||C();for(let R=u,N=u;R<=d;++R)_=n[R%s],!_.skip&&(y=l(_[r]),y!==w&&(g=c(y,i,o),m===null&&S()&&(m=a(y,i)===0?R:N),m!==null&&x()&&(p.push(dC({start:m,end:R,loop:h,count:s,style:f})),m=null),N=R,w=y));return m!==null&&p.push(dC({start:m,end:d,loop:h,count:s,style:f})),p}function rv(e,n){let t=[],r=e.segments;for(let i=0;i<r.length;i++){let o=nv(r[i],e.points,n);o.length&&t.push(...o)}return t}function hP(e,n,t,r){let i=0,o=n-1;if(t&&!r)for(;i<n&&!e[i].skip;)i++;for(;i<n&&e[i].skip;)i++;for(i%=n,t&&(o+=i);o>i&&e[o%n].skip;)o--;return o%=n,{start:i,end:o}}function pP(e,n,t,r){let i=e.length,o=[],s=n,a=e[n],c;for(c=n+1;c<=t;++c){let l=e[c%i];l.skip||l.stop?a.skip||(r=!1,o.push({start:n%i,end:(c-1)%i,loop:r}),n=s=l.stop?c:null):(s=c,a.skip&&(n=c)),a=l}return s!==null&&o.push({start:n%i,end:s%i,loop:r}),o}function UC(e,n){let t=e.points,r=e.options.spanGaps,i=t.length;if(!i)return[];let o=!!e._loop,{start:s,end:a}=hP(t,i,o,r);if(r===!0)return fC(e,[{start:s,end:a,loop:o}],t,n);let c=a<s?a+i:a,l=!!e._fullLoop&&s===0&&a===i-1;return fC(e,pP(t,s,c,l),t,n)}function fC(e,n,t,r){return!r||!r.setContext||!t?n:gP(e,n,t,r)}function gP(e,n,t,r){let i=e._chart.getContext(),o=hC(e.options),{_datasetIndex:s,options:{spanGaps:a}}=e,c=t.length,l=[],u=o,d=n[0].start,h=d;function f(p,g,m,y){let _=a?-1:1;if(p!==g){for(p+=c;t[p%c].skip;)p-=_;for(;t[g%c].skip;)g+=_;p%c!==g%c&&(l.push({start:p%c,end:g%c,loop:m,style:y}),u=y,d=g%c)}}for(let p of n){d=a?d:p.start;let g=t[d%c],m;for(h=d+1;h<=p.end;h++){let y=t[h%c];m=hC(r.setContext(fr(i,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:s}))),mP(m,u)&&f(d,h-1,p.loop,u),g=y,u=m}d<h-1&&f(d,h-1,p.loop,u)}return l}function hC(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function mP(e,n){if(!n)return!1;let t=[],r=function(i,o){return Hm(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(e,r)!==JSON.stringify(n,r)}function Nd(e,n,t){return e.options.clip?e[t]:n[t]}function vP(e,n){let{xScale:t,yScale:r}=e;return t&&r?{left:Nd(t,n,"left"),right:Nd(t,n,"right"),top:Nd(r,n,"top"),bottom:Nd(r,n,"bottom")}:n}function iv(e,n){let t=n._clip;if(t.disabled)return!1;let r=vP(n,e.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?e.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?e.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var mv=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,t,r,i){let o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:n,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Bm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let o=r.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(n),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,n,"progress")),o.length||(r.running=!1,this._notify(i,r,n,"complete"),r.initial=!1),t+=o.length}),this._lastDate=n,t===0&&(this._running=!1)}_getAnims(n){let t=this._charts,r=t.get(n);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(n,r)),r}listen(n,t,r){this._getAnims(n).listeners[t].push(r)}add(n,t){!t||!t.length||this._getAnims(n).items.push(...t)}has(n){return this._getAnims(n).items.length>0}start(n){let t=this._charts.get(n);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(n){if(!this._running)return!1;let t=this._charts.get(n);return!(!t||!t.running||!t.items.length)}stop(n){let t=this._charts.get(n);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(n,t,Date.now(),"complete")}remove(n){return this._charts.delete(n)}},hr=new mv,HC="transparent",yP={boolean(e,n,t){return t>.5?n:e},color(e,n,t){let r=zm(e||HC),i=r.valid&&zm(n||HC);return i&&i.valid?i.mix(r,t).hexString():n},number(e,n,t){return e+(n-e)*t}},vv=class{constructor(n,t,r,i){let o=t[r];i=ys([n.to,i,o,n.from]);let s=ys([n.from,o,i]);this._active=!0,this._fn=n.fn||yP[n.type||typeof s],this._easing=ls[n.easing]||ls.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(n,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,n.duration)),this._total+=o,this._loop=!!n.loop,this._to=ys([n.to,t,i,n.from]),this._from=ys([n.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){let t=n-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}c=t/r%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(o,a,c)}wait(){let n=this._promises||(this._promises=[]);return new Promise((t,r)=>{n.push({res:t,rej:r})})}_notify(n){let t=n?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},of=class{constructor(n,t){this._chart=n,this._properties=new Map,this.configure(t)}configure(n){if(!ne(n))return;let t=Object.keys(we.animation),r=this._properties;Object.getOwnPropertyNames(n).forEach(i=>{let o=n[i];if(!ne(o))return;let s={};for(let a of t)s[a]=o[a];(ye(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(n,t){let r=t.options,i=_P(n,r);if(!i)return[];let o=this._createAnimations(i,r);return r.$shared&&bP(n.options.$animations,r).then(()=>{n.options=r},()=>{}),o}_createAnimations(n,t){let r=this._properties,i=[],o=n.$animations||(n.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let l=s[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(n,t));continue}let u=t[l],d=o[l],h=r.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){n[l]=u;continue}o[l]=d=new vv(h,n,l,u),i.push(d)}return i}update(n,t){if(this._properties.size===0){Object.assign(n,t);return}let r=this._createAnimations(n,t);if(r.length)return hr.add(this._chart,r),!0}};function bP(e,n){let t=[],r=Object.keys(n);for(let i=0;i<r.length;i++){let o=e[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function _P(e,n){if(!n)return;let t=e.options;if(!t){e.options=n;return}return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function zC(e,n){let t=e&&e.options||{},r=t.reverse,i=t.min===void 0?n:0,o=t.max===void 0?n:0;return{start:r?o:i,end:r?i:o}}function wP(e,n,t){if(t===!1)return!1;let r=zC(e,t),i=zC(n,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function EP(e){let n,t,r,i;return ne(e)?(n=e.top,t=e.right,r=e.bottom,i=e.left):n=t=r=i=e,{top:n,right:t,bottom:r,left:i,disabled:e===!1}}function HD(e,n){let t=[],r=e._getSortedDatasetMetas(n),i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function WC(e,n,t,r={}){let i=e.keys,o=r.mode==="single",s,a,c,l;if(n===null)return;let u=!1;for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===t){if(u=!0,r.all)continue;break}l=e.values[c],Te(l)&&(o||n===0||yn(n)===yn(l))&&(n+=l)}return!u&&!r.all?0:n}function CP(e,n){let{iScale:t,vScale:r}=n,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",s=Object.keys(e),a=new Array(s.length),c,l,u;for(c=0,l=s.length;c<l;++c)u=s[c],a[c]={[i]:u,[o]:e[u]};return a}function ov(e,n){let t=e&&e.options.stacked;return t||t===void 0&&n.stack!==void 0}function DP(e,n,t){return`${e.id}.${n.id}.${t.stack||t.type}`}function SP(e){let{min:n,max:t,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?n:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function xP(e,n,t){let r=e[n]||(e[n]={});return r[t]||(r[t]={})}function qC(e,n,t,r){for(let i of n.getMatchingVisibleMetas(r).reverse()){let o=e[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function GC(e,n){let{chart:t,_cachedMeta:r}=e,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,l=s.axis,u=DP(o,s,r),d=n.length,h;for(let f=0;f<d;++f){let p=n[f],{[c]:g,[l]:m}=p,y=p._stacks||(p._stacks={});h=y[l]=xP(i,u,g),h[a]=m,h._top=qC(h,s,!0,r.type),h._bottom=qC(h,s,!1,r.type);let _=h._visualValues||(h._visualValues={});_[a]=m}}function sv(e,n){let t=e.scales;return Object.keys(t).filter(r=>t[r].axis===n).shift()}function IP(e,n){return fr(e,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}function TP(e,n,t){return fr(e,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:t,index:n,mode:"default",type:"data"})}function mc(e,n){let t=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){n=n||e._parsed;for(let i of n){let o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}var av=e=>e==="reset"||e==="none",KC=(e,n)=>n?e:Object.assign({},e),MP=(e,n,t)=>e&&!n.hidden&&n._stacked&&{keys:HD(t,!0),values:null},Yr=(()=>{class e{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ov(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&mc(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,s=r.xAxisID=W(i.xAxisID,sv(t,"x")),a=r.yAxisID=W(i.yAxisID,sv(t,"y")),c=r.rAxisID=W(i.rAxisID,sv(t,"r")),l=r.indexAxis,u=r.iAxisID=o(l,s,a,c),d=r.vAxisID=o(l,a,s,c);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Lm(this._data,this),t._stacked&&mc(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(ne(r)){let o=this._cachedMeta;this._data=CP(r,o)}else if(i!==r){if(i){Lm(i,this);let o=this._cachedMeta;mc(o),o._parsed=[]}r&&Object.isExtensible(r)&&DC(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let s=r._stacked;r._stacked=ov(r.vScale,r),r.stack!==i.stack&&(o=!0,mc(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&(GC(this,r._parsed),r._stacked=ov(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:a}=i,c=s.axis,l=t===0&&r===o.length?!0:i._sorted,u=t>0&&i._parsed[t-1],d,h,f;if(this._parsing===!1)i._parsed=o,i._sorted=!0,f=o;else{ye(o[t])?f=this.parseArrayData(i,o,t,r):ne(o[t])?f=this.parseObjectData(i,o,t,r):f=this.parsePrimitiveData(i,o,t,r);let p=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<r;++d)i._parsed[d+t]=h=f[d],l&&(p()&&(l=!1),u=h);i._sorted=l}a&&GC(this,f)}parsePrimitiveData(t,r,i,o){let{iScale:s,vScale:a}=t,c=s.axis,l=a.axis,u=s.getLabels(),d=s===a,h=new Array(o),f,p,g;for(f=0,p=o;f<p;++f)g=f+i,h[f]={[c]:d||s.parse(u[g],g),[l]:a.parse(r[g],g)};return h}parseArrayData(t,r,i,o){let{xScale:s,yScale:a}=t,c=new Array(o),l,u,d,h;for(l=0,u=o;l<u;++l)d=l+i,h=r[d],c[l]={x:s.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,r,i,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(o),d,h,f,p;for(d=0,h=o;d<h;++d)f=d+i,p=r[f],u[d]={x:s.parse(dr(p,c),f),y:a.parse(dr(p,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let o=this.chart,s=this._cachedMeta,a=r[t.axis],c={keys:HD(o,!0),values:r._stacks[t.axis]._visualValues};return WC(c,a,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){let s=i[r.axis],a=s===null?NaN:s,c=o&&i._stacks[r.axis];o&&c&&(o.values=c,a=WC(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,c=this._getOtherScale(t),l=MP(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=SP(c),f,p;function g(){p=o[f];let m=p[c.axis];return!Te(p[t.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,t,p,l),s));++f);if(s){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,t,p,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],o,s,a;for(o=0,s=r.length;o<s;++o)a=r[o][t.axis],Te(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=EP(W(this.options.clip,wP(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,o=i.data||[],s=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||o.length-c,u=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(t,s,c,l),d=c;d<c+l;++d){let h=o[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=TP(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=IP(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let o=r==="active",s=this._cachedDataOpts,a=t+"-"+r,c=s[a],l=this.enableOptionSharing&&hs(i);if(c)return KC(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=o?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(we.elements[t]),g=()=>this.getContext(i,o,r),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=l,s[a]=Object.freeze(KC(m,l))),m}_resolveAnimations(t,r,i){let o=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,c=s[a];if(c)return c;let l;if(o.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,r),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(t,i,r))}let u=new of(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||av(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:a}}updateElement(t,r,i,o){av(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!av(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;let s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let o=i.length,s=r.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){let o=this._cachedMeta,s=o.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,r);i._stacked&&mc(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return e})();function AP(e,n){if(!e._cache.$bar){let t=e.getMatchingVisibleMetas(n),r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(e));e._cache.$bar=jm(r.sort((i,o)=>i-o))}return e._cache.$bar}function RP(e){let n=e.iScale,t=AP(n,e.type),r=n._length,i,o,s,a,c=()=>{s===32767||s===-32768||(hs(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=n.getPixelForValue(t[i]),c();for(a=void 0,i=0,o=n.ticks.length;i<o;++i)s=n.getPixelForTick(i),c();return r}function kP(e,n,t,r){let i=t.barThickness,o,s;return te(i)?(o=n.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:n.pixels[e]-o/2}}function OP(e,n,t,r){let i=n.pixels,o=i[e],s=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?n.end-n.start:a-o)),a===null&&(a=o+o-s);let l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:t.barPercentage,start:l}}function NP(e,n,t,r){let i=t.parse(e[0],r),o=t.parse(e[1],r),s=Math.min(i,o),a=Math.max(i,o),c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),n[t.axis]=l,n._custom={barStart:c,barEnd:l,start:i,end:o,min:s,max:a}}function zD(e,n,t,r){return ye(e)?NP(e,n,t,r):n[t.axis]=t.parse(e,r),n}function YC(e,n,t,r){let i=e.iScale,o=e.vScale,s=i.getLabels(),a=i===o,c=[],l,u,d,h;for(l=t,u=t+r;l<u;++l)h=n[l],d={},d[i.axis]=a||i.parse(s[l],l),c.push(zD(h,d,o,l));return c}function cv(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function PP(e,n,t){return e!==0?yn(e):(n.isHorizontal()?1:-1)*(n.min>=t?1:-1)}function FP(e){let n,t,r,i,o;return e.horizontal?(n=e.base>e.x,t="left",r="right"):(n=e.base<e.y,t="bottom",r="top"),n?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:n,top:i,bottom:o}}function LP(e,n,t,r){let i=n.borderSkipped,o={};if(!i){e.borderSkipped=o;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:l,bottom:u}=FP(e);i==="middle"&&t&&(e.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(o[ZC(u,s,a,c)]=!0,i=l)),o[ZC(i,s,a,c)]=!0,e.borderSkipped=o}function ZC(e,n,t,r){return r?(e=jP(e,n,t),e=QC(e,t,n)):e=QC(e,n,t),e}function jP(e,n,t){return e===n?t:e===t?n:e}function QC(e,n,t){return e==="start"?n:e==="end"?t:e}function BP(e,{inflateAmount:n},t){e.inflateAmount=n==="auto"?t===1?.33:0:n}var $P=(()=>{class e extends Yr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return YC(t,r,i,o)}parseArrayData(t,r,i,o){return YC(t,r,i,o)}parseObjectData(t,r,i,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],f,p,g,m;for(f=i,p=i+o;f<p;++f)m=r[f],g={},g[s.axis]=s.parse(dr(m,u),f),h.push(zD(dr(m,d),g,a,f));return h}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);let s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),a=s._custom,c=cv(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,o);for(let p=r;p<r+i;p++){let g=this.getParsed(p),m=s||te(g[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),_=(g._stacks||{})[c.axis],w={horizontal:u,base:m.base,enableBorderRadius:!_||cv(g._custom)||a===_._top||a===_._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};f&&(w.options=h||this.resolveDataElementOptions(p,t[p].active?"active":o));let E=w.options||t[p].options;LP(w,E,_,a),BP(w,E,d.ratio),this.updateElement(t[p],p,w,o)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=d=>{let h=d._parsed.find(p=>p[i.axis]===l),f=h&&h[d.vScale.axis];if(te(f)||isNaN(f))return!0};for(let d of o)if(!(r!==void 0&&u(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){let t={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[W(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){let o=this._getStacks(t,i),s=r!==void 0?o.indexOf(r):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,o=[],s,a;for(s=0,a=r.data.length;s<a;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let c=t.barThickness;return{min:c||RP(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,l=this.getParsed(t),u=l._custom,d=cv(u),h=l[r.axis],f=0,p=i?this.applyStack(r,l,i):h,g,m;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&yn(h)!==yn(u.barEnd)&&(f=0),f+=h);let y=!te(s)&&!d?s:f,_=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=r.getPixelForValue(f+p):g=_,m=g-_,Math.abs(m)<a){m=PP(m,r,c)*a,h===c&&(_-=m/2);let w=r.getPixelForDecimal(0),E=r.getPixelForDecimal(1),C=Math.min(w,E),S=Math.max(w,E);_=Math.max(Math.min(_,S),C),g=_+m,i&&!d&&(l._stacks[r.axis]._visualValues[o]=r.getValueForPixel(g)-r.getValueForPixel(_))}if(_===r.getPixelForValue(c)){let w=yn(m)*r.getLineWidthForValue(c)/2;_+=w,m-=w}return{size:m,base:_,head:g,center:g+m/2}}_calculateBarIndexPixels(t,r){let i=r.scale,o=this.options,s=o.skipNull,a=W(o.maxBarThickness,1/0),c,l,u=this._getAxisCount();if(r.grouped){let d=s?this._getStackCount(t):r.stackCount,h=o.barThickness==="flex"?OP(t,r,o,d*u):kP(t,r,o,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(W(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0)+p;c=h.start+h.chunk*g+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length,s=0;for(;s<o;++s)this.getParsed(s)[r.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}return e})(),VP=(()=>{class e extends Yr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){let s=super.parsePrimitiveData(t,r,i,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,r,i,o){let s=super.parseArrayData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=W(c[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,r,i,o){let s=super.parseObjectData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=W(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,o),d=a.axis,h=c.axis;for(let f=r;f<r+i;f++){let p=t[f],g=!s&&this.getParsed(f),m={},y=m[d]=s?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),_=m[h]=s?c.getBasePixel():c.getPixelForValue(g[h]);m.skip=isNaN(y)||isNaN(_),u&&(m.options=l||this.resolveDataElementOptions(f,p.active?"active":o),s&&(m.options.radius=0)),this.updateElement(p,f,m,o)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return r!=="active"&&(o.radius=0),o.radius+=W(i&&i._custom,s),o}}return e})();function UP(e,n,t){let r=1,i=1,o=0,s=0;if(n<be){let a=e,c=a+n,l=Math.cos(a),u=Math.sin(a),d=Math.cos(c),h=Math.sin(c),f=(w,E,C)=>gs(w,a,c,!0)?1:Math.max(E,E*t,C,C*t),p=(w,E,C)=>gs(w,a,c,!0)?-1:Math.min(E,E*t,C,C*t),g=f(0,l,d),m=f(Re,u,h),y=p(de,l,d),_=p(de+Re,u,h);r=(g-y)/2,i=(m-_)/2,o=-(g+y)/2,s=-(m+_)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}var Lv=(()=>{class e extends Yr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data,{labels:{pointStyle:i,textAlign:o,color:s,useBorderRadius:a,borderRadius:c}}=t.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((l,u)=>{let h=t.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:h.backgroundColor,fontColor:s,hidden:!t.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:o,pointStyle:i,borderRadius:a&&(c||h.borderRadius),index:u}}):[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=l=>+i[l];if(ne(i[t])){let{key:l="value"}=this._parsing;s=u=>+dr(i[u],l)}let a,c;for(a=t,c=t+r;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return tn(this.options.rotation-90)}_getCircumference(){return tn(this.options.circumference)}_getRotationExtents(){let t=be,r=-be;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(gC(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=UP(h,d,l),y=(i.width-a)/f,_=(i.height-a)/p,w=Math.max(Math.min(y,_)/2,0),E=Rm(this.options.radius,w),C=Math.max(E*l,0),S=(E-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*E,this.offsetY=m*E,o.total=this.calculateTotal(),this.outerRadius=E-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){let i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/be)}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,d=(c.left+c.right)/2,h=(c.top+c.bottom)/2,f=s&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(r,o),_=this._getRotation(),w;for(w=0;w<r;++w)_+=this._circumference(w,s);for(w=r;w<r+i;++w){let E=this._circumference(w,s),C=t[w],S={x:d+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+E,circumference:E,outerRadius:g,innerRadius:p};y&&(S.options=m||this.resolveDataElementOptions(w,C.active?"active":o)),_+=E,this.updateElement(C,w,S,o)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,o;for(o=0;o<r.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?be*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=ms(r._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0,i=this.chart,o,s,a,c,l;if(!t){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){a=i.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=c.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){let s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(W(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return e})(),HP=(()=>{class e extends Yr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:c,count:l}=Vm(r,o,a);this._drawStart=c,this._drawCount=l,Um(r)&&(c=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(o,c,l,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(r,o),f=a.axis,p=c.axis,{spanGaps:g,segment:m}=this.options,y=Ki(g)?g:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||o==="none",w=r+i,E=t.length,C=r>0&&this.getParsed(r-1);for(let S=0;S<E;++S){let x=t[S],R=_?x:{};if(S<r||S>=w){R.skip=!0;continue}let N=this.getParsed(S),B=te(N[p]),Q=R[f]=a.getPixelForValue(N[f],S),re=R[p]=s||B?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,N,l):N[p],S);R.skip=isNaN(Q)||isNaN(re)||B,R.stop=S>0&&Math.abs(N[f]-C[f])>y,m&&(R.parsed=N,R.raw=u.data[S]),h&&(R.options=d||this.resolveDataElementOptions(S,x.active?"active":o)),_||this.updateElement(x,S,R,o),C=N}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return e})(),WD=(()=>{class e extends Yr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=ms(r._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return Qm.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*de,p=f,g,m=360/this.countVisibleElements();for(g=0;g<r;++g)p+=this._computeAngle(g,o,m);for(g=r;g<r+i;g++){let y=t[g],_=p,w=p+this._computeAngle(g,o,m),E=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=w,s&&(l.animateScale&&(E=0),l.animateRotate&&(_=w=f));let C={x:d,y:h,innerRadius:0,outerRadius:E,startAngle:_,endAngle:w,options:this.resolveDataElementOptions(g,y.active?"active":o)};this.updateElement(y,g,C,o)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?tn(this.resolveDataElementOptions(t,r).angle||i):0}}return e})(),zP=(()=>{class e extends Lv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return e})(),WP=(()=>{class e extends Yr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return Qm.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=r;c<r+i;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":o),d=s.getPointPositionForValue(c,this.getParsed(c).r),h=a?s.xCenter:d.x,f=a?s.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(l,c,p,o)}}}return e})(),qP=(()=>{class e extends Yr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled,{start:s,count:a}=Vm(r,i,o);if(this._drawStart=s,this._drawCount=a,Um(r)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(r,o),h=this.getSharedOptions(d),f=this.includeOptions(o,h),p=a.axis,g=c.axis,{spanGaps:m,segment:y}=this.options,_=Ki(m)?m:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||o==="none",E=r>0&&this.getParsed(r-1);for(let C=r;C<r+i;++C){let S=t[C],x=this.getParsed(C),R=w?S:{},N=te(x[g]),B=R[p]=a.getPixelForValue(x[p],C),Q=R[g]=s||N?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,x,l):x[g],C);R.skip=isNaN(B)||isNaN(Q)||N,R.stop=C>0&&Math.abs(x[p]-E[p])>_,y&&(R.parsed=x,R.raw=u.data[C]),f&&(R.options=h||this.resolveDataElementOptions(C,S.active?"active":o)),w||this.updateElement(S,C,R,o),E=x}this.updateSharedOptions(h,o,d)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,a)/2}}return e})(),GP=Object.freeze({__proto__:null,BarController:$P,BubbleController:VP,DoughnutController:Lv,LineController:HP,PieController:zP,PolarAreaController:WD,RadarController:WP,ScatterController:qP});function Zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var yv=class e{static override(n){Object.assign(e.prototype,n)}options;constructor(n){this.options=n||{}}init(){}formats(){return Zi()}parse(){return Zi()}format(){return Zi()}add(){return Zi()}diff(){return Zi()}startOf(){return Zi()}endOf(){return Zi()}},KP={_date:yv};function YP(e,n,t,r){let{controller:i,data:o,_sorted:s}=e,a=i._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&n===a.axis&&n!=="r"&&s&&o.length){let l=a._reversePixels?wC:Ln;if(r){if(i._sharedOptions){let u=o[0],d=typeof u.getRange=="function"&&u.getRange(n);if(d){let h=l(o,n,t-d),f=l(o,n,t+d);return{lo:h.lo,hi:f.hi}}}}else{let u=l(o,n,t);if(c){let{vScale:d}=i._cachedMeta,{_parsed:h}=e,f=h.slice(0,u.lo+1).reverse().findIndex(g=>!te(g[d.axis]));u.lo-=Math.max(0,f);let p=h.slice(u.hi).findIndex(g=>!te(g[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:o.length-1}}function xc(e,n,t,r,i){let o=e.getSortedVisibleDatasetMetas(),s=t[n];for(let a=0,c=o.length;a<c;++a){let{index:l,data:u}=o[a],{lo:d,hi:h}=YP(o[a],n,s,i);for(let f=d;f<=h;++f){let p=u[f];p.skip||r(p,l,f)}}}function ZP(e){let n=e.indexOf("x")!==-1,t=e.indexOf("y")!==-1;return function(r,i){let o=n?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function lv(e,n,t,r,i){let o=[];return!i&&!e.isPointInArea(n)||xc(e,t,n,function(a,c,l){!i&&!jn(a,e.chartArea,0)||a.inRange(n.x,n.y,r)&&o.push({element:a,datasetIndex:c,index:l})},!0),o}function QP(e,n,t,r){let i=[];function o(s,a,c){let{startAngle:l,endAngle:u}=s.getProps(["startAngle","endAngle"],r),{angle:d}=Fm(s,{x:n.x,y:n.y});gs(d,l,u)&&i.push({element:s,datasetIndex:a,index:c})}return xc(e,t,n,o),i}function JP(e,n,t,r,i,o){let s=[],a=ZP(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let f=u.inRange(n.x,n.y,i);if(r&&!f)return;let p=u.getCenterPoint(i);if(!(!!o||e.isPointInArea(p))&&!f)return;let m=a(n,p);m<c?(s=[{element:u,datasetIndex:d,index:h}],c=m):m===c&&s.push({element:u,datasetIndex:d,index:h})}return xc(e,t,n,l),s}function uv(e,n,t,r,i,o){return!o&&!e.isPointInArea(n)?[]:t==="r"&&!r?QP(e,n,t,i):JP(e,n,t,r,i,o)}function JC(e,n,t,r,i){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return xc(e,t,n,(c,l,u)=>{c[s]&&c[s](n[t],i)&&(o.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(n.x,n.y,i))}),r&&!a?[]:o}var XP={evaluateInteractionItems:xc,modes:{index(e,n,t,r){let i=Gr(n,e),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?lv(e,i,o,r,s):uv(e,i,o,!1,r,s),c=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(e,n,t,r){let i=Gr(n,e),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?lv(e,i,o,r,s):uv(e,i,o,!1,r,s);if(a.length>0){let c=a[0].datasetIndex,l=e.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(e,n,t,r){let i=Gr(n,e),o=t.axis||"xy",s=t.includeInvisible||!1;return lv(e,i,o,r,s)},nearest(e,n,t,r){let i=Gr(n,e),o=t.axis||"xy",s=t.includeInvisible||!1;return uv(e,i,o,t.intersect,r,s)},x(e,n,t,r){let i=Gr(n,e);return JC(e,i,"x",t.intersect,r)},y(e,n,t,r){let i=Gr(n,e);return JC(e,i,"y",t.intersect,r)}}},qD=["left","top","right","bottom"];function vc(e,n){return e.filter(t=>t.pos===n)}function XC(e,n){return e.filter(t=>qD.indexOf(t.pos)===-1&&t.box.axis===n)}function yc(e,n){return e.sort((t,r)=>{let i=n?r:t,o=n?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function eF(e){let n=[],t,r,i,o,s,a;for(t=0,r=(e||[]).length;t<r;++t)i=e[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,n.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return n}function tF(e){let n={};for(let t of e){let{stack:r,pos:i,stackWeight:o}=t;if(!r||!qD.includes(i))continue;let s=n[r]||(n[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return n}function nF(e,n){let t=tF(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=n,o,s,a;for(o=0,s=e.length;o<s;++o){a=e[o];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&n.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&n.availableHeight)}return t}function rF(e){let n=eF(e),t=yc(n.filter(l=>l.box.fullSize),!0),r=yc(vc(n,"left"),!0),i=yc(vc(n,"right")),o=yc(vc(n,"top"),!0),s=yc(vc(n,"bottom")),a=XC(n,"x"),c=XC(n,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:vc(n,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}function eD(e,n,t,r){return Math.max(e[t],n[t])+Math.max(e[r],n[r])}function GD(e,n){e.top=Math.max(e.top,n.top),e.left=Math.max(e.left,n.left),e.bottom=Math.max(e.bottom,n.bottom),e.right=Math.max(e.right,n.right)}function iF(e,n,t,r){let{pos:i,box:o}=t,s=e.maxPadding;if(!ne(i)){t.size&&(e[i]-=t.size);let d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?o.height:o.width),t.size=d.size/d.count,e[i]+=t.size}o.getPadding&&GD(s,o.getPadding());let a=Math.max(0,n.outerWidth-eD(s,e,"left","right")),c=Math.max(0,n.outerHeight-eD(s,e,"top","bottom")),l=a!==e.w,u=c!==e.h;return e.w=a,e.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function oF(e){let n=e.maxPadding;function t(r){let i=Math.max(n[r]-e[r],0);return e[r]+=i,i}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}function sF(e,n){let t=n.maxPadding;function r(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(n[s],t[s])}),o}return r(e?["left","right"]:["top","bottom"])}function wc(e,n,t,r){let i=[],o,s,a,c,l,u;for(o=0,s=e.length,l=0;o<s;++o){a=e[o],c=a.box,c.update(a.width||n.w,a.height||n.h,sF(a.horizontal,n));let{same:d,other:h}=iF(n,t,a,r);l|=d&&i.length,u=u||h,c.fullSize||i.push(a)}return l&&wc(i,n,t,r)||u}function Zd(e,n,t,r,i){e.top=t,e.left=n,e.right=n+r,e.bottom=t+i,e.width=r,e.height=i}function tD(e,n,t,r){let i=t.padding,{x:o,y:s}=n;for(let a of e){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=n.w*u,h=l.size||c.height;hs(l.start)&&(s=l.start),c.fullSize?Zd(c,i.left,s,t.outerWidth-i.right-i.left,h):Zd(c,n.left+l.placed,s,d,h),l.start=s,l.placed+=d,s=c.bottom}else{let d=n.h*u,h=l.size||c.width;hs(l.start)&&(o=l.start),c.fullSize?Zd(c,o,i.top,h,t.outerHeight-i.bottom-i.top):Zd(c,o,n.top+l.placed,h,d),l.start=o,l.placed+=d,o=c.right}}n.x=o,n.y=s}var mt={addBox(e,n){e.boxes||(e.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(t){n.draw(t)}}]},e.boxes.push(n)},removeBox(e,n){let t=e.boxes?e.boxes.indexOf(n):-1;t!==-1&&e.boxes.splice(t,1)},configure(e,n,t){n.fullSize=t.fullSize,n.position=t.position,n.weight=t.weight},update(e,n,t,r){if(!e)return;let i=lt(e.options.layout.padding),o=Math.max(n-i.width,0),s=Math.max(t-i.height,0),a=rF(e.boxes),c=a.vertical,l=a.horizontal;pe(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=c.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:n,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},i);GD(h,lt(r));let f=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),p=nF(c.concat(l),d);wc(a.fullSize,f,d,p),wc(c,f,d,p),wc(l,f,d,p)&&wc(c,f,d,p),oF(f),tD(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,tD(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},pe(a.chartArea,g=>{let m=g.box;Object.assign(m,e.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},sf=class{acquireContext(n,t){}releaseContext(n){return!1}addEventListener(n,t,r){}removeEventListener(n,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(n,t,r,i){return t=Math.max(0,t||n.width),r=r||n.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(n){return!0}updateConfig(n){}},bv=class extends sf{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}},nf="$chartjs",aF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nD=e=>e===null||e==="";function cF(e,n){let t=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[nf]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",nD(i)){let o=Xm(e,"width");o!==void 0&&(e.width=o)}if(nD(r))if(e.style.height==="")e.height=e.width/(n||2);else{let o=Xm(e,"height");o!==void 0&&(e.height=o)}return e}var KD=jC?{passive:!0}:!1;function lF(e,n,t){e&&e.addEventListener(n,t,KD)}function uF(e,n,t){e&&e.canvas&&e.canvas.removeEventListener(n,t,KD)}function dF(e,n){let t=aF[e.type]||e.type,{x:r,y:i}=Gr(e,n);return{type:t,chart:n,native:e,x:r!==void 0?r:null,y:i!==void 0?i:null}}function af(e,n){for(let t of e)if(t===n||t.contains(n))return!0}function fF(e,n,t){let r=e.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||af(a.addedNodes,r),s=s&&!af(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function hF(e,n,t){let r=e.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||af(a.removedNodes,r),s=s&&!af(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var Cc=new Map,rD=0;function YD(){let e=window.devicePixelRatio;e!==rD&&(rD=e,Cc.forEach((n,t)=>{t.currentDevicePixelRatio!==e&&n()}))}function pF(e,n){Cc.size||window.addEventListener("resize",YD),Cc.set(e,n)}function gF(e){Cc.delete(e),Cc.size||window.removeEventListener("resize",YD)}function mF(e,n,t){let r=e.canvas,i=r&&Kd(r);if(!i)return;let o=$m((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||o(l,u)});return s.observe(i),pF(e,o),s}function dv(e,n,t){t&&t.disconnect(),n==="resize"&&gF(e)}function vF(e,n,t){let r=e.canvas,i=$m(o=>{e.ctx!==null&&t(dF(o,e))},e);return lF(r,n,i),i}var _v=class extends sf{acquireContext(n,t){let r=n&&n.getContext&&n.getContext("2d");return r&&r.canvas===n?(cF(n,t),r):null}releaseContext(n){let t=n.canvas;if(!t[nf])return!1;let r=t[nf].initial;["height","width"].forEach(o=>{let s=r[o];te(s)?t.removeAttribute(o):t.setAttribute(o,s)});let i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[nf],!0}addEventListener(n,t,r){this.removeEventListener(n,t);let i=n.$proxies||(n.$proxies={}),s={attach:fF,detach:hF,resize:mF}[t]||vF;i[t]=s(n,t,r)}removeEventListener(n,t){let r=n.$proxies||(n.$proxies={}),i=r[t];if(!i)return;({attach:dv,detach:dv,resize:dv}[t]||uF)(n,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,t,r,i){return LC(n,t,r,i)}isAttached(n){let t=n&&Kd(n);return!!(t&&t.isConnected)}};function yF(e){return!Gd()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?bv:_v}var bn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(n){let{x:t,y:r}=this.getProps(["x","y"],n);return{x:t,y:r}}hasValue(){return Ki(this.x)&&Ki(this.y)}getProps(n,t){let r=this.$animations;if(!t||!r)return this;let i={};return n.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}};function bF(e,n){let t=e.options.ticks,r=_F(e),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?EF(n):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>i)return CF(n,l,o,s/i),l;let u=wF(o,n,i);if(s>0){let d,h,f=s>1?Math.round((c-a)/(s-1)):null;for(Qd(n,l,u,te(f)?0:a-f,a),d=0,h=s-1;d<h;d++)Qd(n,l,u,o[d],o[d+1]);return Qd(n,l,u,c,te(f)?n.length:c+f),l}return Qd(n,l,u),l}function _F(e){let n=e.options.offset,t=e._tickSize(),r=e._length/t+(n?0:1),i=e._maxLength/t;return Math.floor(Math.min(r,i))}function wF(e,n,t){let r=DF(e),i=n.length/t;if(!r)return Math.max(i,1);let o=yC(r);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>i)return c}return Math.max(i,1)}function EF(e){let n=[],t,r;for(t=0,r=e.length;t<r;t++)e[t].major&&n.push(t);return n}function CF(e,n,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<e.length;s++)s===o&&(n.push(e[s]),i++,o=t[i*r])}function Qd(e,n,t,r,i){let o=W(r,0),s=Math.min(W(i,e.length),e.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=o;u<0;)a++,u=Math.round(o+a*t);for(l=Math.max(o,0);l<s;l++)l===u&&(n.push(e[l]),a++,u=Math.round(o+a*t))}function DF(e){let n=e.length,t,r;if(n<2)return!1;for(r=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==r)return!1;return r}var SF=e=>e==="left"?"right":e==="right"?"left":e,iD=(e,n,t)=>n==="top"||n==="left"?e[n]+t:e[n]-t,oD=(e,n)=>Math.min(n||e,e);function sD(e,n){let t=[],r=e.length/n,i=e.length,o=0;for(;o<i;o+=r)t.push(e[Math.floor(o)]);return t}function xF(e,n,t){let r=e.ticks.length,i=Math.min(n,r-1),o=e._startPixel,s=e._endPixel,a=1e-6,c=e.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-o,s-c):n===0?l=(e.getPixelForTick(1)-c)/2:l=(c-e.getPixelForTick(i-1))/2,c+=i<n?l:-l,c<o-a||c>s+a)))return c}function IF(e,n){pe(e,t=>{let r=t.gc,i=r.length/2,o;if(i>n){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function bc(e){return e.drawTicks?e.tickLength:0}function aD(e,n){if(!e.display)return 0;let t=je(e.font,n),r=lt(e.padding);return(ye(e.text)?e.text.length:1)*t.lineHeight+r.height}function TF(e,n){return fr(e,{scale:n,type:"scale"})}function MF(e,n,t){return fr(e,{tick:t,index:n,type:"tick"})}function AF(e,n,t){let r=Ud(e);return(t&&n!=="right"||!t&&n==="right")&&(r=SF(r)),r}function RF(e,n,t,r){let{top:i,left:o,bottom:s,right:a,chart:c}=e,{chartArea:l,scales:u}=c,d=0,h,f,p,g=s-i,m=a-o;if(e.isHorizontal()){if(f=ct(r,o,a),ne(t)){let y=Object.keys(t)[0],_=t[y];p=u[y].getPixelForValue(_)+g-n}else t==="center"?p=(l.bottom+l.top)/2+g-n:p=iD(e,t,n);h=a-o}else{if(ne(t)){let y=Object.keys(t)[0],_=t[y];f=u[y].getPixelForValue(_)-m+n}else t==="center"?f=(l.left+l.right)/2-m+n:f=iD(e,t,n);p=ct(r,s,i),d=t==="left"?-Re:Re}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var Ji=class e extends bn{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,t){return n}getUserBounds(){let{_userMin:n,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return n=Tt(n,Number.POSITIVE_INFINITY),t=Tt(t,Number.NEGATIVE_INFINITY),r=Tt(r,Number.POSITIVE_INFINITY),i=Tt(i,Number.NEGATIVE_INFINITY),{min:Tt(n,r),max:Tt(t,i),minDefined:Te(n),maxDefined:Te(t)}}getMinMax(n){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)s=a[c].controller.getMinMax(this,n),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:Tt(t,Tt(r,t)),max:Tt(r,Tt(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ve(this.options.beforeUpdate,[this])}update(n,t,r){let{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=RC(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?sD(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=bF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,n=!n),this._startPixel=t,this._endPixel=r,this._reversePixels=n,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ve(this.options.afterUpdate,[this])}beforeSetDimensions(){ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ve(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),ve(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){let t=this.options.ticks,r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r],o.label=ve(t.callback,[o.value,r,n],this)}afterTickToLabelConversion(){ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let n=this.options,t=n.ticks,r=oD(this.ticks.length,n.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,s=i,a,c,l;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=qe(this.chart.width-d,0,this.maxWidth);a=n.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(n.offset?.5:1)),c=this.maxHeight-bc(n.grid)-t.padding-aD(n.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),s=$d(Math.min(Math.asin(qe((u.highest.height+6)/a,-1,1)),Math.asin(qe(c/l,-1,1))-Math.asin(qe(h/l,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ve(this.options.beforeFit,[this])}fit(){let n={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=aD(i,t.options.font);if(a?(n.width=this.maxWidth,n.height=bc(o)+c):(n.height=this.maxHeight,n.width=bc(o)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=tn(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let y=r.mirror?0:m*d.width+g*h.height;n.height=Math.min(this.maxHeight,n.height+y+f)}else{let y=r.mirror?0:g*d.width+m*h.height;n.width=Math.min(this.maxWidth,n.width+y+f)}this._calculatePadding(l,u,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,t,r,i){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;c?l?(h=i*n.width,f=r*t.height):(h=r*n.height,f=i*t.width):o==="start"?f=t.width:o==="end"?h=n.width:o!=="inner"&&(h=n.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+s)*this.width/(this.width-d),0)}else{let u=t.height/2,d=n.height/2;o==="start"?(u=0,d=n.height):o==="end"&&(u=t.height,d=0),this.paddingTop=u+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ve(this.options.afterFit,[this])}isHorizontal(){let{axis:n,position:t}=this.options;return t==="top"||t==="bottom"||n==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){this.beforeTickToLabelConversion(),this.generateTickLabels(n);let t,r;for(t=0,r=n.length;t<r;t++)te(n[t].label)&&(n.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=sD(r,t)),this._labelSizes=n=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,t,r){let{ctx:i,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/oD(t,r)),l=0,u=0,d,h,f,p,g,m,y,_,w,E,C;for(d=0;d<t;d+=c){if(p=n[d].label,g=this._resolveTickFontOptions(d),i.font=m=g.string,y=o[m]=o[m]||{data:{},gc:[]},_=g.lineHeight,w=E=0,!te(p)&&!ye(p))w=dc(i,y.data,y.gc,w,p),E=_;else if(ye(p))for(h=0,f=p.length;h<f;++h)C=p[h],!te(C)&&!ye(C)&&(w=dc(i,y.data,y.gc,w,C),E+=_);s.push(w),a.push(E),l=Math.max(w,l),u=Math.max(E,u)}IF(o,t);let S=s.indexOf(l),x=a.indexOf(u),R=N=>({width:s[N]||0,height:a[N]||0});return{first:R(0),last:R(t-1),widest:R(S),highest:R(x),widths:s,heights:a}}getLabelForValue(n){return n}getPixelForValue(n,t){return NaN}getValueForPixel(n){}getPixelForTick(n){let t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);let t=this._startPixel+n*this._length;return _C(this._alignToPixels?zr(this.chart,t,0):t)}getDecimalForPixel(n){let t=(n-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:n,max:t}=this;return n<0&&t<0?t:n>0&&t>0?n:0}getContext(n){let t=this.ticks||[];if(n>=0&&n<t.length){let r=t[n];return r.$context||(r.$context=MF(this.getContext(),n,r))}return this.$context||(this.$context=TF(this.chart.getContext(),this))}_tickSize(){let n=this.options.ticks,t=tn(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=n.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let n=this.options.display;return n!=="auto"?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){let t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,c=o.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=bc(o),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(Ee){return zr(r,Ee,g)},_,w,E,C,S,x,R,N,B,Q,re,nt;if(s==="top")_=y(this.bottom),x=this.bottom-h,N=_-m,Q=y(n.top)+m,nt=n.bottom;else if(s==="bottom")_=y(this.top),Q=n.top,nt=y(n.bottom)-m,x=_+m,N=this.top+h;else if(s==="left")_=y(this.right),S=this.right-h,R=_-m,B=y(n.left)+m,re=n.right;else if(s==="right")_=y(this.left),B=n.left,re=y(n.right)-m,S=_+m,R=this.left+h;else if(t==="x"){if(s==="center")_=y((n.top+n.bottom)/2+.5);else if(ne(s)){let Ee=Object.keys(s)[0],ke=s[Ee];_=y(this.chart.scales[Ee].getPixelForValue(ke))}Q=n.top,nt=n.bottom,x=_+m,N=x+h}else if(t==="y"){if(s==="center")_=y((n.left+n.right)/2);else if(ne(s)){let Ee=Object.keys(s)[0],ke=s[Ee];_=y(this.chart.scales[Ee].getPixelForValue(ke))}S=_-m,R=S-h,B=n.left,re=n.right}let Rt=W(i.ticks.maxTicksLimit,d),ge=Math.max(1,Math.ceil(d/Rt));for(w=0;w<d;w+=ge){let Ee=this.getContext(w),ke=o.setContext(Ee),nn=a.setContext(Ee),ut=ke.lineWidth,Xi=ke.color,Tc=nn.dash||[],eo=nn.dashOffset,Es=ke.tickWidth,Zr=ke.tickColor,Cs=ke.tickBorderDash||[],Qr=ke.tickBorderDashOffset;E=xF(this,w,c),E!==void 0&&(C=zr(r,E,ut),l?S=R=B=re=C:x=N=Q=nt=C,f.push({tx1:S,ty1:x,tx2:R,ty2:N,x1:B,y1:Q,x2:re,y2:nt,width:ut,color:Xi,borderDash:Tc,borderDashOffset:eo,tickWidth:Es,tickColor:Zr,tickBorderDash:Cs,tickBorderDashOffset:Qr}))}return this._ticksLength=d,this._borderValue=_,f}_computeLabelItems(n){let t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=o,h=bc(r.grid),f=h+u,p=d?-u:f,g=-tn(this.labelRotation),m=[],y,_,w,E,C,S,x,R,N,B,Q,re,nt="middle";if(i==="top")S=this.bottom-p,x=this._getXAxisLabelAlignment();else if(i==="bottom")S=this.top+p,x=this._getXAxisLabelAlignment();else if(i==="left"){let ge=this._getYAxisLabelAlignment(h);x=ge.textAlign,C=ge.x}else if(i==="right"){let ge=this._getYAxisLabelAlignment(h);x=ge.textAlign,C=ge.x}else if(t==="x"){if(i==="center")S=(n.top+n.bottom)/2+f;else if(ne(i)){let ge=Object.keys(i)[0],Ee=i[ge];S=this.chart.scales[ge].getPixelForValue(Ee)+f}x=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")C=(n.left+n.right)/2-f;else if(ne(i)){let ge=Object.keys(i)[0],Ee=i[ge];C=this.chart.scales[ge].getPixelForValue(Ee)}x=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?nt="top":c==="end"&&(nt="bottom"));let Rt=this._getLabelSizes();for(y=0,_=a.length;y<_;++y){w=a[y],E=w.label;let ge=o.setContext(this.getContext(y));R=this.getPixelForTick(y)+o.labelOffset,N=this._resolveTickFontOptions(y),B=N.lineHeight,Q=ye(E)?E.length:1;let Ee=Q/2,ke=ge.color,nn=ge.textStrokeColor,ut=ge.textStrokeWidth,Xi=x;s?(C=R,x==="inner"&&(y===_-1?Xi=this.options.reverse?"left":"right":y===0?Xi=this.options.reverse?"right":"left":Xi="center"),i==="top"?l==="near"||g!==0?re=-Q*B+B/2:l==="center"?re=-Rt.highest.height/2-Ee*B+B:re=-Rt.highest.height+B/2:l==="near"||g!==0?re=B/2:l==="center"?re=Rt.highest.height/2-Ee*B:re=Rt.highest.height-Q*B,d&&(re*=-1),g!==0&&!ge.showLabelBackdrop&&(C+=B/2*Math.sin(g))):(S=R,re=(1-Q)*B/2);let Tc;if(ge.showLabelBackdrop){let eo=lt(ge.backdropPadding),Es=Rt.heights[y],Zr=Rt.widths[y],Cs=re-eo.top,Qr=0-eo.left;switch(nt){case"middle":Cs-=Es/2;break;case"bottom":Cs-=Es;break}switch(x){case"center":Qr-=Zr/2;break;case"right":Qr-=Zr;break;case"inner":y===_-1?Qr-=Zr:y>0&&(Qr-=Zr/2);break}Tc={left:Qr,top:Cs,width:Zr+eo.width,height:Es+eo.height,color:ge.backdropColor}}m.push({label:E,font:N,textOffset:re,options:{rotation:g,color:ke,strokeColor:nn,strokeWidth:ut,textAlign:Xi,textBaseline:nt,translation:[C,S],backdrop:Tc}})}return m}_getXAxisLabelAlignment(){let{position:n,ticks:t}=this.options;if(-tn(this.labelRotation))return n==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(n){let{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=n+o,c=s.widest.width,l,u;return t==="left"?i?(u=this.right+o,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+o,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let n=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:n.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:n.width}}drawBackground(){let{ctx:n,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(n.save(),n.fillStyle=t,n.fillRect(r,i,o,s),n.restore())}getLineWidthForValue(n){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===n);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(n){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n)),o,s,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){let c=i[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:n,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=zr(n,this.left,s)-s/2,u=zr(n,this.right,a)+a/2,d=h=c):(d=zr(n,this.top,s)-s/2,h=zr(n,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(n){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&pc(r,i);let o=this.getLabelItems(n);for(let s of o){let a=s.options,c=s.font,l=s.label,u=s.textOffset;Wr(r,l,0,u,c,a)}i&&gc(r)}drawTitle(){let{ctx:n,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let o=je(r.font),s=lt(r.padding),a=r.align,c=o.lineHeight/2;t==="bottom"||t==="center"||ne(t)?(c+=s.bottom,ye(r.text)&&(c+=o.lineHeight*(r.text.length-1))):c+=s.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=RF(this,c,t,a);Wr(n,r.text,0,0,o,{color:r.color,maxWidth:d,rotation:h,textAlign:AF(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){let n=this.options,t=n.ticks&&n.ticks.z||0,r=W(n.grid&&n.grid.z,-1),i=W(n.border&&n.border.z,0);return!this._isVisible()||this.draw!==e.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(n){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[r]===this.id&&(!n||a.type===n)&&i.push(a)}return i}_resolveTickFontOptions(n){let t=this.options.ticks.setContext(this.getContext(n));return je(t.font)}_maxDigits(){let n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}},_s=class{constructor(n,t,r){this.type=n,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){let t=Object.getPrototypeOf(n),r;NF(t)&&(r=this.register(t));let i=this.items,o=n.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+n);return o in i||(i[o]=n,kF(n,s,r),this.override&&we.override(n.id,n.overrides)),s}get(n){return this.items[n]}unregister(n){let t=this.items,r=n.id,i=this.scope;r in t&&delete t[r],i&&r in we[i]&&(delete we[i][r],this.override&&delete Hr[r])}};function kF(e,n,t){let r=us(Object.create(null),[t?we.get(t):{},we.get(n),e.defaults]);we.set(n,r),e.defaultRoutes&&OF(n,e.defaultRoutes),e.descriptors&&we.describe(n,e.descriptors)}function OF(e,n){Object.keys(n).forEach(t=>{let r=t.split("."),i=r.pop(),o=[e].concat(r).join("."),s=n[t].split("."),a=s.pop(),c=s.join(".");we.route(o,i,c,a)})}function NF(e){return"id"in e&&"defaults"in e}var wv=class{constructor(){this.controllers=new _s(Yr,"datasets",!0),this.elements=new _s(bn,"elements"),this.plugins=new _s(Object,"plugins"),this.scales=new _s(Ji,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,t,r){[...t].forEach(i=>{let o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(n,o,i):pe(i,s=>{let a=r||this._getRegistryForType(s);this._exec(n,a,s)})})}_exec(n,t,r){let i=Bd(n);ve(r["before"+i],[],r),t[n](r),ve(r["after"+i],[],r)}_getRegistryForType(n){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(n))return r}return this.plugins}_get(n,t,r){let i=t.get(n);if(i===void 0)throw new Error('"'+n+'" is not a registered '+r+".");return i}},Un=new wv,Ev=class{constructor(){this._init=void 0}notify(n,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install")),this._init===void 0)return;let o=i?this._descriptors(n).filter(i):this._descriptors(n),s=this._notify(o,n,t,r);return t==="afterDestroy"&&(this._notify(o,n,"stop"),this._notify(this._init,n,"uninstall"),this._init=void 0),s}_notify(n,t,r,i){i=i||{};for(let o of n){let s=o.plugin,a=s[r],c=[t,i,o.options];if(ve(a,c,s)===!1&&i.cancelable)return!1}return!0}invalidate(){te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),t}_createDescriptors(n,t){let r=n&&n.config,i=W(r.options&&r.options.plugins,{}),o=PF(r);return i===!1&&!t?[]:LF(n,o,i,t)}_notifyStateChanges(n){let t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),n,"stop"),this._notify(i(r,t),n,"start")}};function PF(e){let n={},t=[],r=Object.keys(Un.plugins.items);for(let o=0;o<r.length;o++)t.push(Un.getPlugin(r[o]));let i=e.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];t.indexOf(s)===-1&&(t.push(s),n[s.id]=!0)}return{plugins:t,localIds:n}}function FF(e,n){return!n&&e===!1?null:e===!0?{}:e}function LF(e,{plugins:n,localIds:t},r,i){let o=[],s=e.getContext();for(let a of n){let c=a.id,l=FF(r[c],i);l!==null&&o.push({plugin:a,options:jF(e.config,{plugin:a,local:t[c]},l,s)})}return o}function jF(e,{plugin:n,local:t},r,i){let o=e.pluginScopeKeys(n),s=e.getOptionScopes(r,o);return t&&n.defaults&&s.push(n.defaults),e.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cv(e,n){let t=we.datasets[e]||{};return((n.datasets||{})[e]||{}).indexAxis||n.indexAxis||t.indexAxis||"x"}function BF(e,n){let t=e;return e==="_index_"?t=n:e==="_value_"&&(t=n==="x"?"y":"x"),t}function $F(e,n){return e===n?"_index_":"_value_"}function cD(e){if(e==="x"||e==="y"||e==="r")return e}function VF(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Dv(e,...n){if(cD(e))return e;for(let t of n){let r=t.axis||VF(t.position)||e.length>1&&cD(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function lD(e,n,t){if(t[n+"AxisID"]===e)return{axis:n}}function UF(e,n){if(n.data&&n.data.datasets){let t=n.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(t.length)return lD(e,"x",t[0])||lD(e,"y",t[0])}return{}}function HF(e,n){let t=Hr[e.type]||{scales:{}},r=n.scales||{},i=Cv(e.type,n),o=Object.create(null);return Object.keys(r).forEach(s=>{let a=r[s];if(!ne(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=Dv(s,a,UF(s,e),we.scales[a.type]),l=$F(c,i),u=t.scales||{};o[s]=fs(Object.create(null),[{axis:c},a,u[c],u[l]])}),e.data.datasets.forEach(s=>{let a=s.type||e.type,c=s.indexAxis||Cv(a,n),u=(Hr[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=BF(d,c),f=s[h+"AxisID"]||h;o[f]=o[f]||Object.create(null),fs(o[f],[{axis:h},r[f],u[d]])})}),Object.keys(o).forEach(s=>{let a=o[s];fs(a,[we.scales[a.type],we.scale])}),o}function ZD(e){let n=e.options||(e.options={});n.plugins=W(n.plugins,{}),n.scales=HF(e,n)}function QD(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function zF(e){return e=e||{},e.data=QD(e.data),ZD(e),e}var uD=new Map,JD=new Set;function Jd(e,n){let t=uD.get(e);return t||(t=n(),uD.set(e,t),JD.add(t)),t}var _c=(e,n,t)=>{let r=dr(n,t);r!==void 0&&e.add(r)},Sv=class{constructor(n){this._config=zF(n),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=QD(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){let n=this._config;this.clearCache(),ZD(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return Jd(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,t){return Jd(`${n}.transition.${t}`,()=>[[`datasets.${n}.transitions.${t}`,`transitions.${t}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,t){return Jd(`${n}-${t}`,()=>[[`datasets.${n}.elements.${t}`,`datasets.${n}`,`elements.${t}`,""]])}pluginScopeKeys(n){let t=n.id,r=this.type;return Jd(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,t){let r=this._scopeCache,i=r.get(n);return(!i||t)&&(i=new Map,r.set(n,i)),i}getOptionScopes(n,t,r){let{options:i,type:o}=this,s=this._cachedScopes(n,r),a=s.get(t);if(a)return a;let c=new Set;t.forEach(u=>{n&&(c.add(n),u.forEach(d=>_c(c,n,d))),u.forEach(d=>_c(c,i,d)),u.forEach(d=>_c(c,Hr[o]||{},d)),u.forEach(d=>_c(c,we,d)),u.forEach(d=>_c(c,Hd,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),JD.has(t)&&s.set(t,l),l}chartOptionScopes(){let{options:n,type:t}=this;return[n,Hr[t]||{},we.datasets[t]||{},{type:t},we,Hd]}resolveNamedOptions(n,t,r,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=dD(this._resolverCache,n,i),c=s;if(qF(s,t)){o.$shared=!1,r=lr(r)?r():r;let l=this.createResolver(n,r,a);c=Gi(s,r,l)}for(let l of t)o[l]=c[l];return o}createResolver(n,t,r=[""],i){let{resolver:o}=dD(this._resolverCache,n,r);return ne(t)?Gi(o,t,void 0,i):o}};function dD(e,n,t){let r=e.get(n);r||(r=new Map,e.set(n,r));let i=t.join(),o=r.get(i);return o||(o={resolver:qd(n,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}var WF=e=>ne(e)&&Object.getOwnPropertyNames(e).some(n=>lr(e[n]));function qF(e,n){let{isScriptable:t,isIndexable:r}=Km(e);for(let i of n){let o=t(i),s=r(i),a=(s||o)&&e[i];if(o&&(lr(a)||WF(a))||s&&ye(a))return!0}return!1}var GF="4.5.1",KF=["top","bottom","left","right","chartArea"];function fD(e,n){return e==="top"||e==="bottom"||KF.indexOf(e)===-1&&n==="x"}function hD(e,n){return function(t,r){return t[e]===r[e]?t[n]-r[n]:t[e]-r[e]}}function pD(e){let n=e.chart,t=n.options.animation;n.notifyPlugins("afterRender"),ve(t&&t.onComplete,[e],n)}function YF(e){let n=e.chart,t=n.options.animation;ve(t&&t.onProgress,[e],n)}function XD(e){return Gd()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var rf={},gD=e=>{let n=XD(e);return Object.values(rf).filter(t=>t.canvas===n).pop()};function ZF(e,n,t){let r=Object.keys(e);for(let i of r){let o=+i;if(o>=n){let s=e[i];delete e[i],(t>0||o>n)&&(e[o+t]=s)}}}function QF(e,n,t,r){return!t||e.type==="mouseout"?null:r?n:e}var Ic=(()=>{class e{static defaults=we;static instances=rf;static overrides=Hr;static registry=Un;static version=GF;static getChart=gD;static register(...t){Un.add(...t),mD()}static unregister(...t){Un.remove(...t),mD()}constructor(t,r){let i=this.config=new Sv(r),o=XD(t),s=gD(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||yF(o)),this.platform.updateConfig(i);let c=this.platform.acquireContext(o,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=pC(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ev,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=SC(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],rf[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}hr.listen(this,"complete",pD),hr.listen(this,"progress",YF),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return te(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Un}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Jm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Wm(this.canvas,this.ctx),this}stop(){return hr.stop(this),this}resize(t,r){hr.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,r,s),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Jm(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ve(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};pe(r,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let c=r[a],l=Dv(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pe(s,a=>{let c=a.options,l=c.id,u=Dv(l,c),d=W(c.type,a.dtype);(c.position===void 0||fD(c.position,u)!==fD(a.dposition))&&(c.position=a.dposition),o[l]=!0;let h=null;if(l in i&&i[l].type===d)h=i[l];else{let f=Un.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(c,t)}),pe(o,(a,c)=>{a||delete i[c]}),pe(i,a=>{mt.configure(this,a,a.options),mt.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(hD("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{r.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){let s=r[i],a=this.getDatasetMeta(i),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=s.indexAxis||Cv(c,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Un.getController(c),{datasetElementType:u,dataElementType:d}=we.datasets[c];Object.assign(l,{dataElementType:Un.getElement(d),datasetElementType:u&&Un.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){pe(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!o&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),o||pe(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(hD("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){pe(this.scales,t=>{mt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!km(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:s}of r){let a=i==="_removeElements"?-s:s;ZF(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!km(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mt.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],pe(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,lr(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(hr.has(this)?this.attached&&!hr.running(this)&&hr.start(this):(this.draw(),pD({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],o,s;for(o=0,s=r.length;o<s;++o){let a=r[o];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=iv(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&pc(r,o),t.controller.draw(),o&&gc(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return jn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){let s=XP.modes[r];return typeof s=="function"?s(this,t,i,o):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=fr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let o=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);hs(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),hr.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Wm(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete rf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(s,a)=>{r.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};pe(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){pe(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},pe(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let o=i?"set":"remove",s,a,c,l;for(r==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!fc(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let o=this.options.hover,s=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=s(r,t),c=i?t:s(t,r);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:o=[],options:s}=this,a=r,c=this._getActiveElements(t,o,i,a),l=vC(t),u=QF(t,this._lastEvent,i,l);i&&(this._lastEvent=null,ve(s.onHover,[t,c,this],this),l&&ve(s.onClick,[t,c,this],this));let d=!fc(c,o);return(d||r)&&(this._active=c,this._updateHoverStyles(c,o,r)),this._lastEvent=u,d}_getActiveElements(t,r,i,o){if(t.type==="mouseout")return[];if(!i)return r;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return e})();function mD(){return pe(Ic.instances,e=>e._plugins.invalidate())}function JF(e,n,t){let{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:a,options:c}=n,{borderWidth:l,borderJoinStyle:u}=c,d=Math.min(l/s,at(r-t));if(e.beginPath(),e.arc(i,o,s-l/2,r+d/2,t-d/2),a>0){let h=Math.min(l/a,at(r-t));e.arc(i,o,a+l/2,t-h/2,r+h/2,!0)}else{let h=Math.min(l/2,s*at(r-t));if(u==="round")e.arc(i,o,h,t-de/2,r+de/2,!0);else if(u==="bevel"){let f=2*h*h,p=-f*Math.cos(t+de/2)+i,g=-f*Math.sin(t+de/2)+o,m=f*Math.cos(r+de/2)+i,y=f*Math.sin(r+de/2)+o;e.lineTo(p,g),e.lineTo(m,y)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function XF(e,n,t){let{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=n,l=i/a;e.beginPath(),e.arc(o,s,a,r-l,t+l),c>i?(l=i/c,e.arc(o,s,c,t+l,r-l,!0)):e.arc(o,s,i,t+Re,r-Re),e.closePath(),e.clip()}function eL(e){return Wd(e,["outerStart","outerEnd","innerStart","innerEnd"])}function tL(e,n,t,r){let i=eL(e.options.borderRadius),o=(t-n)/2,s=Math.min(o,r*n/2),a=c=>{let l=(t-Math.min(o,c))*r/2;return qe(c,0,Math.min(o,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:qe(i.innerStart,0,s),innerEnd:qe(i.innerEnd,0,s)}}function bs(e,n,t,r){return{x:t+e*Math.cos(n),y:r+e*Math.sin(n)}}function cf(e,n,t,r,i,o){let{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=n,d=Math.max(n.outerRadius+r+t-l,0),h=u>0?u+r+t+l:0,f=0,p=i-c;if(r){let ge=u>0?u-r:0,Ee=d>0?d-r:0,ke=(ge+Ee)/2,nn=ke!==0?p*ke/(ke+r):p;f=(p-nn)/2}let g=Math.max(.001,p*d-t/de)/d,m=(p-g)/2,y=c+m+f,_=i-m-f,{outerStart:w,outerEnd:E,innerStart:C,innerEnd:S}=tL(n,h,d,_-y),x=d-w,R=d-E,N=y+w/x,B=_-E/R,Q=h+C,re=h+S,nt=y+C/Q,Rt=_-S/re;if(e.beginPath(),o){let ge=(N+B)/2;if(e.arc(s,a,d,N,ge),e.arc(s,a,d,ge,B),E>0){let ut=bs(R,B,s,a);e.arc(ut.x,ut.y,E,B,_+Re)}let Ee=bs(re,_,s,a);if(e.lineTo(Ee.x,Ee.y),S>0){let ut=bs(re,Rt,s,a);e.arc(ut.x,ut.y,S,_+Re,Rt+Math.PI)}let ke=(_-S/h+(y+C/h))/2;if(e.arc(s,a,h,_-S/h,ke,!0),e.arc(s,a,h,ke,y+C/h,!0),C>0){let ut=bs(Q,nt,s,a);e.arc(ut.x,ut.y,C,nt+Math.PI,y-Re)}let nn=bs(x,y,s,a);if(e.lineTo(nn.x,nn.y),w>0){let ut=bs(x,N,s,a);e.arc(ut.x,ut.y,w,y-Re,N)}}else{e.moveTo(s,a);let ge=Math.cos(N)*d+s,Ee=Math.sin(N)*d+a;e.lineTo(ge,Ee);let ke=Math.cos(B)*d+s,nn=Math.sin(B)*d+a;e.lineTo(ke,nn)}e.closePath()}function nL(e,n,t,r,i){let{fullCircles:o,startAngle:s,circumference:a}=n,c=n.endAngle;if(o){cf(e,n,t,r,c,i);for(let l=0;l<o;++l)e.fill();isNaN(a)||(c=s+(a%be||be))}return cf(e,n,t,r,c,i),e.fill(),c}function rL(e,n,t,r,i){let{fullCircles:o,startAngle:s,circumference:a,options:c}=n,{borderWidth:l,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=c,p=c.borderAlign==="inner";if(!l)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=l*2,e.lineJoin=u||"round"):(e.lineWidth=l,e.lineJoin=u||"bevel");let g=n.endAngle;if(o){cf(e,n,t,r,g,i);for(let m=0;m<o;++m)e.stroke();isNaN(a)||(g=s+(a%be||be))}p&&XF(e,n,g),c.selfJoin&&g-s>=de&&f===0&&u!=="miter"&&JF(e,n,g),o||(cf(e,n,t,r,g,i),e.stroke())}var xv=class extends bn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,t,r){let i=this.getProps(["x","y"],r),{angle:o,distance:s}=Fm(i,{x:n,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,f=W(d,c-a),p=gs(o,a,c)&&a!==c,g=f>=be||p,m=$n(s,l+h,u+h);return g&&m}getCenterPoint(n){let{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:l}=this.options,u=(i+o)/2,d=(s+a+l+c)/2;return{x:t+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){let{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>be?Math.floor(r/be):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();let a=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(de,r||0)),l=i*c;n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,nL(n,this,l,o,s),rL(n,this,l,o,s),n.restore()}};function eS(e,n,t=n){e.lineCap=W(t.borderCapStyle,n.borderCapStyle),e.setLineDash(W(t.borderDash,n.borderDash)),e.lineDashOffset=W(t.borderDashOffset,n.borderDashOffset),e.lineJoin=W(t.borderJoinStyle,n.borderJoinStyle),e.lineWidth=W(t.borderWidth,n.borderWidth),e.strokeStyle=W(t.borderColor,n.borderColor)}function iL(e,n,t){e.lineTo(t.x,t.y)}function oL(e){return e.stepped?MC:e.tension||e.cubicInterpolationMode==="monotone"?AC:iL}function tS(e,n,t={}){let r=e.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=n,c=Math.max(i,s),l=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:n.loop,ilen:l<c&&!u?r+l-c:l-c}}function sL(e,n,t,r){let{points:i,options:o}=n,{count:s,start:a,loop:c,ilen:l}=tS(i,t,r),u=oL(o),{move:d=!0,reverse:h}=r||{},f,p,g;for(f=0;f<=l;++f)p=i[(a+(h?l-f:f))%s],!p.skip&&(d?(e.moveTo(p.x,p.y),d=!1):u(e,g,p,h,o.stepped),g=p);return c&&(p=i[(a+(h?l:0))%s],u(e,g,p,h,o.stepped)),!!c}function aL(e,n,t,r){let i=n.points,{count:o,start:s,ilen:a}=tS(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,d=0,h,f,p,g,m,y,_=E=>(s+(l?a-E:E))%o,w=()=>{g!==m&&(e.lineTo(u,m),e.lineTo(u,g),e.lineTo(u,y))};for(c&&(f=i[_(0)],e.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[_(h)],f.skip)continue;let E=f.x,C=f.y,S=E|0;S===p?(C<g?g=C:C>m&&(m=C),u=(d*u+E)/++d):(w(),e.lineTo(E,C),p=S,d=0,g=m=C),y=C}w()}function Iv(e){let n=e.options,t=n.borderDash&&n.borderDash.length;return!e._decimated&&!e._loop&&!n.tension&&n.cubicInterpolationMode!=="monotone"&&!n.stepped&&!t?aL:sL}function cL(e){return e.stepped?BC:e.tension||e.cubicInterpolationMode==="monotone"?$C:Vr}function lL(e,n,t,r){let i=n._path;i||(i=n._path=new Path2D,n.path(i,t,r)&&i.closePath()),eS(e,n.options),e.stroke(i)}function uL(e,n,t,r){let{segments:i,options:o}=n,s=Iv(n);for(let a of i)eS(e,o,a.style),e.beginPath(),s(e,n,a,{start:t,end:t+r-1})&&e.closePath(),e.stroke()}var dL=typeof Path2D=="function";function fL(e,n,t,r){dL&&!n.options.segment?lL(e,n,t,r):uL(e,n,t,r)}var df=(()=>{class e extends bn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;FC(this._points,i,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=UC(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,o=t[r],s=this.points,a=rv(this,{property:r,start:o,end:o});if(!a.length)return;let c=[],l=cL(i),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=s[h],g=s[f];if(p===g){c.push(p);continue}let m=Math.abs((o-p[r])/(g[r]-p[r])),y=l(p,g,m,i.stepped);y[r]=t[r],c.push(y)}return c.length===1?c[0]:c}pathSegment(t,r,i){return Iv(this)(t,this,r,i)}path(t,r,i){let o=this.segments,s=Iv(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of o)a&=s(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),fL(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return e})();function vD(e,n,t,r){let i=e.options,{[t]:o}=e.getProps([t],r);return Math.abs(n-o)<i.radius+i.hitRadius}var hL=(()=>{class e extends bn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return vD(this,t,"x",r)}inYRange(t,r){return vD(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!jn(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,zd(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return e})();function nS(e,n){let{x:t,y:r,base:i,width:o,height:s}=e.getProps(["x","y","base","width","height"],n),a,c,l,u,d;return e.horizontal?(d=s/2,a=Math.min(t,i),c=Math.max(t,i),l=r-d,u=r+d):(d=o/2,a=t-d,c=t+d,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function Kr(e,n,t,r){return e?0:qe(n,t,r)}function pL(e,n,t){let r=e.options.borderWidth,i=e.borderSkipped,o=Gm(r);return{t:Kr(i.top,o.top,0,t),r:Kr(i.right,o.right,0,n),b:Kr(i.bottom,o.bottom,0,t),l:Kr(i.left,o.left,0,n)}}function gL(e,n,t){let{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,o=qr(i),s=Math.min(n,t),a=e.borderSkipped,c=r||ne(i);return{topLeft:Kr(!c||a.top||a.left,o.topLeft,0,s),topRight:Kr(!c||a.top||a.right,o.topRight,0,s),bottomLeft:Kr(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Kr(!c||a.bottom||a.right,o.bottomRight,0,s)}}function mL(e){let n=nS(e),t=n.right-n.left,r=n.bottom-n.top,i=pL(e,t/2,r/2),o=gL(e,t/2,r/2);return{outer:{x:n.left,y:n.top,w:t,h:r,radius:o},inner:{x:n.left+i.l,y:n.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function fv(e,n,t,r){let i=n===null,o=t===null,a=e&&!(i&&o)&&nS(e,r);return a&&(i||$n(n,a.left,a.right))&&(o||$n(t,a.top,a.bottom))}function vL(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function yL(e,n){e.rect(n.x,n.y,n.w,n.h)}function hv(e,n,t={}){let r=e.x!==t.x?-n:0,i=e.y!==t.y?-n:0,o=(e.x+e.w!==t.x+t.w?n:0)-r,s=(e.y+e.h!==t.y+t.h?n:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+o,h:e.h+s,radius:e.radius}}var Tv=class extends bn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=mL(this),a=vL(s.radius)?vs:yL;n.save(),(s.w!==o.w||s.h!==o.h)&&(n.beginPath(),a(n,hv(s,t,o)),n.clip(),a(n,hv(o,-t,s)),n.fillStyle=r,n.fill("evenodd")),n.beginPath(),a(n,hv(o,t)),n.fillStyle=i,n.fill(),n.restore()}inRange(n,t,r){return fv(this,n,t,r)}inXRange(n,t){return fv(this,n,null,t)}inYRange(n,t){return fv(this,null,n,t)}getCenterPoint(n){let{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],n);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(n){return n==="x"?this.width/2:this.height/2}},bL=Object.freeze({__proto__:null,ArcElement:xv,BarElement:Tv,LineElement:df,PointElement:hL}),Mv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],yD=Mv.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function rS(e){return Mv[e%Mv.length]}function iS(e){return yD[e%yD.length]}function _L(e,n){return e.borderColor=rS(n),e.backgroundColor=iS(n),++n}function wL(e,n){return e.backgroundColor=e.data.map(()=>rS(n++)),n}function EL(e,n){return e.backgroundColor=e.data.map(()=>iS(n++)),n}function CL(e){let n=0;return(t,r)=>{let i=e.getDatasetMeta(r).controller;i instanceof Lv?n=wL(t,n):i instanceof WD?n=EL(t,n):i&&(n=_L(t,n))}}function bD(e){let n;for(n in e)if(e[n].borderColor||e[n].backgroundColor)return!0;return!1}function DL(e){return e&&(e.borderColor||e.backgroundColor)}function SL(){return we.borderColor!=="rgba(0,0,0,0.1)"||we.backgroundColor!=="rgba(0,0,0,0.1)"}var xL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,n,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=e.config,{elements:o}=i,s=bD(r)||DL(i)||o&&bD(o)||SL();if(!t.forceOverride&&s)return;let a=CL(e);r.forEach(a)}};function IL(e,n,t,r,i){let o=i.samples||r;if(o>=t)return e.slice(n,n+t);let s=[],a=(t-2)/(o-2),c=0,l=n+t-1,u=n,d,h,f,p,g;for(s[c++]=e[u],d=0;d<o-2;d++){let m=0,y=0,_,w=Math.floor((d+1)*a)+1+n,E=Math.min(Math.floor((d+2)*a)+1,t)+n,C=E-w;for(_=w;_<E;_++)m+=e[_].x,y+=e[_].y;m/=C,y/=C;let S=Math.floor(d*a)+1+n,x=Math.min(Math.floor((d+1)*a)+1,t)+n,{x:R,y:N}=e[u];for(f=p=-1,_=S;_<x;_++)p=.5*Math.abs((R-m)*(e[_].y-N)-(R-e[_].x)*(y-N)),p>f&&(f=p,h=e[_],g=_);s[c++]=h,u=g}return s[c++]=e[l],s}function TL(e,n,t,r){let i=0,o=0,s,a,c,l,u,d,h,f,p,g,m=[],y=n+t-1,_=e[n].x,E=e[y].x-_;for(s=n;s<n+t;++s){a=e[s],c=(a.x-_)/E*r,l=a.y;let C=c|0;if(C===u)l<p?(p=l,d=s):l>g&&(g=l,h=s),i=(o*i+a.x)/++o;else{let S=s-1;if(!te(d)&&!te(h)){let x=Math.min(d,h),R=Math.max(d,h);x!==f&&x!==S&&m.push(ue(O({},e[x]),{x:i})),R!==f&&R!==S&&m.push(ue(O({},e[R]),{x:i}))}s>0&&S!==f&&m.push(e[S]),m.push(a),u=C,o=0,p=g=l,d=h=f=s}}return m}function oS(e){if(e._decimated){let n=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:n})}}function _D(e){e.data.datasets.forEach(n=>{oS(n)})}function ML(e,n){let t=n.length,r=0,i,{iScale:o}=e,{min:s,max:a,minDefined:c,maxDefined:l}=o.getUserBounds();return c&&(r=qe(Ln(n,o.axis,s).lo,0,t-1)),l?i=qe(Ln(n,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var AL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,n,t)=>{if(!t.enabled){_D(e);return}let r=e.width;e.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:a}=i,c=e.getDatasetMeta(o),l=s||i.data;if(ys([a,e.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=e.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:d,count:h}=ML(c,l),f=t.threshold||4*r;if(h<=f){oS(i);return}te(s)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=IL(l,d,h,r,t);break;case"min-max":p=TL(l,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=p})},destroy(e){_D(e)}};function RL(e,n,t){let r=e.segments,i=e.points,o=n.points,s=[];for(let a of r){let{start:c,end:l}=a;l=ff(c,l,i);let u=Av(t,i[c],i[l],a.loop);if(!n.segments){s.push({source:a,target:u,start:i[c],end:i[l]});continue}let d=rv(n,u);for(let h of d){let f=Av(t,o[h.start],o[h.end],h.loop),p=nv(a,i,f);for(let g of p)s.push({source:g,target:h,start:{[t]:wD(u,f,"start",Math.max)},end:{[t]:wD(u,f,"end",Math.min)}})}}return s}function Av(e,n,t,r){if(r)return;let i=n[e],o=t[e];return e==="angle"&&(i=at(i),o=at(o)),{property:e,start:i,end:o}}function kL(e,n){let{x:t=null,y:r=null}=e||{},i=n.points,o=[];return n.segments.forEach(({start:s,end:a})=>{a=ff(s,a,i);let c=i[s],l=i[a];r!==null?(o.push({x:c.x,y:r}),o.push({x:l.x,y:r})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:l.y}))}),o}function ff(e,n,t){for(;n>e;n--){let r=t[n];if(!isNaN(r.x)&&!isNaN(r.y))break}return n}function wD(e,n,t,r){return e&&n?r(e[t],n[t]):e?e[t]:n?n[t]:0}function sS(e,n){let t=[],r=!1;return ye(e)?(r=!0,t=e):t=kL(e,n),t.length?new df({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function ED(e){return e&&e.fill!==!1}function OL(e,n,t){let i=e[n].fill,o=[n],s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Te(i))return i;if(s=e[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function NL(e,n,t){let r=jL(e);if(ne(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Te(i)&&Math.floor(i)===i?PL(r[0],n,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function PL(e,n,t,r){return(e==="-"||e==="+")&&(t=n+t),t===n||t<0||t>=r?!1:t}function FL(e,n){let t=null;return e==="start"?t=n.bottom:e==="end"?t=n.top:ne(e)?t=n.getPixelForValue(e.value):n.getBasePixel&&(t=n.getBasePixel()),t}function LL(e,n,t){let r;return e==="start"?r=t:e==="end"?r=n.options.reverse?n.min:n.max:ne(e)?r=e.value:r=n.getBaseValue(),r}function jL(e){let n=e.options,t=n.fill,r=W(t&&t.target,t);return r===void 0&&(r=!!n.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function BL(e){let{scale:n,index:t,line:r}=e,i=[],o=r.segments,s=r.points,a=$L(n,t);a.push(sS({x:null,y:n.bottom},r));for(let c=0;c<o.length;c++){let l=o[c];for(let u=l.start;u<=l.end;u++)VL(i,s[u],a)}return new df({points:i,options:{}})}function $L(e,n){let t=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let o=r[i];if(o.index===n)break;o.hidden||t.unshift(o.dataset)}return t}function VL(e,n,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i],{first:s,last:a,point:c}=UL(o,n,"x");if(!(!c||s&&a)){if(s)r.unshift(c);else if(e.push(c),!a)break}}e.push(...r)}function UL(e,n,t){let r=e.interpolate(n,t);if(!r)return{};let i=r[t],o=e.segments,s=e.points,a=!1,c=!1;for(let l=0;l<o.length;l++){let u=o[l],d=s[u.start][t],h=s[u.end][t];if($n(i,d,h)){a=i===d,c=i===h;break}}return{first:a,last:c,point:r}}var lf=class{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,t,r){let{x:i,y:o,radius:s}=this;return t=t||{start:0,end:be},n.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(n){let{x:t,y:r,radius:i}=this,o=n.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}};function HL(e){let{chart:n,fill:t,line:r}=e;if(Te(t))return zL(n,t);if(t==="stack")return BL(e);if(t==="shape")return!0;let i=WL(e);return i instanceof lf?i:sS(i,r)}function zL(e,n){let t=e.getDatasetMeta(n);return t&&e.isDatasetVisible(n)?t.dataset:null}function WL(e){return(e.scale||{}).getPointPositionForValue?GL(e):qL(e)}function qL(e){let{scale:n={},fill:t}=e,r=FL(t,n);if(Te(r)){let i=n.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function GL(e){let{scale:n,fill:t}=e,r=n.options,i=n.getLabels().length,o=r.reverse?n.max:n.min,s=LL(t,n,o),a=[];if(r.grid.circular){let c=n.getPointPositionForValue(0,o);return new lf({x:c.x,y:c.y,radius:n.getDistanceFromCenterForValue(s)})}for(let c=0;c<i;++c)a.push(n.getPointPositionForValue(c,s));return a}function pv(e,n,t){let r=HL(n),{chart:i,index:o,line:s,scale:a,axis:c}=n,l=s.options,u=l.fill,d=l.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(o),g=iv(i,p);r&&s.points.length&&(pc(e,t),KL(e,{line:s,target:r,above:h,below:f,area:t,scale:a,axis:c,clip:g}),gc(e))}function KL(e,n){let{line:t,target:r,above:i,below:o,area:s,scale:a,clip:c}=n,l=t._loop?"angle":n.axis;e.save();let u=o;o!==i&&(l==="x"?(CD(e,r,s.top),gv(e,{line:t,target:r,color:i,scale:a,property:l,clip:c}),e.restore(),e.save(),CD(e,r,s.bottom)):l==="y"&&(DD(e,r,s.left),gv(e,{line:t,target:r,color:o,scale:a,property:l,clip:c}),e.restore(),e.save(),DD(e,r,s.right),u=i)),gv(e,{line:t,target:r,color:u,scale:a,property:l,clip:c}),e.restore()}function CD(e,n,t){let{segments:r,points:i}=n,o=!0,s=!1;e.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],d=i[ff(c,l,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(u.x,t),e.lineTo(u.x,u.y)),s=!!n.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(d.x,t)}e.lineTo(n.first().x,t),e.closePath(),e.clip()}function DD(e,n,t){let{segments:r,points:i}=n,o=!0,s=!1;e.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],d=i[ff(c,l,i)];o?(e.moveTo(u.x,u.y),o=!1):(e.lineTo(t,u.y),e.lineTo(u.x,u.y)),s=!!n.pathSegment(e,a,{move:s}),s?e.closePath():e.lineTo(t,d.y)}e.lineTo(t,n.first().y),e.closePath(),e.clip()}function gv(e,n){let{line:t,target:r,property:i,color:o,scale:s,clip:a}=n,c=RL(t,r,i);for(let{source:l,target:u,start:d,end:h}of c){let{style:{backgroundColor:f=o}={}}=l,p=r!==!0;e.save(),e.fillStyle=f,YL(e,s,a,p&&Av(i,d,h)),e.beginPath();let g=!!t.pathSegment(e,l),m;if(p){g?e.closePath():SD(e,r,h,i);let y=!!r.pathSegment(e,u,{move:g,reverse:!0});m=g&&y,m||SD(e,r,d,i)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function YL(e,n,t,r){let i=n.chart.chartArea,{property:o,start:s,end:a}=r||{};if(o==="x"||o==="y"){let c,l,u,d;o==="x"?(c=s,l=i.top,u=a,d=i.bottom):(c=i.left,l=s,u=i.right,d=a),e.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),d=Math.min(d,t.bottom)),e.rect(c,l,u-c,d-l),e.clip()}}function SD(e,n,t,r){let i=n.interpolate(t,r);i&&e.lineTo(i.x,i.y)}var ZL={id:"filler",afterDatasetsUpdate(e,n,t){let r=(e.data.datasets||[]).length,i=[],o,s,a,c;for(s=0;s<r;++s)o=e.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof df&&(c={visible:e.isDatasetVisible(s),index:s,fill:NL(a,s,r),chart:e,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,i.push(c);for(s=0;s<r;++s)c=i[s],!(!c||c.fill===!1)&&(c.fill=OL(i,s,t.propagate))},beforeDraw(e,n,t){let r=t.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),o=e.chartArea;for(let s=i.length-1;s>=0;--s){let a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&pv(e.ctx,a,o))}},beforeDatasetsDraw(e,n,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let o=r[i].$filler;ED(o)&&pv(e.ctx,o,e.chartArea)}},beforeDatasetDraw(e,n,t){let r=n.meta.$filler;!ED(r)||t.drawTime!=="beforeDatasetDraw"||pv(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},xD=(e,n)=>{let{boxHeight:t=n,boxWidth:r=n}=e;return e.usePointStyle&&(t=Math.min(t,n),r=e.pointStyleWidth||Math.min(r,n)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(n,t)}},QL=(e,n)=>e!==null&&n!==null&&e.datasetIndex===n.datasetIndex&&e.index===n.index,uf=class extends bn{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t,r){this.maxWidth=n,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let n=this.options.labels||{},t=ve(n.generateLabels,[this.chart],this)||[];n.filter&&(t=t.filter(r=>n.filter(r,this.chart.data))),n.sort&&(t=t.sort((r,i)=>n.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:n,ctx:t}=this;if(!n.display){this.width=this.height=0;return}let r=n.labels,i=je(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=xD(r,o),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(s,o,a,c)+10):(u=this.maxHeight,l=this._fitCols(s,i,a,c)+10),this.width=Math.min(l,n.maxWidth||this.maxWidth),this.height=Math.min(u,n.maxHeight||this.maxHeight)}_fitRows(n,t,r,i){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,d=n;o.textAlign="left",o.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=r+t/2+o.measureText(p.text).width;(g===0||l[l.length-1]+m+2*a>s)&&(d+=u,l[l.length-(g>0?0:1)]=0,f+=u,h++),c[g]={left:0,top:f,row:h,width:m,height:i},l[l.length-1]+=m+a}),d}_fitCols(n,t,r,i){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=s-n,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{let{itemWidth:_,itemHeight:w}=JL(r,t,o,m,i);y>0&&f+w+2*a>u&&(d+=h+a,l.push({width:h,height:f}),p+=h+a,g++,h=f=0),c[y]={left:p,top:f,col:g,width:_,height:w},h=Math.max(h,_),f+=w+a}),d+=h,l.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let n=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=Yi(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=ct(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=ct(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+n+i,l.left=s.leftForLtr(s.x(c),l.width),c+=l.width+i}else{let a=0,c=ct(r,this.top+n+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=ct(r,this.top+n+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=s.leftForLtr(s.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let n=this.ctx;pc(n,this),this._draw(),gc(n)}}_draw(){let{options:n,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=n,a=we.color,c=Yi(n.rtl,this.left,this.width),l=je(s.font),{padding:u}=s,d=l.size,h=d/2,f;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=xD(s,d),y=function(S,x,R){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();let N=W(R.lineWidth,1);if(i.fillStyle=W(R.fillStyle,a),i.lineCap=W(R.lineCap,"butt"),i.lineDashOffset=W(R.lineDashOffset,0),i.lineJoin=W(R.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=W(R.strokeStyle,a),i.setLineDash(W(R.lineDash,[])),s.usePointStyle){let B={radius:g*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:N},Q=c.xPlus(S,p/2),re=x+h;qm(i,B,Q,re,s.pointStyleWidth&&p)}else{let B=x+Math.max((d-g)/2,0),Q=c.leftForLtr(S,p),re=qr(R.borderRadius);i.beginPath(),Object.values(re).some(nt=>nt!==0)?vs(i,{x:Q,y:B,w:p,h:g,radius:re}):i.rect(Q,B,p,g),i.fill(),N!==0&&i.stroke()}i.restore()},_=function(S,x,R){Wr(i,R.text,S,x+m/2,l,{strikethrough:R.hidden,textAlign:c.textAlign(R.textAlign)})},w=this.isHorizontal(),E=this._computeTitleHeight();w?f={x:ct(o,this.left+u,this.right-r[0]),y:this.top+u+E,line:0}:f={x:this.left+u,y:ct(o,this.top+E+u,this.bottom-t[0].height),line:0},ev(this.ctx,n.textDirection);let C=m+u;this.legendItems.forEach((S,x)=>{i.strokeStyle=S.fontColor,i.fillStyle=S.fontColor;let R=i.measureText(S.text).width,N=c.textAlign(S.textAlign||(S.textAlign=s.textAlign)),B=p+h+R,Q=f.x,re=f.y;c.setWidth(this.width),w?x>0&&Q+B+u>this.right&&(re=f.y+=C,f.line++,Q=f.x=ct(o,this.left+u,this.right-r[f.line])):x>0&&re+C>this.bottom&&(Q=f.x=Q+t[f.line].width+u,f.line++,re=f.y=ct(o,this.top+E+u,this.bottom-t[f.line].height));let nt=c.x(Q);if(y(nt,re,S),Q=xC(N,Q+p+h,w?Q+B:this.right,n.rtl),_(c.x(Q),re,S),w)f.x+=B+u;else if(typeof S.text!="string"){let Rt=l.lineHeight;f.y+=aS(S,Rt)+u}else f.y+=C}),tv(this.ctx,n.textDirection)}drawTitle(){let n=this.options,t=n.title,r=je(t.font),i=lt(t.padding);if(!t.display)return;let o=Yi(n.rtl,this.left,this.width),s=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=ct(n.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=l+ct(n.align,this.top,this.bottom-p-n.labels.padding-this._computeTitleHeight())}let f=ct(a,d,d+h);s.textAlign=o.textAlign(Ud(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Wr(s,t.text,f,u,r)}_computeTitleHeight(){let n=this.options.title,t=je(n.font),r=lt(n.padding);return n.display?t.lineHeight+r.height:0}_getLegendItemAt(n,t){let r,i,o;if($n(n,this.left,this.right)&&$n(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],$n(n,i.left,i.left+i.width)&&$n(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(n){let t=this.options;if(!tj(n.type,t))return;let r=this._getLegendItemAt(n.x,n.y);if(n.type==="mousemove"||n.type==="mouseout"){let i=this._hoveredItem,o=QL(i,r);i&&!o&&ve(t.onLeave,[n,i,this],this),this._hoveredItem=r,r&&!o&&ve(t.onHover,[n,r,this],this)}else r&&ve(t.onClick,[n,r,this],this)}};function JL(e,n,t,r,i){let o=XL(r,e,n,t),s=ej(i,r,n.lineHeight);return{itemWidth:o,itemHeight:s}}function XL(e,n,t,r){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),n+t.size/2+r.measureText(i).width}function ej(e,n,t){let r=e;return typeof n.text!="string"&&(r=aS(n,t)),r}function aS(e,n){let t=e.text?e.text.length:0;return n*t}function tj(e,n){return!!((e==="mousemove"||e==="mouseout")&&(n.onHover||n.onLeave)||n.onClick&&(e==="click"||e==="mouseup"))}var nj={id:"legend",_element:uf,start(e,n,t){let r=e.legend=new uf({ctx:e.ctx,options:t,chart:e});mt.configure(e,r,t),mt.addBox(e,r)},stop(e){mt.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,n,t){let r=e.legend;mt.configure(e,r,t),r.options=t},afterUpdate(e){let n=e.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(e,n){n.replay||e.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,n,t){let r=n.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),n.hidden=!0):(i.show(r),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let n=e.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=lt(l.borderWidth);return{text:n[c.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},Dc=class extends bn{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=n,this.height=this.bottom=t;let i=ye(r.text)?r.text.length:1;this._padding=lt(r.padding);let o=i*je(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let n=this.options.position;return n==="top"||n==="bottom"}_drawArgs(n){let{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align,c=0,l,u,d;return this.isHorizontal()?(u=ct(a,r,o),d=t+n,l=o-r):(s.position==="left"?(u=r+n,d=ct(a,i,t),c=de*-.5):(u=o-n,d=ct(a,t,i),c=de*.5),l=i-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let n=this.ctx,t=this.options;if(!t.display)return;let r=je(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(o);Wr(n,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:Ud(t.align),textBaseline:"middle",translation:[s,a]})}};function rj(e,n){let t=new Dc({ctx:e.ctx,options:n,chart:e});mt.configure(e,t,n),mt.addBox(e,t),e.titleBlock=t}var ij={id:"title",_element:Dc,start(e,n,t){rj(e,t)},stop(e){let n=e.titleBlock;mt.removeBox(e,n),delete e.titleBlock},beforeUpdate(e,n,t){let r=e.titleBlock;mt.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Xd=new WeakMap,oj={id:"subtitle",start(e,n,t){let r=new Dc({ctx:e.ctx,options:t,chart:e});mt.configure(e,r,t),mt.addBox(e,r),Xd.set(e,r)},stop(e){mt.removeBox(e,Xd.get(e)),Xd.delete(e)},beforeUpdate(e,n,t){let r=Xd.get(e);mt.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ec={average(e){if(!e.length)return!1;let n,t,r=new Set,i=0,o=0;for(n=0,t=e.length;n<t;++n){let a=e[n].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/o}},nearest(e,n){if(!e.length)return!1;let t=n.x,r=n.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=e.length;o<s;++o){let c=e[o].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Ld(n,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Vn(e,n){return n&&(ye(n)?Array.prototype.push.apply(e,n):e.push(n)),e}function pr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function sj(e,n){let{element:t,datasetIndex:r,index:i}=n,o=e.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:e,label:s,parsed:o.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function ID(e,n){let t=e.chart.ctx,{body:r,footer:i,title:o}=e,{boxWidth:s,boxHeight:a}=n,c=je(n.bodyFont),l=je(n.titleFont),u=je(n.footerFont),d=o.length,h=i.length,f=r.length,p=lt(n.padding),g=p.height,m=0,y=r.reduce((E,C)=>E+C.before.length+C.lines.length+C.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*l.lineHeight+(d-1)*n.titleSpacing+n.titleMarginBottom),y){let E=n.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=f*E+(y-f)*c.lineHeight+(y-1)*n.bodySpacing}h&&(g+=n.footerMarginTop+h*u.lineHeight+(h-1)*n.footerSpacing);let _=0,w=function(E){m=Math.max(m,t.measureText(E).width+_)};return t.save(),t.font=l.string,pe(e.title,w),t.font=c.string,pe(e.beforeBody.concat(e.afterBody),w),_=n.displayColors?s+2+n.boxPadding:0,pe(r,E=>{pe(E.before,w),pe(E.lines,w),pe(E.after,w)}),_=0,t.font=u.string,pe(e.footer,w),t.restore(),m+=p.width,{width:m,height:g}}function aj(e,n){let{y:t,height:r}=n;return t<r/2?"top":t>e.height-r/2?"bottom":"center"}function cj(e,n,t,r){let{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(e==="left"&&i+o+s>n.width||e==="right"&&i-o-s<0)return!0}function lj(e,n,t,r){let{x:i,width:o}=t,{width:s,chartArea:{left:a,right:c}}=e,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=o/2?l="left":i>=s-o/2&&(l="right"),cj(l,e,n,t)&&(l="center"),l}function TD(e,n,t){let r=t.yAlign||n.yAlign||aj(e,t);return{xAlign:t.xAlign||n.xAlign||lj(e,n,t,r),yAlign:r}}function uj(e,n){let{x:t,width:r}=e;return n==="right"?t-=r:n==="center"&&(t-=r/2),t}function dj(e,n,t){let{y:r,height:i}=e;return n==="top"?r+=t:n==="bottom"?r-=i+t:r-=i/2,r}function MD(e,n,t,r){let{caretSize:i,caretPadding:o,cornerRadius:s}=e,{xAlign:a,yAlign:c}=t,l=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=qr(s),p=uj(n,a),g=dj(n,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:qe(p,0,r.width-n.width),y:qe(g,0,r.height-n.height)}}function ef(e,n,t){let r=lt(t.padding);return n==="center"?e.x+e.width/2:n==="right"?e.x+e.width-r.right:e.x+r.left}function AD(e){return Vn([],pr(e))}function fj(e,n,t){return fr(e,{tooltip:n,tooltipItems:t,type:"tooltip"})}function RD(e,n){let t=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return t?e.override(t):e}var cS={beforeTitle:Bn,title(e){if(e.length>0){let n=e[0],t=n.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return n.dataset.label||"";if(n.label)return n.label;if(r>0&&n.dataIndex<r)return t[n.dataIndex]}return""},afterTitle:Bn,beforeBody:Bn,beforeLabel:Bn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let n=e.dataset.label||"";n&&(n+=": ");let t=e.formattedValue;return te(t)||(n+=t),n},labelColor(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Bn,afterBody:Bn,beforeFooter:Bn,footer:Bn,afterFooter:Bn};function Mt(e,n,t,r){let i=e[n].call(t,r);return typeof i>"u"?cS[n].call(t,r):i}var kD=(()=>{class e extends bn{static positioners=Ec;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new of(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=fj(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,o=Mt(i,"beforeTitle",this,t),s=Mt(i,"title",this,t),a=Mt(i,"afterTitle",this,t),c=[];return c=Vn(c,pr(o)),c=Vn(c,pr(s)),c=Vn(c,pr(a)),c}getBeforeBody(t,r){return AD(Mt(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,o=[];return pe(t,s=>{let a={before:[],lines:[],after:[]},c=RD(i,s);Vn(a.before,pr(Mt(c,"beforeLabel",this,s))),Vn(a.lines,Mt(c,"label",this,s)),Vn(a.after,pr(Mt(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,r){return AD(Mt(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,o=Mt(i,"beforeFooter",this,t),s=Mt(i,"footer",this,t),a=Mt(i,"afterFooter",this,t),c=[];return c=Vn(c,pr(o)),c=Vn(c,pr(s)),c=Vn(c,pr(a)),c}_createItems(t){let r=this._active,i=this.chart.data,o=[],s=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(sj(this.chart,r[l]));return t.filter&&(c=c.filter((d,h,f)=>t.filter(d,h,f,i))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,i))),pe(c,d=>{let h=RD(t.callbacks,d);o.push(Mt(h,"labelColor",this,d)),s.push(Mt(h,"labelPointStyle",this,d)),a.push(Mt(h,"labelTextColor",this,d))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=Ec[i.position].call(this,o,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=ID(this,i),u=Object.assign({},c,l),d=TD(this.chart,i,u),h=MD(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){let s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=qr(c),{x:f,y:p}=t,{width:g,height:m}=r,y,_,w,E,C,S;return s==="center"?(C=p+m/2,o==="left"?(y=f,_=y-a,E=C+a,S=C-a):(y=f+g,_=y+a,E=C-a,S=C+a),w=y):(o==="left"?_=f+Math.max(l,d)+a:o==="right"?_=f+g-Math.max(u,h)-a:_=this.caretX,s==="top"?(E=p,C=E-a,y=_-a,w=_+a):(E=p+m,C=E+a,y=_+a,w=_-a),S=E),{x1:y,x2:_,x3:w,y1:E,y2:C,y3:S}}drawTitle(t,r,i){let o=this.title,s=o.length,a,c,l;if(s){let u=Yi(i.rtl,this.x,this.width);for(t.x=ef(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=je(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(o[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===s&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,o,s){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,d=je(s.bodyFont),h=ef(this,"left",s),f=o.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=r.y+p;if(s.usePointStyle){let m={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=o.leftForLtr(f,u)+u/2,_=g+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,zd(t,m,y,_),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,zd(t,m,y,_)}else{t.lineWidth=ne(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let m=o.leftForLtr(f,u),y=o.leftForLtr(o.xPlus(f,1),u-2),_=qr(a.borderRadius);Object.values(_).some(w=>w!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,vs(t,{x:m,y:g,w:u,h:l,radius:_}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),vs(t,{x:y,y:g+1,w:u-2,h:l-2,radius:_}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(m,g,u,l),t.strokeRect(m,g,u,l),t.fillStyle=a.backgroundColor,t.fillRect(y,g+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=i,h=je(i.bodyFont),f=h.lineHeight,p=0,g=Yi(i.rtl,this.x,this.width),m=function(N){r.fillText(N,g.x(t.x+p),t.y+f/2),t.y+=f+s},y=g.textAlign(a),_,w,E,C,S,x,R;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,t.x=ef(this,y,i),r.fillStyle=i.bodyColor,pe(this.beforeBody,m),p=c&&y!=="right"?a==="center"?u/2+d:u+2+d:0,C=0,x=o.length;C<x;++C){for(_=o[C],w=this.labelTextColors[C],r.fillStyle=w,pe(_.before,m),E=_.lines,c&&E.length&&(this._drawColorBox(r,t,C,g,i),f=Math.max(h.lineHeight,l)),S=0,R=E.length;S<R;++S)m(E[S]),f=h.lineHeight;pe(_.after,m)}p=0,f=h.lineHeight,pe(this.afterBody,m),t.y-=s}drawFooter(t,r,i){let o=this.footer,s=o.length,a,c;if(s){let l=Yi(i.rtl,this.x,this.width);for(t.x=ef(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=je(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<s;++c)r.fillText(o[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){let{xAlign:s,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=qr(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(c+h,l),a==="top"&&this.drawCaret(t,r,i,o),r.lineTo(c+u-f,l),r.quadraticCurveTo(c+u,l,c+u,l+f),a==="center"&&s==="right"&&this.drawCaret(t,r,i,o),r.lineTo(c+u,l+d-g),r.quadraticCurveTo(c+u,l+d,c+u-g,l+d),a==="bottom"&&this.drawCaret(t,r,i,o),r.lineTo(c+p,l+d),r.quadraticCurveTo(c,l+d,c,l+d-p),a==="center"&&s==="left"&&this.drawCaret(t,r,i,o),r.lineTo(c,l+h),r.quadraticCurveTo(c,l,c+h,l),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){let a=Ec[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=ID(this,t),l=Object.assign({},a,this._size),u=TD(r,t,l),d=MD(t,l,u,r);(o._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=lt(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),ev(t,r.textDirection),s.y+=a.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),tv(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,o=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),s=!fc(i,o),a=this._positionChanged(o,r);(s||a)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,r,i),c=this._positionChanged(a,t),l=r||!fc(a,s)||c;return l&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:o,options:s}=this,a=Ec[s.position].call(this,t,r);return a!==!1&&(i!==a.x||o!==a.y)}}return e})(),hj={id:"tooltip",_element:kD,positioners:Ec,afterInit(e,n,t){t&&(e.tooltip=new kD({chart:e,options:t}))},beforeUpdate(e,n,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,n,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){let n=e.tooltip;if(n&&n._willRender()){let t={tooltip:n};if(e.notifyPlugins("beforeTooltipDraw",ue(O({},t),{cancelable:!0}))===!1)return;n.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,n){if(e.tooltip){let t=n.replay;e.tooltip.handleEvent(n.event,t,n.inChartArea)&&(n.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,n)=>n.bodyFont.size,boxWidth:(e,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pj=Object.freeze({__proto__:null,Colors:xL,Decimation:AL,Filler:ZL,Legend:nj,SubTitle:oj,Title:ij,Tooltip:hj}),gj=(e,n,t,r)=>(typeof n=="string"?(t=e.push(n)-1,r.unshift({index:t,label:n})):isNaN(n)&&(t=null),t);function mj(e,n,t,r){let i=e.indexOf(n);if(i===-1)return gj(e,n,t,r);let o=e.lastIndexOf(n);return i!==o?t:i}var vj=(e,n)=>e===null?null:qe(Math.round(e),0,n);function OD(e){let n=this.getLabels();return e>=0&&e<n.length?n[e]:e}var yj=(()=>{class e extends Ji{static id="category";static defaults={ticks:{callback:OD}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(te(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:mj(i,t,W(r,t),this._addedLabels),vj(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,o=[],s=this.getLabels();s=t===0&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)o.push({value:a});return o}getLabelForValue(t){return OD.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return e})();function bj(e,n){let t=[],{bounds:i,step:o,min:s,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=e,f=o||1,p=u-1,{min:g,max:m}=n,y=!te(s),_=!te(a),w=!te(l),E=(m-g)/(d+1),C=Om((m-g)/p/f)*f,S,x,R,N;if(C<1e-14&&!y&&!_)return[{value:g},{value:m}];N=Math.ceil(m/C)-Math.floor(g/C),N>p&&(C=Om(N*C/p/f)*f),te(c)||(S=Math.pow(10,c),C=Math.ceil(C*S)/S),i==="ticks"?(x=Math.floor(g/C)*C,R=Math.ceil(m/C)*C):(x=g,R=m),y&&_&&o&&bC((a-s)/o,C/1e3)?(N=Math.round(Math.min((a-s)/C,u)),C=(a-s)/N,x=s,R=a):w?(x=y?s:x,R=_?a:R,N=l-1,C=(R-x)/N):(N=(R-x)/C,ps(N,Math.round(N),C/1e3)?N=Math.round(N):N=Math.ceil(N));let B=Math.max(Pm(C),Pm(x));S=Math.pow(10,te(c)?B:c),x=Math.round(x*S)/S,R=Math.round(R*S)/S;let Q=0;for(y&&(h&&x!==s?(t.push({value:s}),x<s&&Q++,ps(Math.round((x+Q*C)*S)/S,s,ND(s,E,e))&&Q++):x<s&&Q++);Q<N;++Q){let re=Math.round((x+Q*C)*S)/S;if(_&&re>a)break;t.push({value:re})}return _&&h&&R!==a?t.length&&ps(t[t.length-1].value,a,ND(a,E,e))?t[t.length-1].value=a:t.push({value:a}):(!_||R===a)&&t.push({value:R}),t}function ND(e,n,{horizontal:t,minRotation:r}){let i=tn(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*n*(""+e).length;return Math.min(n/o,s)}var ws=class extends Ji{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,t){return te(n)||(typeof n=="number"||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){let{beginAtZero:n}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this,s=c=>i=t?i:c,a=c=>o=r?o:c;if(n){let c=yn(i),l=yn(o);c<0&&l<0?a(0):c>0&&l>0&&s(0)}if(i===o){let c=o===0?1:Math.abs(o*.05);a(o+c),n||s(i-c)}this.min=i,this.max=o}getTickLimit(){let n=this.options.ticks,{maxTicksLimit:t,stepSize:r}=n,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let n=this.options,t=n.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:n.bounds,min:n.min,max:n.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=bj(i,o);return n.bounds==="ticks"&&Nm(s,this,"value"),n.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let n=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&n.length){let i=(r-t)/Math.max(n.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(n){return ms(n,this.chart.options.locale,this.options.ticks.format)}},Rv=class extends ws{static id="linear";static defaults={ticks:{callback:hc.formatters.numeric}};determineDataLimits(){let{min:n,max:t}=this.getMinMax(!0);this.min=Te(n)?n:0,this.max=Te(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let n=this.isHorizontal(),t=n?this.width:this.height,r=tn(this.options.ticks.minRotation),i=(n?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(n){return n===null?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}},Sc=e=>Math.floor(ur(e)),Qi=(e,n)=>Math.pow(10,Sc(e)+n);function PD(e){return e/Math.pow(10,Sc(e))===1}function FD(e,n,t){let r=Math.pow(10,t),i=Math.floor(e/r);return Math.ceil(n/r)-i}function _j(e,n){let t=n-e,r=Sc(t);for(;FD(e,n,r)>10;)r++;for(;FD(e,n,r)<10;)r--;return Math.min(r,Sc(e))}function wj(e,{min:n,max:t}){n=Tt(e.min,n);let r=[],i=Sc(n),o=_j(n,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=i>o?Math.pow(10,i):0,l=Math.round((n-c)*s)/s,u=Math.floor((n-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,o)),h=Tt(e.min,Math.round((c+u+d*Math.pow(10,o))*s)/s);for(;h<t;)r.push({value:h,major:PD(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),h=Math.round((c+u+d*Math.pow(10,o))*s)/s;let f=Tt(e.max,h);return r.push({value:f,major:PD(f),significand:d}),r}var kv=class extends Ji{static id="logarithmic";static defaults={ticks:{callback:hc.formatters.logarithmic,major:{enabled:!0}}};constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,t){let r=ws.prototype.parse.apply(this,[n,t]);if(r===0){this._zero=!0;return}return Te(r)&&r>0?r:null}determineDataLimits(){let{min:n,max:t}=this.getMinMax(!0);this.min=Te(n)?Math.max(0,n):null,this.max=Te(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Te(this._userMin)&&(this.min=n===Qi(this.min,0)?Qi(this.min,-1):Qi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:n,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,o=a=>r=n?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(Qi(r,-1)),s(Qi(i,1)))),r<=0&&o(Qi(i,-1)),i<=0&&s(Qi(r,1)),this.min=r,this.max=i}buildTicks(){let n=this.options,t={min:this._userMin,max:this._userMax},r=wj(t,this);return n.bounds==="ticks"&&Nm(r,this,"value"),n.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(n){return n===void 0?"0":ms(n,this.chart.options.locale,this.options.ticks.format)}configure(){let n=this.min;super.configure(),this._startValue=ur(n),this._valueRange=ur(this.max)-ur(n)}getPixelForValue(n){return(n===void 0||n===0)&&(n=this.min),n===null||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(ur(n)-this._startValue)/this._valueRange)}getValueForPixel(n){let t=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+t*this._valueRange)}};function Ov(e){let n=e.ticks;if(n.display&&e.display){let t=lt(n.backdropPadding);return W(n.font&&n.font.size,we.font.size)+t.height}return 0}function Ej(e,n,t){return t=ye(t)?t:[t],{w:TC(e,n.string,t),h:t.length*n.lineHeight}}function LD(e,n,t,r,i){return e===r||e===i?{start:n-t/2,end:n+t/2}:e<r||e>i?{start:n-t,end:n}:{start:n,end:n+t}}function Cj(e){let n={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},t=Object.assign({},n),r=[],i=[],o=e._pointLabels.length,s=e.options.pointLabels,a=s.centerPointLabels?de/o:0;for(let c=0;c<o;c++){let l=s.setContext(e.getPointLabelContext(c));i[c]=l.padding;let u=e.getPointPosition(c,e.drawingArea+i[c],a),d=je(l.font),h=Ej(e.ctx,d,e._pointLabels[c]);r[c]=h;let f=at(e.getIndexAngle(c)+a),p=Math.round($d(f)),g=LD(p,u.x,h.w,0,180),m=LD(p,u.y,h.h,90,270);Dj(t,n,f,g,m)}e.setCenterPoint(n.l-t.l,t.r-n.r,n.t-t.t,t.b-n.b),e._pointLabelItems=Ij(e,r,i)}function Dj(e,n,t,r,i){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;r.start<n.l?(a=(n.l-r.start)/o,e.l=Math.min(e.l,n.l-a)):r.end>n.r&&(a=(r.end-n.r)/o,e.r=Math.max(e.r,n.r+a)),i.start<n.t?(c=(n.t-i.start)/s,e.t=Math.min(e.t,n.t-c)):i.end>n.b&&(c=(i.end-n.b)/s,e.b=Math.max(e.b,n.b+c))}function Sj(e,n,t){let r=e.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,c=e.getPointPosition(n,r+i+s,o),l=Math.round($d(at(c.angle+Re))),u=Aj(c.y,a.h,l),d=Tj(l),h=Mj(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function xj(e,n){if(!n)return!0;let{left:t,top:r,right:i,bottom:o}=e;return!(jn({x:t,y:r},n)||jn({x:t,y:o},n)||jn({x:i,y:r},n)||jn({x:i,y:o},n))}function Ij(e,n,t){let r=[],i=e._pointLabels.length,o=e.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:Ov(o)/2,additionalAngle:s?de/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=n[u];let d=Sj(e,u,c);r.push(d),a==="auto"&&(d.visible=xj(d,l),d.visible&&(l=d))}return r}function Tj(e){return e===0||e===180?"center":e<180?"left":"right"}function Mj(e,n,t){return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function Aj(e,n,t){return t===90||t===270?e-=n/2:(t>270||t<90)&&(e-=n),e}function Rj(e,n,t){let{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=n;if(!te(a)){let c=qr(n.borderRadius),l=lt(n.backdropPadding);e.fillStyle=a;let u=r-l.left,d=i-l.top,h=o-r+l.width,f=s-i+l.height;Object.values(c).some(p=>p!==0)?(e.beginPath(),vs(e,{x:u,y:d,w:h,h:f,radius:c}),e.fill()):e.fillRect(u,d,h,f)}}function kj(e,n){let{ctx:t,options:{pointLabels:r}}=e;for(let i=n-1;i>=0;i--){let o=e._pointLabelItems[i];if(!o.visible)continue;let s=r.setContext(e.getPointLabelContext(i));Rj(t,s,o);let a=je(s.font),{x:c,y:l,textAlign:u}=o;Wr(t,e._pointLabels[i],c,l+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function lS(e,n,t,r){let{ctx:i}=e;if(t)i.arc(e.xCenter,e.yCenter,n,0,be);else{let o=e.getPointPosition(0,n);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=e.getPointPosition(s,n),i.lineTo(o.x,o.y)}}function Oj(e,n,t,r,i){let o=e.ctx,s=n.circular,{color:a,lineWidth:c}=n;!s&&!r||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),lS(e,t,s,r),o.closePath(),o.stroke(),o.restore())}function Nj(e,n,t){return fr(e,{label:t,index:n,type:"pointLabel"})}var Nv=class extends ws{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let n=this._padding=lt(Ov(this.options)/2),t=this.width=this.maxWidth-n.width,r=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+t/2+n.left),this.yCenter=Math.floor(this.top+r/2+n.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:n,max:t}=this.getMinMax(!1);this.min=Te(n)&&!isNaN(n)?n:0,this.max=Te(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ov(this.options))}generateTickLabels(n){ws.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((t,r)=>{let i=ve(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let n=this.options;n.display&&n.pointLabels.display?Cj(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,t,r,i){this.xCenter+=Math.floor((n-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,t,r,i))}getIndexAngle(n){let t=be/(this._pointLabels.length||1),r=this.options.startAngle||0;return at(n*t+tn(r))}getDistanceFromCenterForValue(n){if(te(n))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*t:(n-this.min)*t}getValueForDistanceFromCenter(n){if(te(n))return NaN;let t=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(n){let t=this._pointLabels||[];if(n>=0&&n<t.length){let r=t[n];return Nj(this.getContext(),n,r)}}getPointPosition(n,t,r=0){let i=this.getIndexAngle(n)-Re+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){let{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[n];return{left:t,top:r,right:i,bottom:o}}drawBackground(){let{backgroundColor:n,grid:{circular:t}}=this.options;if(n){let r=this.ctx;r.save(),r.beginPath(),lS(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=n,r.fill(),r.restore()}}drawGrid(){let n=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&kj(this,s),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=i.setContext(h),p=o.setContext(h);Oj(this,f,c,s,p)}}),r.display){for(n.save(),a=s-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(n.lineWidth=h,n.strokeStyle=d,n.setLineDash(u.borderDash),n.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(l.x,l.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){let n=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),o,s;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(i),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=je(l.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){n.font=u.string,s=n.measureText(a.label).width,n.fillStyle=l.backdropColor;let d=lt(l.backdropPadding);n.fillRect(-s/2-d.left,-o-u.size/2-d.top,s+d.width,u.size+d.height)}Wr(n,a.label,0,-o,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),n.restore()}drawTitle(){}},hf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(hf);function jD(e,n){return e-n}function BD(e,n){if(te(n))return null;let t=e._adapter,{parser:r,round:i,isoWeekday:o}=e._parseOpts,s=n;return typeof r=="function"&&(s=r(s)),Te(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(Ki(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function $D(e,n,t,r){let i=At.length;for(let o=At.indexOf(e);o<i-1;++o){let s=hf[At[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-n)/(a*s.size))<=r)return At[o]}return At[i-1]}function Pj(e,n,t,r,i){for(let o=At.length-1;o>=At.indexOf(t);o--){let s=At[o];if(hf[s].common&&e._adapter.diff(i,r,s)>=n-1)return s}return At[t?At.indexOf(t):0]}function Fj(e){for(let n=At.indexOf(e)+1,t=At.length;n<t;++n)if(hf[At[n]].common)return At[n]}function VD(e,n,t){if(!t)e[n]=!0;else if(t.length){let{lo:r,hi:i}=Vd(t,n),o=t[r]>=n?t[r]:t[i];e[o]=!0}}function Lj(e,n,t,r){let i=e._adapter,o=+i.startOf(n[0].value,r),s=n[n.length-1].value,a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=t[a],c>=0&&(n[c].major=!0);return n}function UD(e,n,t){let r=[],i={},o=n.length,s,a;for(s=0;s<o;++s)a=n[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:Lj(e,r,i,t)}var Pv=(()=>{class e extends Ji{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),o=this._adapter=new KP._date(t.adapters.date);o.init(r),fs(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:BD(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!c&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Te(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=Te(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=EC(o,s,a);return this._unit=r.unit||(i.autoSkip?$D(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):Pj(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Fj(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),UD(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=qe(r,0,a),i=qe(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,a=s.unit||$D(s.minUnit,r,i,this._getLabelCapacity(r)),c=W(o.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=Ki(l)||l===!0,d={},h=r,f,p;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let g=o.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+t.add(f,c,a),p++)VD(d,f,g);return(f===i||o.bounds==="ticks"||p===1)&&VD(d,f,g),Object.keys(d).sort(jD).map(m=>+m)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let o=this.options.time.displayFormats,s=this._unit,a=r||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,o){let s=this.options,a=s.ticks.callback;if(a)return ve(a,[t,r,i],this);let c=s.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],f=i[r],p=u&&h&&f&&f.major;return this._adapter.format(t,o||(p?h:d))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,o=tn(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:i*s+c*a,h:i*a+c*s}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,UD(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(BD(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return jm(t.sort(jD))}}return e})();function tf(e,n,t){let r=0,i=e.length-1,o,s,a,c;t?(n>=e[r].pos&&n<=e[i].pos&&({lo:r,hi:i}=Ln(e,"pos",n)),{pos:o,time:a}=e[r],{pos:s,time:c}=e[i]):(n>=e[r].time&&n<=e[i].time&&({lo:r,hi:i}=Ln(e,"time",n)),{time:o,pos:a}=e[r],{time:s,pos:c}=e[i]);let l=s-o;return l?a+(c-a)*(n-o)/l:a}var Fv=class extends Pv{static id="timeseries";static defaults=Pv.defaults;constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let n=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(n);this._minPos=tf(t,this.min),this._tableRange=tf(t,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){let{min:t,max:r}=this,i=[],o=[],s,a,c,l,u;for(s=0,a=n.length;s<a;++s)l=n[s],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)u=i[s+1],c=i[s-1],l=i[s],Math.round((u+c)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){let n=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(n)||!r.length)&&r.splice(0,0,n),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?n=this.normalize(t.concat(r)):n=t.length?t:r,n=this._cache.all=n,n}getDecimalForValue(n){return(tf(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){let t=this._offsets,r=this.getDecimalForPixel(n)/t.factor-t.end;return tf(this._table,r*this._tableRange+this._minPos,!0)}},jj=Object.freeze({__proto__:null,CategoryScale:yj,LinearScale:Rv,LogarithmicScale:kv,RadialLinearScale:Nv,TimeScale:Pv,TimeSeriesScale:Fv}),uS=[GP,bL,pj,jj];Ic.register(...uS);function dS(e){e||(e=k(ln));let n=new oe(t=>{if(e.destroyed){t.next();return}return e.onDestroy(t.next.bind(t))});return t=>t.pipe(bo(n))}var Bj={"+++":3,"++":2,"+":1,"-":-1,"--":-2,"---":-3,"":0};function gr(e){return Bj[e??""]}var pf=class e{calcularIPCAgro(n,t){return t?(n/t-1)*100:0}calcularDisparidadRegional(n){let t=as(n);return t?wm(n)/t*100:0}calcularFriccionMercado(n,t,r){return!r||n<t?0:(n-t)/r}calcularScoreTendencia(n){if(n.length===0)return 0;let t=n.reduce((i,o)=>i+gr(o),0),r=n.length*3;return r?t/r*100:0}calcularVolatilidadHistorica(n){if(n.length<3)return 0;let t=[];for(let r=1;r<n.length;r++){let i=n[r-1],o=n[r];i&&t.push((o-i)/i*100)}return t.length<2?0:wm(t)}calcularTodosIndicadores(n,t){let r=n.map(y=>y.precio_medio).filter(Number.isFinite),i=t.map(y=>y.precio_medio).filter(Number.isFinite),o=Le(r),s=Le(i),a=this.calcularIPCAgro(o,s),c=new Map;for(let y of n){let _=y.ciudad??"desconocido",w=c.get(_)??[];w.push(y.precio_medio),c.set(_,w)}let l=Array.from(c.values()).map(y=>Le(y.filter(Number.isFinite))),u=this.calcularDisparidadRegional(l),d=Math.min(...n.map(y=>y.precio_minimo).filter(Number.isFinite)),h=Math.max(...n.map(y=>y.precio_maximo).filter(Number.isFinite)),f=this.calcularFriccionMercado(h,d,o),p=n.map(y=>y.tendencia??null),g=this.calcularScoreTendencia(p);return{ipcAgro:a,disparidadRegionalCv:u,friccionSpread:f,scoreTendencia:g,volatilidad:0}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};function fS(e){return e>=2.5?"+++":e>=1.5?"++":e>=.5?"+":e<=-2.5?"---":e<=-1.5?"--":e<=-.5?"-":null}var gf=class e{calcularIndiceEstabilidadCompra(n,t,r){let i=r?(n-t)/r:0;return i<=.1?{valor:5,estrellas:"\u2B50\u2B50\u2B50\u2B50\u2B50",descripcion:"Precio Fijo",riesgo:"Bajo"}:i<=.2?{valor:4,estrellas:"\u2B50\u2B50\u2B50\u2B50",descripcion:"Estable",riesgo:"Bajo"}:i<=.4?{valor:3,estrellas:"\u2B50\u2B50\u2B50",descripcion:"Moderado",riesgo:"Medio"}:i<=.6?{valor:2,estrellas:"\u2B50\u2B50",descripcion:"Variable",riesgo:"Medio"}:{valor:1,estrellas:"\u2B50",descripcion:"Mucho regateo/Riesgo",riesgo:"Alto"}}calcularVelocidadTendencia(n,t){let r=gr(n),i=gr(t),o=r-i,s,a;return o>=2?(s="Aceleraci\xF3n Fuerte",a="Acumular"):o>=1?(s="Aceleraci\xF3n Moderada",a="Acumular"):o===0?(s="Estable",a="Mantener"):o>=-1?(s="Desaceleraci\xF3n Moderada",a="Mantener"):(s="Desaceleraci\xF3n Fuerte",a="Liquidar"),{velocidad:o,tendenciaActual:n,tendenciaAnterior:t,cambio:s,recomendacion:a}}calcularMargenArbitrajeBogota(n,t,r=15){if(!t||n<=t)return{margenBruto:0,margenNeto:0,precioBogota:n,precioPromedioNacional:t,costoTransporteEstimado:r,recomendacion:"No Recomendado"};let i=(n-t)/t*100,o=i-r,s;return o>25?s="Alto":o>15?s="Medio":o>5?s="Bajo":s="No Recomendado",{margenBruto:i,margenNeto:o,precioBogota:n,precioPromedioNacional:t,costoTransporteEstimado:r,recomendacion:s}}calcularAlertaPrecio(n,t,r){let i=gr(n);return i<=-2&&t<=-1?"Compra Fuerte":i>=2&&t>=1?"Venta Fuerte":i===0&&r<10?"Estable":"Monitorear"}calcularCostoRealReposicion(n,t,r=10){let i=t*4,o=n*(1+i/100)*(1+r/100),s="Estable. Puede mantener precios actuales.";return i>20?s="Alta volatilidad. Considerar ajustar precios del men\xFA.":i>10&&(s="Moderada volatilidad. Monitorear semanalmente."),{precioMaximo:n,ipcAgroSemanal:t,precioReposicion:Math.round(o),margenSeguridad:r,recomendacion:s}}calcularPrecioProyectado7Dias(n,t){if(n.length<2)return Math.round(n.at(-1)??0);let r=n.length,i=n.map((g,m)=>m),o=i.reduce((g,m)=>g+m,0),s=n.reduce((g,m)=>g+m,0),a=i.reduce((g,m,y)=>g+m*n[y],0),c=i.reduce((g,m)=>g+m*m,0),l=r*c-o*o,u=l?(r*a-o*s)/l:0,d=(s-u*o)/r,f=gr(t)*.02,p=u*r+d;return Math.round(p*(1+f))}calcularDistanciaMediaPrecios(n,t){let r=n-t,i=t?r/t*100:0,o="Alineado";return i>10?o="Sobrevalorado":i<-10&&(o="Subvalorado"),{precioLocal:n,precioNacional:t,diferencia:r,diferenciaPorcentual:i,estado:o}}calcularVariables(n,t,r,i,o){let s=n.map(x=>x.precio_medio).filter(Number.isFinite),a=t.map(x=>x.precio_medio).filter(Number.isFinite),c=Le(s),l=Le(a),u=fS(as(n.map(x=>gr(x.tendencia)).filter(Number.isFinite))),d=fS(as(t.map(x=>gr(x.tendencia)).filter(Number.isFinite))),h=this.calcularVelocidadTendencia(u,d),f=Math.min(...n.map(x=>x.precio_minimo).filter(Number.isFinite)),p=Math.max(...n.map(x=>x.precio_maximo).filter(Number.isFinite)),g=this.calcularIndiceEstabilidadCompra(p,f,c),m=this.calcularCostoRealReposicion(p,o),y=this.calcularAlertaPrecio(u,h.velocidad,i),_=this.calcularPrecioProyectado7Dias(r.slice(-12),u),w=n.filter(x=>(x.ciudad??"").toLowerCase()==="bogota").map(x=>x.precio_medio).filter(Number.isFinite),E=Le(w),C=w.length?this.calcularMargenArbitrajeBogota(E,c):void 0,S=w.length?this.calcularDistanciaMediaPrecios(E,c):void 0;return Cd(c,l),{estabilidadCompra:g,velocidadTendencia:h,margenArbitrajeBogota:C,alerta:y,costoReposicion:m,precioProyectado7d:_,distanciaMedia:S}}calcularSustitucion(n,t,r,i,o=20){if(!t)return null;let s=Cd(n.precio_medio,t);return s<=o?null:r.filter(c=>c.producto!==n.producto).map(c=>{let l=i.get(c.producto);if(!l||Cd(c.precio_medio,l)>5)return null;let d=n.precio_medio?(n.precio_medio-c.precio_medio)/n.precio_medio*100:0;return{productoOriginal:n.producto,productoAlternativo:c.producto,precioOriginal:n.precio_medio,precioAlternativo:c.precio_medio,ahorroPorcentual:d,grupoAlimentos:n.grupo_alimentos,recomendacion:`La ${n.producto} est\xE1 cara (subi\xF3 ${s.toFixed(1)}%), considera ${c.producto} (ahorro ${d.toFixed(1)}%).`}}).filter(c=>c!==null).sort((c,l)=>l.ahorroPorcentual-c.ahorroPorcentual)[0]??null}static \u0275fac=function(t){return new(t||e)};static \u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})};var $j=["chartCanvas"],Vj=(e,n)=>n.market;function Uj(e,n){if(e&1&&(T(0,"p",4),b(1),D()),e&2){let t=ee();M(),An("Periodo actual: ",t.fechaActual()," \xB7 Periodo anterior: ",t.fechaAnterior())}}function Hj(e,n){if(e&1&&(T(0,"div",6)(1,"h3"),b(2,"No se pudo cargar"),D(),T(3,"p",4),b(4),D(),T(5,"p",7),b(6," Si esto ocurre, revisa que `fruver_data` permita lectura con la key p\xFAblica (RLS/policies). "),D()()),e&2){let t=ee();M(4),ie(t.error())}}function zj(e,n){e&1&&(T(0,"div",6)(1,"p",4),b(2,"Cargando datos desde Supabase\u2026"),D()())}function Wj(e,n){if(e&1&&(T(0,"div",10)(1,"div",17)(2,"p",18),b(3,"IPC-Agro (Inflaci\xF3n)"),D(),T(4,"p",19)(5,"span",20),b(6),D(),b(7),D()(),T(8,"div",17)(9,"p",18),b(10,"Disparidad (CV)"),D(),T(11,"p",19),b(12),D()(),T(13,"div",17)(14,"p",18),b(15,"Spread"),D(),T(16,"p",19),b(17),D()(),T(18,"div",17)(19,"p",18),b(20,"Score Tendencia"),D(),T(21,"p",19)(22,"span",20),b(23),D(),b(24),D()()()),e&2){let t=ee(2);M(4),hn("up",t.getTrendClass(t.indicadores().ipcAgro,.05)==="up")("down",t.getTrendClass(t.indicadores().ipcAgro,.05)==="down")("neutral",t.getTrendClass(t.indicadores().ipcAgro,.05)==="neutral"),M(2),ie(t.getTrendIcon(t.indicadores().ipcAgro,.05)),M(),le(" ",t.formatPct(t.indicadores().ipcAgro)," "),M(5),le("",t.formatNumber(t.indicadores().disparidadRegionalCv),"%"),M(5),ie(t.formatNumber(t.indicadores().friccionSpread,2)),M(4),hn("up",t.getTrendClass(t.indicadores().scoreTendencia,1)==="up")("down",t.getTrendClass(t.indicadores().scoreTendencia,1)==="down")("neutral",t.getTrendClass(t.indicadores().scoreTendencia,1)==="neutral"),M(2),ie(t.getTrendIcon(t.indicadores().scoreTendencia,1)),M(),le(" ",t.formatPct(t.indicadores().scoreTendencia,0)," ")}}function qj(e,n){if(e&1){let t=fn();T(0,"button",21),xt("click",function(){let i=Qe(t).$implicit,o=ee(2);return Je(o.setRange(i))}),b(1),D()}if(e&2){let t=n.$implicit,r=ee(2);hn("active",r.range()===t),M(),le(" ",t," ")}}function Gj(e,n){if(e&1&&(T(0,"p",7),b(1),D()),e&2){let t=ee(2);M(),le("Volatilidad (std dev variaci\xF3n %): ",t.volatilidad().toFixed(1))}}function Kj(e,n){if(e&1&&b(0),e&2){let t=ee().$implicit;le(" $ ",t.periodA.toLocaleString("es-CO")," ")}}function Yj(e,n){e&1&&b(0," \u2014 ")}function Zj(e,n){if(e&1&&b(0),e&2){let t=ee().$implicit;le(" $ ",t.periodB.toLocaleString("es-CO")," ")}}function Qj(e,n){e&1&&b(0," \u2014 ")}function Jj(e,n){if(e&1&&(T(0,"tr")(1,"td"),b(2),D(),T(3,"td"),De(4,Kj,1,1)(5,Yj,1,0),D(),T(6,"td"),De(7,Zj,1,1)(8,Qj,1,0),D()()),e&2){let t=n.$implicit;M(2),ie(t.market),M(2),Se(t.periodA!==null?4:5),M(3),Se(t.periodB!==null?7:8)}}function Xj(e,n){if(e&1&&(T(0,"div",23)(1,"p",18),b(2,"Arbitraje Bogot\xE1"),D(),T(3,"p",19),b(4),D(),T(5,"p",7),b(6),D()()),e&2){let t=ee(3);M(4),ie(t.variables().margenArbitrajeBogota.recomendacion),M(2),An(" Neto: ",t.variables().margenArbitrajeBogota.margenNeto.toFixed(1),"% \xB7 Bruto: ",t.variables().margenArbitrajeBogota.margenBruto.toFixed(1),"% ")}}function e2(e,n){if(e&1&&(T(0,"div",23)(1,"p",18),b(2,"Proyecci\xF3n 7 d\xEDas"),D(),T(3,"p",19),b(4),D(),T(5,"p",7),b(6,"Estimaci\xF3n basada en tendencia + regresi\xF3n simple."),D()()),e&2){let t=ee(3);M(4),le("$ ",t.variables().precioProyectado7d.toLocaleString("es-CO"))}}function t2(e,n){if(e&1&&(T(0,"div",24)(1,"h4"),b(2,"Sustituci\xF3n sugerida"),D(),T(3,"p",4),b(4),D()()),e&2){let t=ee(3);M(4),ie(t.sustitucion().recomendacion)}}function n2(e,n){if(e&1&&(T(0,"div",22)(1,"div",23)(2,"p",18),b(3,"Estabilidad de compra"),D(),T(4,"p",19),b(5),D(),T(6,"p",7),b(7),D()(),T(8,"div",23)(9,"p",18),b(10,"Momentum"),D(),T(11,"p",19),b(12),D(),T(13,"p",7),b(14),D()(),T(15,"div",23)(16,"p",18),b(17,"Alerta"),D(),T(18,"p",19),b(19),D(),T(20,"p",7),b(21),D()(),T(22,"div",23)(23,"p",18),b(24,"Costo de reposici\xF3n"),D(),T(25,"p",19),b(26),D(),T(27,"p",7),b(28),D()(),De(29,Xj,7,3,"div",23),De(30,e2,7,1,"div",23),D(),De(31,t2,5,1,"div",24)),e&2){let t=ee(2);M(5),ie(t.variables().estabilidadCompra.estrellas),M(2),An("",t.variables().estabilidadCompra.descripcion," \xB7 Riesgo ",t.variables().estabilidadCompra.riesgo),M(5),ie(t.variables().velocidadTendencia.cambio),M(2),le("Recomendaci\xF3n: ",t.variables().velocidadTendencia.recomendacion),M(5),ie(t.variables().alerta),M(2),le("Volatilidad: ",t.volatilidad().toFixed(1)),M(5),le("$ ",t.variables().costoReposicion.precioReposicion.toLocaleString("es-CO")),M(2),ie(t.variables().costoReposicion.recomendacion),M(),Se(t.variables().margenArbitrajeBogota?29:-1),M(),Se(t.variables().precioProyectado7d?30:-1),M(),Se(t.sustitucion()?31:-1)}}function r2(e,n){e&1&&(T(0,"p",4),b(1,"Sin suficientes datos para calcular variables."),D())}function i2(e,n){if(e&1&&(T(0,"div",8)(1,"div",6)(2,"h3"),b(3,"Resumen"),D(),T(4,"p",9),b(5),D(),T(6,"p",4),b(7,"Mediana nacional del periodo actual"),D(),De(8,Wj,25,18,"div",10),D(),T(9,"div",6)(10,"div",11)(11,"div")(12,"h3"),b(13,"Hist\xF3ricos"),D(),T(14,"p",4),b(15,"Precio mediana nacional en el tiempo"),D()(),T(16,"div",12),it(17,qj,2,3,"button",13,Ii),D()(),T(19,"div",14),Ir(20,"canvas",null,0),D(),De(22,Gj,2,1,"p",7),D()(),T(23,"div",15)(24,"div",6)(25,"h3"),b(26,"Comparaci\xF3n temporal"),D(),T(27,"p",4),b(28,"Mercado vs Periodo (Actual vs Anterior)"),D(),T(29,"div",16)(30,"table")(31,"thead")(32,"tr")(33,"th"),b(34,"Mercado"),D(),T(35,"th"),b(36,"Actual"),D(),T(37,"th"),b(38,"Anterior"),D()()(),T(39,"tbody"),it(40,Jj,9,3,"tr",null,Vj),D()()(),T(42,"p",7),b(43,"Top mercados (ordenado por precio actual)."),D()(),T(44,"div",6)(45,"h3"),b(46,"Variables de negocio"),D(),T(47,"p",4),b(48,"Recomendaciones calculadas"),D(),De(49,n2,32,12)(50,r2,2,0,"p",4),D()()),e&2){let t=ee();M(5),le("$ ",t.precioNacionalActual().toLocaleString("es-CO")),M(3),Se(t.indicadores()?8:-1),M(9),ot(t.ranges),M(5),Se(t.volatilidad()?22:-1),M(18),ot(t.tablaMercadoPeriodo()),M(9),Se(t.variables()?49:50)}}var mf=class e{route=k(Vt);destroyRef=k(ln);data=k(jr);indicadoresService=k(pf);variablesService=k(gf);ranges=["1 mes","6 meses","1 a\xF1o","max"];producto=X("");range=X("1 mes");loading=X(!0);error=X(null);periodoActual=X(null);periodoAnterior=X(null);serie=X([]);volatilidad=X(0);indicadores=X(null);variables=X(null);sustitucion=X(null);titulo=It(()=>{let n=this.producto();return n?`Detalle del producto: ${n}`:"Detalle del producto"});tablaMercadoPeriodo=It(()=>{let n=this.periodoActual()?.rows??[],t=this.periodoAnterior()?.rows??[],r=c=>`${c.nombre_mercado??"desconocido"} \xB7 ${c.ciudad??"desconocido"}`,i=c=>{let l=Fn(c,r),u=new Map;for(let d of Object.keys(l))u.set(d,Le(l[d].map(h=>h.precio_medio).filter(Number.isFinite)));return u},o=i(n),s=i(t);return Array.from(new Set([...o.keys(),...s.keys()])).map(c=>({market:c,periodA:o.get(c)??null,periodB:s.get(c)??null})).sort((c,l)=>(c.periodA??Number.POSITIVE_INFINITY)-(l.periodA??Number.POSITIVE_INFINITY)).slice(0,12)});precioNacionalActual=It(()=>{let n=this.periodoActual()?.rows??[];return Le(n.map(t=>t.precio_medio).filter(Number.isFinite))});fechaActual=It(()=>this.periodoActual()?.fechaInicio??"");fechaAnterior=It(()=>this.periodoAnterior()?.fechaInicio??"");formatPct(n,t=2){return n==null||!Number.isFinite(n)?"\u2014":`${Math.abs(n).toFixed(t)}%`}formatPctSigned(n,t=2){return n==null||!Number.isFinite(n)?"\u2014":`${n>=0?"+":""}${n.toFixed(t)}%`}formatNumber(n,t=1){return n==null||!Number.isFinite(n)?"\u2014":n.toFixed(t)}getTrendClass(n,t=.05){return n==null||!Number.isFinite(n)?"neutral":n>t?"up":n<-t?"down":"neutral"}getTrendIcon(n,t=.05){return n==null||!Number.isFinite(n)?"=":n>t?"+":n<-t?"-":"="}chartCanvas;chart;constructor(){this.route.paramMap.pipe(dS(this.destroyRef)).subscribe(n=>{let t=(n.get("producto")??"").toLowerCase().trim();this.producto.set(t),this.reload()})}setRange(n){this.range()!==n&&(this.range.set(n),this.loadSerieAndRecalc())}reload(){return v(this,null,function*(){this.loading.set(!0),this.error.set(null),this.periodoActual.set(null),this.periodoAnterior.set(null),this.serie.set([]),this.indicadores.set(null),this.variables.set(null),this.sustitucion.set(null);try{let n=this.producto();if(!n)throw new Error("Producto inv\xE1lido.");let[t,r]=yield Promise.all([this.data.getUltimoPeriodo(n),this.data.getPeriodoAnterior(n)]);this.periodoActual.set(t),this.periodoAnterior.set(r),this.loading.set(!1),yield this.loadSerieAndRecalc()}catch(n){this.error.set(n instanceof Error?n.message:"Error cargando datos.")}finally{this.loading.set(!1)}})}loadSerieAndRecalc(){return v(this,null,function*(){let n=this.producto(),t=this.range(),r=yield this.data.getSerieHistorica(n,t);this.serie.set(r);let i=r.map(u=>u.value).filter(Number.isFinite),o=this.indicadoresService.calcularVolatilidadHistorica(i);this.volatilidad.set(o);let s=this.periodoActual()?.rows??[],a=this.periodoAnterior()?.rows??[],c=this.indicadoresService.calcularTodosIndicadores(s,a);c.volatilidad=o,this.indicadores.set(c);let l=this.variablesService.calcularVariables(s,a,i,o,c.ipcAgro);this.variables.set(l),yield this.loadSustitucionIfPossible(),this.renderChart()})}loadSustitucionIfPossible(){return v(this,null,function*(){let n=this.periodoActual()?.rows??[],t=this.periodoAnterior()?.rows??[];if(n.length===0||t.length===0)return;let r=n[0],i=r.producto,o=Le(n.map(p=>p.precio_medio).filter(Number.isFinite)),s=Le(t.map(p=>p.precio_medio).filter(Number.isFinite)),a=ue(O({},r),{precio_medio:o}),[c,l]=yield Promise.all([this.data.getProductosMismoGrupo(r.codigo_grupo,this.periodoActual().fechaInicio),this.data.getProductosMismoGrupo(r.codigo_grupo,this.periodoAnterior().fechaInicio)]),u=p=>{let g=Fn(p,m=>m.producto);return Object.keys(g).map(m=>({producto:m,precio_medio:Le(g[m].map(y=>y.precio_medio).filter(Number.isFinite))}))},d=u(c),h=new Map;for(let p of u(l))h.set(p.producto,p.precio_medio);let f=this.variablesService.calcularSustitucion(a,s||null,d,h);f&&f.productoOriginal!==i&&(f.productoOriginal=i),this.sustitucion.set(f)})}renderChart(){let n=this.chartCanvas?.nativeElement;if(!n)return;let t=this.serie().map(o=>o.label),r=this.serie().map(o=>o.value),i={type:"line",data:{labels:t,datasets:[{label:"Precio medio (mediana nacional)",data:r,borderColor:"#F28C28",backgroundColor:"rgba(242, 140, 40, 0.12)",tension:.25,pointRadius:2,pointHoverRadius:6,pointHitRadius:10,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"x",intersect:!1},plugins:{legend:{display:!1},tooltip:{callbacks:{title:o=>{if(o.length>0){let s=o[0].dataIndex;return t[s]||""}return""},label:o=>`Precio: $ ${Number(o.raw??0).toLocaleString("es-CO")}`},displayColors:!1,backgroundColor:"rgba(26, 26, 26, 0.9)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#F28C28",borderWidth:1,padding:12}},scales:{y:{ticks:{callback:o=>`$ ${Number(o).toLocaleString("es-CO")}`}}}}};this.chart?.destroy(),this.chart=new Ic(n,i)}ngAfterViewInit(){this.serie().length>0&&this.renderChart()}ngOnDestroy(){this.chart?.destroy()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-producto"]],viewQuery:function(t,r){if(t&1&&Xp($j,5),t&2){let i;fa(i=ha())&&(r.chartCanvas=i.first)}},decls:13,vars:3,consts:[["chartCanvas",""],[1,"section"],[1,"section-header"],[1,"eyebrow"],[1,"muted"],["routerLink","/catalogo",1,"btn","btn-secondary"],[1,"card"],[1,"caption"],[1,"product-grid"],[1,"price"],[1,"kpi-row"],[1,"section-header","compact"],["role","group","aria-label","Rango de tiempo",1,"range-buttons"],[1,"btn","btn-secondary","btn-sm",3,"active"],[1,"chart-wrap"],[1,"comparison-grid"],[1,"table-block"],[1,"kpi"],[1,"kpi-label"],[1,"kpi-value"],[1,"trend-icon"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"var-grid"],[1,"var-card"],[1,"card","inner"]],template:function(t,r){t&1&&(T(0,"section",1)(1,"div",2)(2,"div")(3,"p",3),b(4,"Producto"),D(),T(5,"h2"),b(6),D(),De(7,Uj,2,2,"p",4),D(),T(8,"a",5),b(9,"Volver al catalogo"),D()(),De(10,Hj,7,1,"div",6)(11,zj,3,0,"div",6)(12,i2,51,4),D()),t&2&&(M(6),ie(r.titulo()),M(),Se(r.fechaActual()?7:-1),M(3),Se(r.error()?10:r.loading()?11:12))},dependencies:[Ar,Nn],styles:['@charset "UTF-8";.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px}.comparison-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px;margin-top:16px}.section-header.compact[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.chart-wrap[_ngcontent-%COMP%]{position:relative;height:260px;margin-top:12px}.kpi-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:16px}.kpi-label[_ngcontent-%COMP%]{margin:0;font-size:12px;text-transform:uppercase;letter-spacing:.04em;color:#1a1a1ab3}.kpi-value[_ngcontent-%COMP%]{margin:6px 0 0;font-size:18px;font-weight:700}.kpi-value.up[_ngcontent-%COMP%]{color:#27ae60}.kpi-value.down[_ngcontent-%COMP%]{color:#c0392b}.kpi-value.neutral[_ngcontent-%COMP%]{color:#1a1a1a99}.kpi-value[_ngcontent-%COMP%]   .trend-icon[_ngcontent-%COMP%]{margin-right:4px}.var-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:12px;margin-top:12px}.var-card[_ngcontent-%COMP%]{padding:12px;border-radius:12px;background:#f8f9facc;border:1px solid rgba(26,26,26,.08)}.card.inner[_ngcontent-%COMP%]{margin-top:12px}.table-block[_ngcontent-%COMP%]{overflow-x:auto;margin-top:var(--spacing-md);-webkit-overflow-scrolling:touch}.table-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:var(--font-size-small);min-width:400px}.table-block[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:var(--color-background);border-bottom:2px solid var(--color-border)}.table-block[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:var(--spacing-sm) var(--spacing-md);font-weight:600;color:var(--color-text);white-space:nowrap}.table-block[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child, .table-block[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:right}.table-block[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-border);transition:background-color .15s ease}.table-block[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#2d5a270a}.table-block[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f8f9fa80}.table-block[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n):hover{background-color:#2d5a270f}.table-block[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);color:var(--color-text)}.table-block[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child){font-family:var(--font-mono);font-weight:500;text-align:right}@media (min-width: 992px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;align-items:start}.comparison-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.kpi-row[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}.var-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}']})};var vf=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-acerca"]],decls:18,vars:0,consts:[[1,"section"],[1,"section-header"],[1,"eyebrow"],[1,"about-grid"],[1,"card"]],template:function(t,r){t&1&&(A(0,"section",0)(1,"div",1)(2,"div")(3,"p",2),b(4,"Acerca de nosotros"),I(),A(5,"h2"),b(6,"Transparencia de precios para todos"),I()()(),A(7,"div",3)(8,"div",4)(9,"h3"),b(10,"Storytelling"),I(),A(11,"p"),b(12," Fruver Index nace para que los hogares colombianos entiendan cuanto cuesta la canasta familiar y donde pueden ahorrar sin perder calidad. "),I()(),A(13,"div",4)(14,"h3"),b(15,"Metodologia"),I(),A(16,"p"),b(17," Los datos provienen del reporte semanal del DANE. Limpiamos, normalizamos y presentamos los precios por ciudad y tipo de mercado. "),I()()()())},styles:["[_nghost-%COMP%]{display:block}"]})};var o2=(e,n)=>n.question;function s2(e,n){if(e&1&&(A(0,"details",4)(1,"summary"),b(2),I(),A(3,"p"),b(4),I()()),e&2){let t=n.$implicit;M(2),ie(t.question),M(2),ie(t.answer)}}var yf=class e{faqs=[{question:"Cada cuanto se actualizan los precios?",answer:"Cada semana con el reporte del DANE."},{question:"Como calculan el promedio de la canasta?",answer:"Sumamos el precio de los productos de la canasta familiar y calculamos el promedio."},{question:"Puedo registrar mi propio negocio de barrio?",answer:"No."}];static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-faq"]],decls:10,vars:0,consts:[[1,"section"],[1,"section-header"],[1,"eyebrow"],[1,"faq-list"],[1,"faq-item"]],template:function(t,r){t&1&&(A(0,"section",0)(1,"div",1)(2,"div")(3,"p",2),b(4,"Preguntas frecuentes"),I(),A(5,"h2"),b(6,"Lo que mas nos preguntan"),I()()(),A(7,"div",3),it(8,s2,5,2,"details",4,o2),I()()),t&2&&(M(8),ot(r.faqs))},styles:["[_nghost-%COMP%]{display:block}"]})};var bf=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-contacto"]],decls:48,vars:0,consts:[[1,"section"],[1,"section-header"],[1,"eyebrow"],[1,"contact-grid"],[1,"card","contact-form"],[1,"form-row"],["for","nombre",1,"field-label"],["id","nombre","type","text","placeholder","Tu nombre"],["for","correo",1,"field-label"],["id","correo","type","email","placeholder","correo@ejemplo.com"],["for","asunto",1,"field-label"],["id","asunto"],["for","mensaje",1,"field-label"],["id","mensaje","rows","4","placeholder","Cuentanos tu solicitud"],[1,"btn","btn-primary"],[1,"card","contact-info"],[1,"muted"],[1,"social-list"],["href","#",1,"btn","btn-secondary"],[1,"note"]],template:function(t,r){t&1&&(A(0,"section",0)(1,"div",1)(2,"div")(3,"p",2),b(4,"Contacto"),I(),A(5,"h2"),b(6,"Hablemos sobre precios y mercados"),I()()(),A(7,"div",3)(8,"form",4)(9,"div",5)(10,"label",6),b(11,"Nombre"),I(),Mn(12,"input",7),I(),A(13,"div",5)(14,"label",8),b(15,"Correo"),I(),Mn(16,"input",9),I(),A(17,"div",5)(18,"label",10),b(19,"Asunto"),I(),A(20,"select",11)(21,"option"),b(22,"Reportar error de precio"),I(),A(23,"option"),b(24,"Alianza"),I(),A(25,"option"),b(26,"Sugerencia"),I()()(),A(27,"div",5)(28,"label",12),b(29,"Mensaje"),I(),Mn(30,"textarea",13),I(),A(31,"button",14),b(32,"Enviar mensaje"),I()(),A(33,"div",15)(34,"h3"),b(35,"Redes sociales"),I(),A(36,"p",16),b(37,"Canales de difusion para alertas de precios."),I(),A(38,"div",17)(39,"a",18),b(40,"Telegram"),I(),A(41,"a",18),b(42,"WhatsApp"),I(),A(43,"a",18),b(44,"Instagram"),I()(),A(45,"div",19)(46,"p",16),b(47,"Responderemos en menos de 48 horas habiles."),I()()()()())},styles:["[_nghost-%COMP%]{display:block}"]})};var hS=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:xd},{path:"catalogo",component:Id},{path:"producto/:producto",component:mf},{path:"historicos/:productName",component:Td},{path:"acerca",component:vf},{path:"faq",component:yf},{path:"contacto",component:bf}];var pS={providers:[$h(),ig({eventCoalescing:!0}),zg(hS)]};var gS=()=>({exact:!0}),_f=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Ue({type:e,selectors:[["app-root"]],decls:37,vars:4,consts:[[1,"app"],[1,"top-nav"],[1,"logo"],[1,"logo-mark"],[1,"logo-title"],[1,"logo-subtitle"],["aria-label","Secciones principales",1,"nav-links"],["routerLink","/home","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/catalogo","routerLinkActive","active"],["routerLink","/acerca","routerLinkActive","active"],["routerLink","/faq","routerLinkActive","active"],["routerLink","/contacto","routerLinkActive","active"],[1,"main-content"],[1,"footer"],[1,"muted"],[1,"footer-links"],["aria-label","Navegacion inferior",1,"bottom-nav"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"header",1)(2,"div",2)(3,"span",3),b(4,"FI"),D(),T(5,"div")(6,"p",4),b(7,"Fruver Index"),D(),T(8,"p",5),b(9,"Tu asesor inteligente de precios frescos"),D()()(),T(10,"nav",6)(11,"a",7),b(12,"Inicio"),D(),T(13,"a",8),b(14,"Catalogo"),D(),T(15,"a",9),b(16,"Acerca"),D(),T(17,"a",10),b(18,"FAQ"),D(),T(19,"a",11),b(20,"Contacto"),D()()(),T(21,"main",12),Ir(22,"router-outlet"),D(),T(23,"footer",13)(24,"div")(25,"p",4),b(26,"Fruver Index"),D(),T(27,"p",14),b(28,"Datos de prueba \xB7 Ultima actualizacion: 16 Ene 2026"),D()(),T(29,"div",15)(30,"span"),b(31,"Desarrollado por Ingenio Advice"),D()()(),T(32,"nav",16)(33,"a",7),b(34,"Inicio"),D(),T(35,"a",8),b(36,"Catalogo"),D()()()),t&2&&(M(11),jt("routerLinkActiveOptions",Eu(2,gS)),M(22),jt("routerLinkActiveOptions",Eu(3,gS)))},dependencies:[Ba,Nn,Hg],styles:["[_nghost-%COMP%]{display:block}"]})};bg(_f,pS).catch(e=>console.error(e));
